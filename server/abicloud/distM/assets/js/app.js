webpackJsonp([1],[function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function n(t){d["default"].api.login({type:"wechat",openid:t.openid,display_name:t.display_name,avatar_url:t.avatar_url}).then(function(){var t=location.hash;t&&"#!/ktv"!=t&&0!=t.indexOf("#!/ktv?")&&(history.replaceState(null,null,"#!/ktv"),history.pushState(null,null,t)),d["default"].api.getUserInfo().then(function(){B.start(D,"app")},function(t){alert(t.message)})},function(t){alert(t.message)})}var o=s(10),a=i(o),r=s(8),l=i(r),c=s(28),d=i(c),u=s(27),p=i(u),f=s(26),h=i(f),v=s(57),m=i(v),g=s(59),y=i(g),b=s(58),x=i(b),k=s(60),w=i(k),_=s(55),M=i(_),S=s(54),T=i(S),$=s(56),L=i($);d["default"].use(p["default"]),d["default"].use(h["default"]),d["default"].use(m["default"]),d["default"].use(y["default"]),d["default"].http.options.root="http://letsktv.chinacloudapp.cn",d["default"].http.headers.common["X-KTV-Application-Name"]="eec607d1f47c18c9160634fd0954da1a",d["default"].http.headers.common["X-KTV-Vendor-Name"]="1d55af1659424cf94d869e2580a11bf8",d["default"].http.headers.common["X-KTV-Application-Platform"]="1";var D=d["default"].extend(s(155)),I=s(192);I.keys().forEach(function(t){d["default"].component(t.match(/\.\/(.*?)\.vue/)[1],d["default"].extend(I(t)))}),(0,l["default"])(M["default"]).forEach(function(t){d["default"].filter(t,M["default"][t])}),(0,l["default"])(T["default"]).forEach(function(t){d["default"].directive(t,T["default"][t])});var B=new p["default"]({hashbang:!0});B.map({"/ktv":{name:"list",title:"夜点娱乐",component:s(161)},"/ktv/:id":{name:"detail",hideBar:!0,component:s(160)},"/ktv/:id/map":{name:"map",hideBar:!0,component:s(162)},"/search/:keyword":{name:"search",hideBar:!0,component:s(168)},"/order":{name:"order",title:"我的订单",component:s(167),subRoutes:{"/ktv":{component:s(166)},"/gift":{component:s(164)}}},"/order/ktv/:id":{name:"ktv-order",title:"我的订单",hideBar:!0,component:s(165)},"/order/gift/:id":{name:"gift-order",title:"兑换成功",hideBar:!0,component:s(163)},"/store":{name:"store",title:"礼品兑换",component:s(169)},"/store/:id":{name:"gift",title:"礼品兑换",hideBar:!0,component:s(159)},"/user":{name:"user",title:"个人中心",component:s(170)},"/user/favorite":{name:"favorite",title:"我的收藏",component:s(158)},"/coupon":{name:"coupons",title:"我的兑酒券",component:s(156)},"/events":{name:"events",title:"夜点精彩",component:s(157)}}),B.redirect({"/order":"/order/ktv","*":"/ktv"}),B.afterEach(function(t){t.to.title&&(document.title=t.to.title)}),d["default"].use(x["default"],B),d["default"].use(w["default"],B),L["default"].init(function(t){n(t)},function(t){alert(t.msg||(0,a["default"])(t))})},,,function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function n(t){return t*(Math.PI/180)}var o=s(10),a=i(o),r=s(15),l=i(r),c=e;c.getLocation=function(){var t=0,e=sessionStorage.getItem("location"),s=e?JSON.parse(e):null;return function(e,i,n){function o(t,i){console.info(t,i),s=t,sessionStorage.setItem("location",(0,a["default"])(t)),e&&e(t),n&&n(t)}function r(e){e&&(t++,console.info(e)),i&&i(e),n&&n()}return e===!0?s:void(s?o(s,"cache"):t>1?r():window.wxIsReady?window.wx.getLocation({type:"gcj02",success:function(t){o({lat:t.latitude,lng:t.longitude},"wxApi")},fail:r,cancel:r}):"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(t){o({lat:t.coords.latitude,lng:t.coords.longitude},"geolocation")},r,{enableHighAccuracy:!0,timeout:5e3,maximumAge:6e4}):r())}}(),c.getDistance=function(t,e,s,i){var o=6371;if(!s){var a=c.getLocation(!0);a&&(s=a.lat,i=a.lng)}if(!s)return null;var r=n(s-t),l=n(i-e),d=Math.sin(r/2)*Math.sin(r/2)+Math.cos(n(t))*Math.cos(n(s))*Math.sin(l/2)*Math.sin(l/2),u=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),p=o*u;return p.toFixed(1)},c.calcWeight=function(t,e){"smart"==e&&(e="distance");var s=0,i="distance"==(e||"distance"),n=1e3*t.distance;s+=500>=n?5:1e3>=n?4:2e3>=n?3:3e3>=n?2:1,s*=i?1e3:100,s+=t[i?"rate":e]*(i?100:1e3);var o=t.xktvname.charAt(0),a=o.charCodeAt(0)<=122;return s+=(25-((a?o:l["default"].getFirstLetter(o)).charCodeAt(0)-96))*(a?2:1)},c.getImageColor=function(){var t,e=document.createElement("canvas"),s=e.getContext("2d"),i={};return e.width=e.height=1,function(e,n){var o=e.src||e;if(i[o])return n(i[o],o);var a=new Image;a.onload=function(){s.drawImage(a,0,0),t=s.getImageData(0,0,1,1).data,i[o]=t,n(t,o)},a.onerror=function(){n()},a.crossOrigin="Anonymous",a.src=o}}(),c.throttle=function(t,e,s){var i,n,o,a=null,r=0;s||(s={});var l=function(){r=s.leading===!1?0:Date.now(),a=null,o=t.apply(i,n),a||(i=n=null)};return function(){var c=Date.now();r||s.leading!==!1||(r=c);var d=e-(c-r);return i=this,n=arguments,0>=d||d>e?(a&&(clearTimeout(a),a=null),r=c,o=t.apply(i,n),a||(i=n=null)):a||s.trailing===!1||(a=setTimeout(l,d)),o}},c.debounce=function(t,e,s){var i,n,o,a,r,l=function c(){var l=Date.now()-a;e>l&&l>=0?i=setTimeout(c,e-l):(i=null,s||(r=t.apply(o,n),i||(o=n=null)))};return function(){o=this,n=arguments,a=Date.now();var c=s&&!i;return i||(i=setTimeout(l,e)),c&&(r=t.apply(o,n),o=n=null),r}},c.isMobile=function(t){return/^1\d{10}$/.test(t)},c.isCaptcha=function(t){return t.length>=4},c.encodeBackgroundImageUrl=function(t){return t.replace(" ","%20").replace("(","\\(").replace(")","\\)")},c.getURLParameter=function(t){var e=new RegExp("[?&]"+t+"=([^&]*)").exec(location.search);return e?decodeURIComponent(e[1]):null},c.parseDate=function(t,e){if(!(e instanceof Date))return"";var s={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in s)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?s[i]:("00"+s[i]).substr((""+s[i]).length)));return t}},,,,function(t,e,s){var i=s(85)("wks"),n=s(90),o=s(12).Symbol;t.exports=function(t){return i[t]||(i[t]=o&&o[t]||(o||n)("Symbol."+t))}},,function(t,e){t.exports={}},function(t,e,s){t.exports={"default":s(69),__esModule:!0}},,,function(t,e,s){var i=s(6),n=s(22);t.exports=s(77)?function(t,e,s){return i.setDesc(t,e,n(1,s))}:function(t,e,s){return t[e]=s,t}},,,function(t,e,s){var i=s(17),n=s(7)("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,s,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(s=(e=Object(t))[n])?s:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e){var s={}.toString;t.exports=function(t){return s.call(t).slice(8,-1)}},,,function(t,e){var s={}.hasOwnProperty;t.exports=function(t,e){return s.call(t,e)}},function(t,e,s){"use strict";var i=s(82),n=s(18),o=s(84),a=s(13),r=s(20),l=s(9),c=s(80),d=s(23),u=s(6).getProto,p=s(7)("iterator"),f=!([].keys&&"next"in[].keys()),h="@@iterator",v="keys",m="values",g=function(){return this};t.exports=function(t,e,s,y,b,x,k){c(s,e,y);var w,_,M=function(t){if(!f&&t in L)return L[t];switch(t){case v:return function(){return new s(this,t)};case m:return function(){return new s(this,t)}}return function(){return new s(this,t)}},S=e+" Iterator",T=b==m,$=!1,L=t.prototype,D=L[p]||L[h]||b&&L[b],I=D||M(b);if(D){var B=u(I.call(new t));d(B,S,!0),!i&&r(L,h)&&a(B,p,g),T&&D.name!==m&&($=!0,I=function(){return D.call(this)})}if(i&&!k||!f&&!$&&L[p]||a(L,p,I),l[e]=I,l[S]=g,b)if(w={values:T?I:M(m),keys:x?I:M(v),entries:T?M("entries"):I},k)for(_ in w)_ in L||o(L,_,w[_]);else n(n.P+n.F*(f||$),e,w);return w}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,s){var i=s(6).setDesc,n=s(20),o=s(7)("toStringTag");t.exports=function(t,e,s){t&&!n(t=s?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,s){"use strict";var i=s(86)(!0);s(21)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,s=this._i;return s>=e.length?{value:void 0,done:!0}:(t=i(e,s),this._i+=t.length,{value:t,done:!1})})},function(t,e,s){s(94);var i=s(9);i.NodeList=i.HTMLCollection=i.Array},,,,,function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(14),o=i(n);e["default"]={props:{province:{type:String,twoWay:!0},city:{type:String,twoWay:!0},district:{type:String,twoWay:!0}},ready:function(){this.provinceScroller=t(this.$els.province).mobiscroll().select({data:this.convertToData(o["default"].getProvinceList()),showInput:!1,onSelect:this.setProvince}).mobiscroll("getInst"),this.cityScroller=t(this.$els.city).mobiscroll().select({showInput:!1,onSelect:this.setCity}).mobiscroll("getInst"),this.districtScroller=t(this.$els.district).mobiscroll().select({showInput:!1,onSelect:this.setDistrict}).mobiscroll("getInst"),this.province&&this.setProvince(this.province,!1),this.city&&this.setCity(this.city,!1),this.district&&this.setDistrict(this.district,!1)},methods:{convertToData:function(t){return t.map(function(t){return{text:t,value:t}})},setProvince:function(t,e){return this.cityScroller&&this.districtScroller?(this.province=t,this.cityScroller.option("data",this.convertToData(o["default"].getCityList(t))),this.districtScroller.option("data",[]),void(e&&(this.city=this.district=""))):!1},setCity:function(t,e){return this.districtScroller&&this.districtScroller?(this.city=t,this.districtScroller.option("data",this.convertToData(o["default"].getDistrictList(this.province,t))),void(e?this.district="":this.districtScroller.setVal(t,!0))):!1},setDistrict:function(t,e){return this.districtScroller?(this.district=t,void(e||this.districtScroller.setVal(t,!0))):!1}},watch:{province:function(t,e){e||this.setProvince(t,!1)},city:function(t,e){e||this.setCity(t,!1)},district:function(t,e){e||this.setDistrict(t,!1)}}}}).call(e,s(1))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{hidden:{type:Boolean,"default":!0},icon:{type:String,"default":"success"},message:{type:String,"default":""},callback:Function},methods:{show:function(t,e,s){this.icon=t,this.message=e,s&&(this.callback=s),this.hidden=!1},hide:function(){this.hidden=!0,this.callback&&this.callback()}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{inlineMode:{type:Boolean,"default":!1}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{show:{type:Boolean,"default":!1,twoWay:!0},showBtn:{type:Boolean,"default":!0},btnText:{type:String,"default":"确定"},btnDisabled:{type:Boolean,"default":!1},submit:Function,title:String},data:function(){return{docTitle:document.title}},beforeDestroy:function(){document.body.classList.remove("no-scroll")},methods:{open:function(){this.show=!0},close:function(){this.show=!1},submitHandler:function(){this.submit?this.submit():this.show=!1},setLoading:function(t){t?(this._btnText=this.btnText,this.btnText="正在提交",this.btnDisabled=!0):(this.btnText=this._btnText,this.btnDisabled=!1)}},watch:{show:function(t){this.title&&(document.title=t?this.title:this.docTitle),document.body.classList.toggle("no-scroll",t)}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{inlineMode:{type:Boolean,"default":!1},message:{type:String,"default":""},info:{type:String,"default":""}}}},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(3);i(n);e["default"]={props:{slides:{type:Array,"default":[]},current:{type:Number,"default":0}},ready:function(){this.width=window.innerWidth,this.startX=0,this.startY=0,this.distance=0,this.isMoving=!1},beforeDestroy:function(){this.slides.length>1&&t(this.$el).off(".ss")},methods:{bindEvents:function(){var e=this,s=t(this.$el);s.on("touchstart.ss",function(t){if(e.isMoving)return!1;var i=t.originalEvent.touches[0];e.startX=i.pageX,e.startY=i.pageY,s.off(".temp").one("touchmove.ss",function(t){i=t.originalEvent.changedTouches[0],Math.abs(e.startX-i.pageX)>Math.abs(e.startY-i.pageY)&&(t.preventDefault(),e.isMoving=!0,e.oldX=-e.width*e.current,e.startTime=Date.now(),e.startX=i.pageX,e.startY=i.pageY,s.on("touchmove.ss.temp",e.touchmoveHandler).one("touchend.ss.temp touchcancel.ss.temp",e.touchendHandler))})}).on("webkitTransitionEnd transitionend",function(t){var s=e.$els.carousel;t.originalEvent.target==s&&(s.classList.remove("transition"),-1==e.current?(e.current=e.slides.length-1,e.translateX(-e.width*e.current)):e.current==e.slides.length&&(e.current=0,e.translateX(-e.width*e.current)),e.isMoving=!1)})},translateX:function(t){this.$els.carousel.style.WebkitTransform=this.$els.carousel.style.transform="translate3d("+t+"px,0,0)"},touchmoveHandler:function(t){var e=t.originalEvent.changedTouches[0];this.distance=e.pageX-this.startX,this.translateX(this.oldX+this.distance)},touchendHandler:function(e){var s=this.distance/this.width,i=this.distance/(Date.now()-this.startTime),n=this.current;-.2>s||-.5>i?n++:(s>.2||i>.5)&&n--,this.$els.carousel.classList.add("transition"),this.translateX(-this.width*n),this.current=n,t(this.$el).off(".temp")}},watch:{slides:function(t){if(t.length<2)return!1;var e=window.innerWidth,s=this.$els.carousel;s&&(s.style.left=-e+"px",s.style.width=(t.length+2)*e+"px",this.$nextTick(function(){Array.prototype.forEach.call(s.children,function(t){t.style.width=e+"px"})}),this.bindEvents())}}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{value:{type:Number,"default":1,twoWay:!0},min:{type:Number,"default":1},max:{type:Number,"default":9999},step:{type:Number,"default":1}},ready:function(){for(var e=this,s=[],i=this.min,n=this.max;n>=i;i+=this.step)s.push({text:i,value:i});this.scroller=t(this.$els.input).mobiscroll().select({data:s,onSelect:function(t){e.value=t}}).mobiscroll("getInst")},methods:{adjust:function(t){var e=this.value+t;this.min<=e&&e<=this.max&&(this.value=e,this.scroller.setVal(e,!0))}},watch:{value:function(t){this.scroller.setVal(t,!0)}}}}).call(e,s(1))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={data:function(){return{show:!0,items:[{id:"ktv",name:"KTV预订",link:"/ktv"},{id:"news",name:"夜点精彩",link:"/events"},{id:"store",name:"礼品兑换",link:"/store"},{id:"user",name:"个人中心",link:"/user"}]}},ready:function(){var t=this,e=document.body;this.$router.afterEach(function(s){var i=s.to;t.show=!i.hideBar,e.classList[t.show?"add":"remove"]("show-tabbar")})}}},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(10),o=i(n),a=s(29);i(a);e["default"]={ready:function(){t.mobiscroll.setDefaults({theme:"ios",lang:"zh",display:"bottom",height:42,mode:"scroller"}),window.onerror=function(t,e,s,i,n){if("Script error."!=t){var a={ua:navigator.userAgent,url:location.href,msg:t,file:e,line:s,col:i};n&&n.stack&&(a.msg=n.stack.toString()),this.$api.post("tongji/errorreport",{content:(0,o["default"])(a)})}}}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(3),o=i(n);e["default"]={data:function(){return{list:[],COUPON_STATUS:{0:"未使用",1:"已使用",2:"已过期",3:"初始状态",4:"已失效",5:"使用中"},offset:0,limit:27,page:0,perPage:9,loadingStatus:1,errorMsg:""}},route:{data:function(){this.fetch()}},ready:function(){var e=this,s=t(window),i=t(document),n=s.height();s.on("scroll",o["default"].throttle(function(){return 1==e.loadingStatus?!1:void(i.height()-n-s.scrollTop()<400&&e.fetch())},100)),window.scrollTo(0,0)},beforeDestroy:function(){t(window).off("scroll")},methods:{fetch:function(){return this.offset>this.currLimit?(this.page++,!1):2==this.loadingStatus?!1:(this.loadingStatus=1,void this.$api.get("Coupon/list",{offset:this.offset,limit:this.limit}).then(function(t){return 0==t.total?(this.loadingStatus=2,!1):(this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,void(t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0))},function(t){this.errorMsg=t.msg,this.loadingStatus=-1}))}}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={data:function(){return{events:[{pic:"./assets/img/events/0.jpg",pic_blurred:"./assets/img/events/0_blurred.jpg",link:"http://letsktv.chinacloudapp.cn/wechat_ktv/home/event/enter"},{pic:"./assets/img/events/1.jpg",pic_blurred:"./assets/img/events/1_blurred.jpg",link:"/ktv?event=jq"},{pic:"./assets/img/events/2.jpg",pic_blurred:"./assets/img/events/2_blurred.jpg",link:"http://letsktv.chinacloudapp.cn/_tools/redirecttohistorymessage.php"}],current:0}},ready:function(){window.scrollTo(0,0),this.init()},beforeDestroy:function(){t(this.$el).find(".card").off(".ss"),t(document).off(".ss")},methods:{init:function(){var e=window.innerWidth,s=window.innerHeight-54;this.carousel=t(".carousel").get(0),this.width=e,this.startX=0,this.startY=0,this.distance=0,this.isMoving=!1,t(".page-events").css({height:s}),t(this.carousel).css({width:e*(this.events.length+2),height:s-110,left:-e}).find(".slide").css({width:e}).find(".card").css({width:560*(s-170)/770,height:s-110}),this.bindEvents()},bindEvents:function(){var e=this,s=t(document);t(this.$el).find(".card").on("touchstart.ss",function(t){if(e.isMoving)return!1;var i=t.originalEvent.touches[0];e.startX=i.pageX,e.startY=i.pageY,s.off(".temp").one("touchmove.ss",function(t){i=t.originalEvent.changedTouches[0],Math.abs(e.startX-i.pageX)>Math.abs(e.startY-i.pageY)&&(t.preventDefault(),e.isMoving=!0,e.oldX=-e.width*e.current,e.startTime=Date.now(),e.startX=i.pageX,e.startY=i.pageY,s.on("touchmove.ss.temp",e.touchmoveHandler).one("touchend.ss.temp touchcancel.ss.temp",e.touchendHandler))})}),t(this.carousel).on("webkitTransitionEnd transitionend",function(t){t.originalEvent.target==e.carousel&&(e.carousel.classList.remove("transition"),-1==e.current?(e.current=e.events.length-1,e.translateX(-e.width*e.current)):e.current==e.events.length&&(e.current=0,e.translateX(-e.width*e.current)),e.isMoving=!1)})},translateX:function(t){this.carousel.style.WebkitTransform=this.carousel.style.transform="translate3d("+t+"px,0,0)"},touchmoveHandler:function(t){var e=t.originalEvent.changedTouches[0];this.distance=e.pageX-this.startX,this.translateX(this.oldX+this.distance)},touchendHandler:function(e){var s=this.distance/this.width,i=this.distance/(Date.now()-this.startTime),n=this.current;-.2>s||-.5>i?n++:(s>.2||i>.5)&&n--,this.carousel.classList.add("transition"),this.translateX(-this.width*n),this.current=n,t(document).off(".temp")},go:function(t){this.$trackEvent("events","click",t),0==t.indexOf("http")?setTimeout(function(){location=t},100):this.$router.go(t)}}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(3),o=i(n);e["default"]={data:function(){return{list:[],offset:0,limit:27,page:0,perPage:9,loadingStatus:1,errorMsg:""}},route:{data:function(){o["default"].getLocation(null,null,this.fetch)}},ready:function(){var e=this,s=t(window),i=t(document),n=s.height();s.on("scroll",o["default"].throttle(function(){return 1==e.loadingStatus?!1:void(i.height()-n-s.scrollTop()<400&&e.fetch())},100))},beforeDestroy:function(){t(window).off("scroll")},methods:{fetch:function(){return this.offset>this.currLimit?(this.page++,!1):2==this.loadingStatus?!1:(this.loadingStatus=1,void this.$api.get("user/collectionlist",{offset:this.offset,limit:this.limit}).then(function(t){return 0==t.total?(this.loadingStatus=2,!1):(this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,void(t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0))},function(t){this.errorMsg=t.msg,this.loadingStatus=-1}))}}}}).call(e,s(1))},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(3),o=i(n);e["default"]={data:function(){return{gift:{},order:{quantity:1,captcha:"",name:"",mobile:"",province:"",city:"",district:"",address:""},userPoints:0,loadingStatus:1,errorMsg:""}},route:{data:function(){this.$api.getUserInfo(!0).then(function(t){this.userPoints=t.points,this.order.name=t.sname,this.order.mobile=t.stel,this.order.province=t.prov,this.order.city=t.city,this.order.district=t.county,this.order.address=t.address,this.fetch()})}},ready:function(){window.scrollTo(0,0)},methods:{fetch:function(){this.loadingStatus=1,this.$api.get("gift/giftdetail",{giftid:this.$route.params.id}).then(function(t){t.data.real="实物"==t.data.productsale_cata3,this.gift=t.data,this.loadingStatus=2,this.$wxShare({title:"用积分就可以兑换［"+this.gift.productsale_name+"］",desc:"我在夜点的积分商城里面看的这个不错哦…",titleTL:"我在夜点的积分商城里面看到［"+this.gift.productsale_name+"］不错哦…",imgUrl:this.gift.product_mainpic})},function(t){this.errorMsg=t.msg,this.loadingStatus=-1})},submitOrder:function(){this.$refs.exchangeModal.setLoading(!0),this.gift.real?this.$api.post("gift/orderreal",{giftid:this.gift.product_id,giftcount:this.order.quantity,sname:this.order.name,stel:this.order.mobile,prov:this.order.province,city:this.order.city,county:this.order.district,address:this.order.address}).then(function(t){this.$router.go({name:"gift-order",params:{id:t.order_result}})},function(t){alert(t.msg||"提交失败")}):this.$api.verifyCode(this.order.mobile,this.order.captcha).then(function(){return this.$api.post("gift/ordervirtual",{giftid:this.gift.product_id,giftcount:1,mobile:this.order.mobile})}).then(function(t){this.$router.go({name:"gift-order",params:{id:t.order_result}})})["catch"](function(t){this.$refs.exchangeModal.setLoading(!1),alert(t.msg||"提交失败")})}},computed:{maxQuantity:function(){return Math.max(1,Math.floor(this.userPoints/this.gift.productsale_points))},isInvalidOrder:function(){return this.gift.real?!(this.order.quantity>0&&o["default"].isMobile(this.order.mobile)&&""!=this.order.name&&""!=this.order.province&&""!=this.order.city&&""!=this.order.district&&""!=this.order.address):!(o["default"].isMobile(this.order.mobile)&&o["default"].isCaptcha(this.order.captcha))}}}},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(66),o=i(n),a=s(8),r=i(a),l=s(3),c=i(l);e["default"]={data:function(){return{ktv:{},now:-1,favorite:!1,order:{ktvid:"",roomtype:1,starttime:"",members:"",phone:"",captcha:"",duration:"",couponid:0},userMobile:"",couponList:[],deviceLimit:4,deviceNames:{bathroom:"独立卫生间",yedianpad:"夜点PAD",wirelessmicrophones:"无线麦克风",themerooms:"主题包房",parking:"停车场",xktv:"XKTV触摸桌",wifi:"免费WiFi",tm:"弹幕",zxgy:"观影",sjdg:"手机点歌",zqss:"足球赛事"},feedbackErrors:[{id:1,msg:"地址位置错误",selected:!1},{id:2,msg:"商户联系电话错误",selected:!1},{id:3,msg:"房型有误",selected:!1},{id:4,msg:"价格有误",selected:!1},{id:5,msg:"服务信息有误",selected:!1},{id:6,msg:"KTV已关闭",selected:!1}],showEventsLayer:!1,serviceAvailable:!0,serviceStartTime:"N/A",loadingStatus:1,errorMsg:""}},route:{data:function(){c["default"].getLocation(null,null,this.fetch),this.$api.getUserInfo(!0).then(function(t){this.userMobile=t.mobile,this.order.phone=t.mobile})}},ready:function(){window.scrollTo(0,0)},beforeDestroy:function(){this.starttimeScroller&&(this.starttimeScroller.destroy(),this.durationScroller.destroy(),this.membersScroller.destroy(),this.couponScroller.destroy())},methods:{fetch:function(){this.loadingStatus=1,this.$api.get("booking/xktv",{xktvid:this.$route.params.id}).then(function(t){this.now=t.now,this.ktv=t.data,this.order.ktvid=t.data.xktvid,this.ktv.devices.length>4&&(this.deviceLimit=3),this.loadingStatus=2,this.$wxShare({title:this.ktv.xktvname,desc:"我在夜点看到这个KTV不错哦，大家都来看看吧！",titleTL:"我在夜点看到［"+this.ktv.xktvname+"］不错哦，大家都来看看吧！",imgUrl:this.ktv.piclist[0].smallpicurl}),this.starttimeScroller||setTimeout(this.initScroller.bind(this),500)},function(t){this.errorMsg=t.msg,this.loadingStatus=-1})},initScroller:function(){var e=this,s=(Date.now(),new Date(1e3*this.now)),i=new Date(s.getTime()),n=c["default"].parseDate("yyyy-M-d",i),a={},l=this.ktv.openhours_s==this.ktv.openhours_e,d=void 0,u=void 0,p=void 0,f=this.ktv.openhours_s.split(":"),h=new Date(i.getTime()),v=parseInt(f[0]);h.setHours(v,parseInt(f[1])),f=this.ktv.openhours_e.split(":");var m=new Date(i.getTime()),g=parseInt(l?f[0]:f[0]-1),y=v>g;m.setHours(y?g+24:g,parseInt(f[1]));var b=new Date(h.getTime()),x=void 0;if(0==this.ktv.type)if(i.getHours()>=14&&i.getHours()<=21){var k=(b.getTime()-i.getTime())/1e3;60>k?i.getMinutes()<30?b.setHours(i.getHours()+1,30):b.setHours(i.getHours()+2,0):b.setHours(b.getHours()+1)}else this.serviceAvailable=!1;else i.getTime()>=b.getTime()&&i.getTime()<m.getTime()&&(i.getMinutes()<30?b.setMinutes(0):b.setMinutes(30));x=100*Math.max(i.getHours(),b.getHours())+b.getMinutes();for(var w=0;3>w;w++)w>0&&i.setDate(i.getDate()+1),d=i.getFullYear(),u=i.getMonth()+1,p=i.getDate(),a[d]?a[d][u]?a[d][u].push(p):a[d][u]=[p]:(a[d]={},a[d][u]=[p]);var _=(0,r["default"])(a),M=(0,r["default"])(a[_[0]]),S=a[_[0]][M[0]],T=this.getTimeRange(h,m,!0),$=T.filter(function(t){return parseInt(t.replace(":",""))>=x}),L=void 0,D=new Date(h.getTime());this.starttimeScroller=t(".order-starttime").mobiscroll().scroller({wheels:[[{label:"年",keys:_,values:_.map(function(t){return t+"年"})},{label:"月",keys:M,values:M.map(function(t){return t+"月"})},{label:"日",keys:S,values:S.map(function(t){return t+"日"})},{label:"时间",values:$}]],onMarkupReady:function(t){t.addClass("datetimepicker")},onChange:function(t,e){var s=e.getArrayVal(!0),i=(0,o["default"])(s,3),l=i[0],c=i[1],d=i[2],u=L,p=(0,o["default"])(u,3),f=p[0],h=p[1],v=p[2],m=e.settings.wheels[0];if(f!=l&&(M=(0,r["default"])(a[l]),c=M[0],m[1].keys=M,m[1].values=M.map(function(t){return t+"月"}),e.changeWheel([1])),f==l&&h==c||(S=a[l][c],m[2].keys=S,m[2].values=S.map(function(t){return t+"日"}),e.changeWheel([2])),f!=l||h!=c||v!=d){var g=s.slice(0,3).join("-");g!=n&&L.slice(0,3).join("-")!=n||(m[3].values=n!=g?T:$,e.changeWheel([3]))}L=s.slice()},onSelect:function(t){var s=t.match(/\d+/g),i=(0,o["default"])(s,5),n=(i[0],i[1],i[2]),a=i[3],r=i[4];e.order.starttime=t,D.setDate(n),D.setHours(a,r);var l=-1==g?24:g;m.setDate(parseInt(a)>l?parseInt(n)+1:n);var c=1+(m.getTime()-D.getTime())/1e3/60/60;e.durationScroller.option("data",e.genScrollerData(1,Math.min(10,c)," 小时")),e.order.duration=e.$els.duration.value=""},formatValue:function(t){return t[0]+"/"+t[1]+"/"+t[2]+" "+t[3]}}).mobiscroll("getInst"),L=this.starttimeScroller.getArrayVal(!0),this.durationScroller=t(".order-duration").mobiscroll().select({data:this.genScrollerData(1,10," 小时"),showInput:!1,onSelect:function(t){e.order.duration=this.value,e.$els.duration.value=t}}).mobiscroll("getInst");var I=this.genScrollerData(1,20," 人");I.push({text:"20+ 人",value:21}),this.membersScroller=t(".order-members").mobiscroll().select({data:I,showInput:!1,onSelect:function(t){e.order.members=this.value,e.$els.members.value=t}}).mobiscroll("getInst"),this.couponScroller=t(".order-coupon").mobiscroll().select({showInput:!1,onSelect:function(t){e.order.couponid=this.value,e.$els.coupon.value=t.split("（")[0]}}).mobiscroll("getInst")},getTimeRange:function(t,e){var s=[],i=[],n=t.getHours()+":"+t.getMinutes(),a=e.getHours()+":"+e.getMinutes();if(n==a){for(var r=0;23>=r;r++)i.push(r+":00"),i.push(r+":30");return i}return"23:0"==a&&(a="23:59"),t.getHours()>e.getHours()&&"23:59"!=a?s.push({start:"0:0",end:a},{start:n,end:"23:30"}):s.push({start:n,end:a}),s.forEach(function(t){for(var e=t.start.split(":").map(function(t){return parseInt(t)}),s=(0,o["default"])(e,2),n=s[0],a=s[1],r=t.end.split(":").map(function(t){return parseInt(t)}),l=(0,o["default"])(r,2),c=l[0],d=l[1],u=n;c>=u;u++)u==n&&0!=a||i.push(u+":00"),(u!=c||d>=30)&&i.push(u+":30")}),i},genScrollerData:function(t,e,s){for(var i=[],n=t;e>=n;n++)i.push({text:n+s,value:n});return i},openOrderModal:function(){this.$refs.orderModal.open(),this.couponList.length||this.$api.get("coupon/availablelist").then(function(t){if(t.total){t.list.sort(function(t,e){return t.count==e.count?t.expire_time-e.expire_time:e.count-t.count});var e=t.list.map(function(t){return{text:t.name+"（"+Math.floor((1e3*t.expire_time-Date.now())/1e3/60/60/24)+"天内使用）",value:t.id}});e.unshift({text:"不选择任何兑酒券",value:0}),this.couponScroller.option("data",e),this.couponScroller.setVal(e[1].value,!0),this.$els.coupon.value=e[1].text.split("（")[0],this.couponList=e,this.order.couponid=e[1].value}else this.$els.coupon.value=t.wrong_msg||"无",this.couponList=[]},function(){this.$els.coupon.value="获取失败",this.couponList=[]})},verifyCode:function(){this.$api.verifyCode(this.order.phone,this.order.captcha).then(function(t){return this.$api.updateUserInfo({mobile:this.order.phone})}).then(function(t){this.submitOrder(!0)})["catch"](function(t){this.$refs.orderModal.setLoading(!1),alert(t.msg||"更新失败")})},submitOrder:function(t){var e=this.order.starttime+":00",s=e.match(/\d+/g),i=(0,o["default"])(s,5),n=i[0],a=i[1],r=i[2],l=i[3],d=i[4],u=new Date(n,parseInt(a)-1,r,l,d),p=new Date(u.getTime());p.setHours(p.getHours()+parseInt(this.order.duration)),this.$refs.orderModal.setLoading(!0),t||this.userMobile?this.$api.post("booking/submitorder",{ktvid:this.ktv.xktvid,roomtype:this.order.roomtype,starttime:c["default"].parseDate("yyyy-MM-dd hh:mm:ss",u),endtime:c["default"].parseDate("yyyy-MM-dd hh:mm:ss",p),members:this.order.members,couponid:this.order.couponid}).then(function(t){this.$refs.orderModal.close();var e="<p>您的订单已提交成功<br>我们会尽早为您安排合适的时间<br>请留意夜点娱乐公众号为您发送的订单信息。</p>";this.$refs.flashMessage.show("success",e,function(){this.$router.go("/order")})},function(t){this.$refs.orderModal.setLoading(!1),alert(t.msg||"预订失败")}):this.verifyCode()},openMap:function(){window.wxIsReady?wx.openLocation({latitude:this.ktv.lat,longitude:this.ktv.lng,name:this.ktv.xktvname,address:this.ktv.address,scale:14}):this.$router.go({name:"map",query:{lat:this.ktv.lat,lng:this.ktv.lng,name:this.ktv.xktvname,address:this.ktv.address}})},doFavorite:function(){var t=this.ktv.xktvid,e=-1==this.$userdata.collectionids.indexOf(t);this.$api.post("user/"+(e?"addcollection":"delcollection"),{xktvid:t}).then(function(s){e?this.$userdata.collectionids+=","+t:this.$userdata.collectionids=this.$userdata.collectionids.replace(t,""),this.favorite=e,this.$refs.favoriteModal.open()},function(t){alert(t.msg||"提交失败")})},submitFeedback:function(){var t=this.selectedErrors.map(function(t){return t.id});this.$api.post("feedback/feedback",{ktvid:this.ktv.xktvid,openid:this.$userdata.userid,errortype:t.join(",")}).then(function(t){this.$refs.feedbackModal.close(),this.$refs.flashMessage.show("smile","<p>感谢您的反馈<br>我们会对您提出的问题尽快做出调整<br>再次谢谢您对夜点娱乐的支持！</p>"),this.feedbackErrors.forEach(function(t){t.selected=!1})},function(t){alert(t.msg||"提交失败")})}},computed:{selectedErrors:function(){return this.feedbackErrors.filter(function(t){return t.selected})},isInvalidOrder:function(){return!(""!=this.order.roomtype&&(this.userMobile?!0:c["default"].isMobile(this.order.phone)&&c["default"].isCaptcha(this.order.captcha))&&""!=this.order.starttime&&""!=this.order.duration&&""!=this.order.members)}},filters:{deviceName:function(t){return this.deviceNames[t.toLowerCase()]}},watch:{showEventsLayer:function(t){t&&this.$els.eventsLayer.classList.toggle("scroll",this.$els.eventsLayer.querySelector(".flash-message-dialog").scrollHeight>window.innerHeight),document.body.classList.toggle("no-scroll",t)}}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(8),o=i(n),a=s(3),r=i(a);e["default"]={data:function(){var t=[{distance:500,name:"离我500M"},{distance:1e3,name:"离我1KM"},{distance:2e3,name:"离我2KM"},{distance:3e3,name:"离我3KM"}],e=[{code:0,name:"全部商区"}],s=[{code:"distance",name:"离我最近"},{code:"smart",name:"智能排序"},{code:"DecorationRating",
name:"环境最佳"},{code:"SoundRating",name:"音效最好"},{code:"ServiceRating",name:"服务最好"},{code:"FoodRating",name:"美食最佳"},{code:"responsetime",name:"订单处理最快"}],i=[{code:"sjq",name:"兑酒券"}];return{activeLayer:!1,keyword:"",filterBy:"area",distanceList:t,areaList:e,filterKey:e[0],sortTypes:s,sortKey:s[1],eventTypes:i,eventKey:null,exclusiveEvent:!1,list:[],type:this.$route.query.type||"",offset:0,limit:27,page:0,perPage:9,loadingStatus:1,errorMsg:""}},route:{data:function(){var t=this,e=this.$route.query;"jq"==e.event&&(this.eventKey=this.eventTypes[0]),r["default"].getLocation(null,null,function(){e.district?t.getDistrictList(e.district):(t.fetch(),t.getDistrictList())})}},ready:function(){var e=this;this.$route.query.fromTabBar&&window.scrollTo(0,0);var s=this.$els.masthead,i=t(window),n=t(document),o=i.height();n.on("touchstart.page",function(t){var e=i.scrollTop();i.one("scroll",function(t){var n=i.scrollTop(),o=n-e;n>44&&o>0?s.classList.add("hide"):s.classList.remove("hide")})}),i.on("scroll",r["default"].throttle(function(){var t=i.scrollTop();return 1==e.loadingStatus?!1:(n.height()-o-t<400&&e.fetch(),void(44>t&&s.classList.remove("hide")))},100))},beforeDestroy:function(){t(document).off(".page"),t(window).off("scroll")},methods:{buildQuery:function(t){var e={code:this.filterKey.code,best:"smart"==this.sortKey.code?"distance":this.sortKey.code,type:this.type,sjq:this.eventKey?Number("sjq"==this.eventKey.code):0,ydzs:Number(this.exclusiveEvent)};return t&&(0,o["default"])(t).forEach(function(s){e[s]=t[s]}),e},fetch:function(){("distance"==this.sortKey.code||"smart"==this.sortKey.code)&&0===this.filterKey.code||this.filterKey.distance?this.coords?this.fetchByDistance():this.fetchCoords(function(){this.fetchByDistance()}):this.fetchList()},fetchList:function(){return this.offset>this.currLimit?(this.page++,!1):2==this.loadingStatus?!1:(this.loadingStatus=1,void this.$api.get("booking/xktvlist",this.buildQuery({offset:this.offset,limit:this.limit})).then(function(t){var e=this;if(0==t.total)return this.loadingStatus=2,!1;var s="smart"==this.sortKey.code;t.list.forEach(function(t){t.distance=r["default"].getDistance(t.lat,t.lng),s?t.weight=r["default"].calcWeight(t,e.sortKey.code):t.weight=1e4-t.distance}),s&&r["default"].getLocation(!0)&&0==this.page&&(t.list[0].weight=9e3),this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0},function(t){this.errorMsg=t.msg,this.loadingStatus=-1}))},fetchByDistance:function(){var t=this;if(this.offset>this.currLimit)return this.page++,!1;if(2==this.loadingStatus)return!1;this.loadingStatus=1;var e=this.coords;this.eventKey&&(e=e.filter(function(t){return t.sjq})),this.filterKey.distance&&!function(){var s=t.filterKey.distance/1e3;e=e.filter(function(t){return t.distance<s})}(),e=e.slice(this.offset,this.offset+this.limit),this.$api.post("booking/xktvlist",this.buildQuery({list:e.map(function(t){return t.xktvid})})).then(function(t){if(0==t.total)return this.loadingStatus=2,!1;var e="smart"==this.sortKey.code;t.list.forEach(function(t){t.distance=r["default"].getDistance(t.lat,t.lng),e?t.weight=r["default"].calcWeight(t):t.weight=1e4-t.distance}),e&&r["default"].getLocation(!0)&&0==this.page&&(t.list[0].weight=9e3),this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0},function(t){this.errorMsg=t.msg,this.loadingStatus=-1})},fetchCoords:function(t){this.loadingStatus=1,this.$api.get("booking/xktvcoords").then(function(t){t.list.forEach(function(t){t.distance=r["default"].getDistance(t.lat,t.lng)}),t.list.sort(function(t,e){return t.distance-e.distance}),this.coords=t.list},function(t){throw new Error(t.msg)}).then(t,function(t){this.errorMsg=t.message,this.loadingStatus=-1})},getDistrictList:function(t){this.$api.get("booking/Xktvdistrict",{parent:440100}).then(function(e){if(this.areaList=this.areaList.concat(e.list),t)for(var s=1,i=this.areaList.length;i>s;s++){var n=this.areaList[s];if(n.code==t){this.filterKey=n;break}}},function(t){this.errorMsg=t.msg})},updateList:function(){this.activeLayer=!1,this.loadingStatus=0,this.list=[],this.page=this.offset=0,this.fetch()},showSearchform:function(){this.activeLayer="search",this.$nextTick(function(){this.$els.searchInput.focus()})},doSearch:function(){document.body.classList.remove("no-scroll"),this.$router.go({name:"search",params:{keyword:this.keyword}})},handleBanner:function(){this.$trackEvent("banner","click"),setTimeout(function(){location.href="http://letsktv.chinacloudapp.cn/wechat_ktv/home/event/enter"},500)}},computed:{currLimit:function(){return this.page*this.perPage},orderKey:function(){return"distance"==this.sortKey.code||"smart"==this.sortKey.code?"weight":null}},watch:{filterKey:function(t){t.code&&"distance"==this.sortKey.code&&(this.sortKey=this.sortTypes[0]),this.updateList()},sortKey:"updateList",activeLayer:function(t){document.body.classList.toggle("no-scroll",t)}}}}).call(e,s(1))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={ready:function(){"BMap"in window?this.initBMap():this.loadBMap()},methods:{loadStyle:function(t){var e=document.createElement("link");e.rel="stylesheet",e.href=t,document.head.appendChild(e)},loadScript:function(t,e){var s=document.createElement("script");s.src=t,e&&(s.onload=e),document.body.appendChild(s)},loadBMap:function(){var t=this;window.initializeBMap=function(){delete window.initializeBMap,t.loadStyle("http://api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.css"),t.loadScript("http://api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.js",t.initBMap)},this.loadScript("http://api.map.baidu.com/api?v=2.0&ak=0f2LhYmwstCU8q1lk9IOBctx&callback=initializeBMap")},initBMap:function(){var t=document.querySelector(".map-container");t.style.height=window.innerHeight+"px";var e=new BMap.Map(t),s=new BMap.Point(this.$route.query.lng,this.$route.query.lat),i=new BMapLib.SearchInfoWindow(e,this.$route.query.address,{title:this.$route.query.name,width:280,height:50,panel:"panel",enableAutoPan:!0,searchTypes:[BMAPLIB_TAB_TO_HERE]});e.addControl(new BMap.NavigationControl),e.addControl(new BMap.GeolocationControl),e.addControl(new BMap.ScaleControl),e.centerAndZoom(s,15);var n=new BMap.Convertor;n.translate([s],3,5,function(t){0==t.status&&!function(){var s=new BMap.Marker(t.points[0]);s.addEventListener("click",function(){i.open(s)}),e.addOverlay(s),e.setCenter(t.points[0])}()})}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(3);i(n);e["default"]={data:function(){return{order:{},userPoints:0,loadingStatus:1,errorMsg:""}},route:{data:function(){this.$api.getUserInfo(!0).then(function(t){this.userPoints=t.points,this.fetch()})}},ready:function(){window.scrollTo(0,0)},methods:{fetch:function(){this.loadingStatus=1,this.$api.get("gift/orderdetail",{orderid:this.$route.params.id}).then(function(t){t.data.real=""!=t.data.sellorder_receiver,this.order=t.data,this.loadingStatus=2},function(t){this.errorMsg=t.msg,this.loadingStatus=-1})},goBack:function(){window.history.back()}}}},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(3),o=i(n);e["default"]={data:function(){return{list:[],offset:0,limit:27,page:0,perPage:9,loadingStatus:1,errorMsg:""}},route:{data:function(){this.fetch()}},ready:function(){var e=this,s=t(window),i=t(document),n=s.height();s.on("scroll",o["default"].throttle(function(){return 1==e.loadingStatus?!1:void(i.height()-n-s.scrollTop()<400&&e.fetch())},100))},beforeDestroy:function(){t(window).off("scroll")},methods:{fetch:function(){return this.offset>this.currLimit?(this.page++,!1):2==this.loadingStatus?!1:(this.loadingStatus=1,void this.$api.get("gift/giftorderlistnew",{type:1,offset:this.offset,limit:this.limit}).then(function(t){return 0==t.total?(this.loadingStatus=2,!1):(this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,void(t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0))},function(t){this.errorMsg=t.msg,this.loadingStatus=-1}))}},computed:{currLimit:function(){return this.page*this.perPage}}}}).call(e,s(1))},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(3),o=i(n);e["default"]={data:function(){return{ORDER_STATUS:{1:"预约中…",14:"已过期",17:"等待支付",18:"已支付",19:"已支付",20:"已支付",3:"已确认",7:"已取消",5:"已完成",4:"已满房",8:"已删除"},order:{},loadingStatus:1,errorMsg:""}},route:{data:function(){this.fetch()}},ready:function(){window.scrollTo(0,0)},beforeDestroy:function(){clearInterval(this.timer)},methods:{fetch:function(){this.loadingStatus=1,this.$api.get("booking/Orderdetail",{ordercode:this.$route.params.id}).then(function(t){this.order=t,this.loadingStatus=2,3==t.order_status&&(this.timer=setInterval(this.checkStatus.bind(this),5e3))},function(t){this.errorMsg=t.msg,this.loadingStatus=-1})},isCancelable:function(t){return 1===t||3===t},cancelOrder:function(t,e){if(!confirm("确定要取消"+t.ktvinfo.xktvname+" "+o["default"].parseDate("yyyy年MM月dd日 hh:mm",new Date(1e3*t.starttime))+" "+t.members+"人"+t.room_name+"的订单吗？"))return!1;var s=e.target;"BUTTON"!=s.tagName&&(s=s.parentNode),s.classList.add("loading"),this.$api.post("booking/cancelorder",{ordercode:t.order_code,ktvid:t.ktvinfo.xktvid}).then(function(e){t.order_status=7,s.classList.remove("loading")},function(t){alert(t.msg||"取消订单失败")})},openMap:function(){window.wxIsReady?wx.openLocation({latitude:this.order.ktvinfo.lat,longitude:this.order.ktvinfo.lng,name:this.order.ktvinfo.xktvname,address:this.order.ktvinfo.address,scale:14}):this.$router.go({name:"map",query:{lat:this.order.ktvinfo.lat,lng:this.order.ktvinfo.lng,name:this.order.ktvinfo.xktvname,address:this.order.ktvinfo.address}})},checkStatus:function(){this.$api.get("booking/checkstatus",{order_code:this.$route.params.id}).then(function(t){5==t.status&&(this.order.order_status=t.status,clearInterval(this.timer),this.$refs.flashMessage.show("smile","<p>您预订的KTV已经兑换成功，感谢您对夜点的支持，夜点赠送您一张新的兑酒券，将于5分钟之内发放到您的账户，次日可用。<br />祝您欢唱愉快！</p>"))})}},filters:{statusName:function(t){return this.ORDER_STATUS[t]},backgroundImage:function(t){return t?{backgroundImage:"url("+o["default"].encodeBackgroundImageUrl(t.piclist[0].bigpicurl)+")"}:null},mobileFormat:function(t){return t&&t.replace(/(\d{3})(\d{4})(\d{4})/,"$1 $2 $3")}},computed:{humanDate:function(){if(this.order.starttime&&this.order.endtime){var t=new Date(1e3*this.order.starttime),e=t.getHours();return"周"+"日一二三四五六".split("")[t.getDay()]+o["default"].parseDate("（M月d日）",t)+(5>e?"凌晨":12>e?"上午":14>e?"中午":18>e?"下午":"晚上")+o["default"].parseDate("hh:mm",t)+"-"+o["default"].parseDate("hh:mm",new Date(1e3*this.order.endtime))}return""}}}},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(3),o=i(n);e["default"]={data:function(){return{ORDER_STATUS:{1:"预约中…",14:"已过期",17:"等待支付",18:"已支付",19:"已支付",20:"已支付",3:"已确认",7:"已取消",5:"已完成",4:"已满房",8:"已删除"},status:0,list:[],offset:0,limit:27,page:0,perPage:9,loadingStatus:1,errorMsg:""}},route:{data:function(){this.fetch()}},ready:function(){var e=this,s=t(window),i=t(document),n=s.height();s.on("scroll",o["default"].throttle(function(){return 1==e.loadingStatus?!1:void(i.height()-n-s.scrollTop()<400&&e.fetch())},100))},beforeDestroy:function(){t(window).off("scroll")},methods:{fetch:function(){return this.offset>this.currLimit?(this.page++,!1):2==this.loadingStatus?!1:(this.loadingStatus=1,void this.$api.get("booking/orderlist",{offset:this.offset,limit:this.limit,status:this.status}).then(function(t){return 0==t.total?(this.loadingStatus=2,!1):(this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,void(t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0))},function(t){this.errorMsg=t.msg,this.loadingStatus=-1}))},deleteOrder:function(t,e){this.$api.post("booking/deleteorder",{ordercode:t.order_code,ktvid:t.ktvinfo.xktvid}).then(function(s){var i=this;e.one("transitionend",function(){i.list.$remove(t)}).css("height",e.height()),setTimeout(function(){e.addClass("deleted")},10)},function(t){alert(t.msg||"删除订单失败")})}},computed:{currLimit:function(){return this.page*this.perPage}},watch:{"$parent.status":function(t){this.status=t,this.loadingStatus=0,this.page=this.offset=0,this.list=[],this.fetch()}},directives:{swipeToDelete:{bind:function(){function e(t){var e=t.originalEvent.changedTouches[0];l=a-e.pageX}function s(t){var e=i.order;l/n.width()>.3&&7==e.order_status&&confirm("确定要删除"+e.ktvinfo.xktvname+" "+o["default"].parseDate("yyyy年MM月dd日 hh:mm",new Date(1e3*e.starttime))+" "+e.members+"人"+e.room_name+"的订单吗？")&&i.vm.deleteOrder(e,n),n.off(".temp")}var i=this,n=t(this.el),a=0,r=0,l=0;n.on("touchstart.s2d",function(t){var i=t.originalEvent.touches[0];a=i.pageX,r=i.pageY,n.off(".temp").one("touchmove.s2d.temp",function(t){var i=t.originalEvent.changedTouches[0];a-i.pageX>Math.abs(r-i.pageY)&&(t.preventDefault(),n.on("touchmove.s2d.temp",e).one("touchend.s2d.temp touchcancel.s2d.temp",s))})})},update:function(t){this.order=t},unbind:function(){t(this.el).off(".s2d")}}},filters:{duration:function(t){return(t.endtime-t.starttime)/60/60},statusName:function(t){return this.ORDER_STATUS[t]},backgroundImage:function(t){return{backgroundImage:"url("+o["default"].encodeBackgroundImageUrl(t)+")"}}}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={data:function(t){return{activeView:-1==this.$route.path.indexOf("gift")?"ktv":"gift",status:0,showStatusFilter:!1}},ready:function(){this.$route.query.fromTabBar&&window.scrollTo(0,0)},watch:{showStatusFilter:function(e){var s=this;e&&setTimeout(function(){t(document).one("click",function(){s.showStatusFilter=!1})},10)}}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(3),o=i(n);e["default"]={data:function(){return{keyword:this.$route.params.keyword,list:[],offset:0,limit:27,page:0,perPage:9,loadingStatus:1,errorMsg:""}},route:{data:function(){o["default"].getLocation(null,null,this.fetch)}},ready:function(){var e=this,s=this.$els.masthead,i=t(window),n=t(document),a=i.height();n.on("touchstart.page",function(t){var e=i.scrollTop();i.one("scroll",function(t){var n=i.scrollTop(),o=n-e;n>44&&o>0?s.classList.add("hide"):s.classList.remove("hide")})}),i.on("scroll",o["default"].throttle(function(){var t=i.scrollTop();return 1==e.loadingStatus?!1:(n.height()-a-t<400&&e.fetch(),void(44>t&&s.classList.remove("hide")))},100))},beforeDestroy:function(){t(document).off(".page"),t(window).off("scroll")},methods:{fetch:function(){return this.offset>this.currLimit?(this.page++,!1):2==this.loadingStatus?!1:(this.loadingStatus=1,void this.$api.get("booking/xktvsearchlist",{offset:this.offset,limit:this.limit,name:this.keyword}).then(function(t){return 0==t.total?(this.loadingStatus=2,!1):(this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,void(t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0))},function(t){this.errorMsg=t.msg,this.loadingStatus=-1}))},search:function(){this.loadingStatus=0,this.list=[],this.page=this.offset=0,this.fetch()}},computed:{currLimit:function(){return this.page*this.perPage}}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(3),o=i(n);e["default"]={data:function(){return{list:[],userPoints:0,offset:0,limit:27,page:0,perPage:9,loadingStatus:1,errorMsg:""}},route:{data:function(){this.$api.getUserInfo(!0).then(function(t){this.userPoints=t.points,this.fetch()})}},ready:function(){var e=this;this.$route.query.fromTabBar&&window.scrollTo(0,0);var s=t(window),i=t(document),n=s.height();s.on("scroll",o["default"].throttle(function(){return 1==e.loadingStatus?!1:void(i.height()-n-s.scrollTop()<400&&e.fetch())},100)),this.$wxShare({title:"预定KTV欢唱，还可兑换各种好礼，别说我没告诉你哦！",desc:"想要唱歌不排队还能免费兑换惊喜好礼？来夜点一键预订KTV吧！",titleTL:"用夜点预定KTV欢唱，还可兑换各种好礼，别说我没告诉你哦！"})},beforeDestroy:function(){t(window).off("scroll")},methods:{fetch:function(){return this.offset>this.currLimit?(this.page++,!1):2==this.loadingStatus?!1:(this.loadingStatus=1,void this.$api.get("gift/Giftlist",{type:1,offset:this.offset,limit:this.limit}).then(function(t){return 0==t.total?(this.loadingStatus=2,!1):(this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,void(t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0))},function(t){this.errorMsg=t.msg,this.loadingStatus=-1}))}},computed:{currLimit:function(){return this.page*this.perPage}}}}).call(e,s(1))},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(3),o=i(n);e["default"]={data:function(){return{showInvitePoster:!1,user:{},hotline:"4006507351",editBaseInfo:{name:"",gender:0},editMobile:{mobile:"",captcha:""},editAddress:{name:"",prov:"",city:"",county:"",address:""},loadingStatus:1,errorMsg:""}},route:{data:function(){this.fetch()}},ready:function(){this.$route.query.fromTabBar&&window.scrollTo(0,0)},methods:{fetch:function(){this.loadingStatus=1,this.$api.getUserInfo().then(function(t){this.user=t,this.editBaseInfo={name:t.real_name,gender:t.gender},this.editAddress={name:t.sname,tel:t.stel,prov:t.prov,city:t.city,county:t.county,address:t.address},this.loadingStatus=2,this.$wxShare({title:"用夜点，要派对，不排队！想嗨就嗨，无需等待！",desc:"无需下载APP，关注微信公众账号，即可HIGH遍广州KTV！(北京、上海陆续开放中…)",titleTL:"用夜点一键预定KTV！想嗨就嗨，无需等待！",link:location.origin+location.pathname+"/share.html?openid="+t.openid})},function(t){this.errorMsg=t.msg||"加载失败",this.loadingStatus=-1})},updateBaseInfo:function(){this.$api.updateUserInfo({real_name:this.editBaseInfo.name,gender:this.editBaseInfo.gender}).then(function(t){alert("用户信息更新成功！"),this.user=t,this.$refs.editBaseinfoModal.close()},function(t){alert(t.msg||"更新失败")})},updateMobile:function(){this.$api.verifyCode(this.editMobile.mobile,this.editMobile.captcha).then(function(){return this.$api.updateUserInfo({mobile:this.editMobile.mobile})}).then(function(t){alert("手机号更新成功！"),this.mobile=t.mobile,this.$refs.editMobileModal.close()})["catch"](function(t){alert(t.msg||"更新失败")})},updateAddress:function(){this.$api.updateUserInfo({sname:this.editAddress.name,stel:this.editAddress.tel,prov:this.editAddress.prov,city:this.editAddress.city,county:this.editAddress.county,address:this.editAddress.address}).then(function(t){alert("收件地址更新成功！"),this.user=t,this.$refs.editAddressModal.close()},function(t){alert(t.msg||"更新失败")})},scanQRCode:function(){wx.scanQRCode({needResult:0,scanType:["qrCode","barCode"],success:function(t){t.resultStr},fail:function(t){alert(t.errMsg)}})}},computed:{fullAddress:function(){return this.user.prov?this.user.prov+" "+this.user.city+" "+this.user.county+" "+this.user.address:""},isInvalidBaseInfoForm:function(){return!(this.editBaseInfo.name.length>0&&0!=this.editBaseInfo.gender)},isInvalidMobileForm:function(){return!(o["default"].isMobile(this.editMobile.mobile)&&o["default"].isCaptcha(this.editMobile.captcha))},isInvalidAddressForm:function(){return!(""!=this.editAddress.name&&o["default"].isMobile(this.editAddress.tel)&&""!=this.editAddress.prov&&""!=this.editAddress.city&&""!=this.editAddress.county&&""!=this.editAddress.address)}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var n=s(3),o=i(n);e["adaptive-background"]={update:function(t){if(!t)return!1;var e=this.el.style;o["default"].getImageColor(t,function(s){s&&(e.backgroundColor="rgb("+s[0]+","+s[1]+","+s[2]+")"),e.backgroundImage="url("+t+")"})}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var n=s(3),o=i(n);e.date=function(t,e){return t?o["default"].parseDate(e,new Date(1e3*t)):""},e.distance=function(t){return t.distance||(t.lat?o["default"].getDistance(t.lat,t.lng):"")},e.backgroundImage=function(t){return t?{backgroundImage:"url("+o["default"].encodeBackgroundImageUrl(t)+")"}:null}},function(t,e,s){(function(e){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){var s=sessionStorage.getItem("wx_code");s?a(s,t,e):o()}function o(){location.replace("./oauth.html?target_url="+location.hash)}function a(t,s,i){e.getJSON(c+"wechat_ktv/Home/WeChat/getopenid?code="+t,function(t){0==t.result?(s(t),r()):(sessionStorage.removeItem("wx_code"),o())})}function r(){e.getJSON(c+"wechat_ktv/Home/WeChat/getsign?url="+encodeURIComponent(location.href.split("#")[0]),function(t){1==t.status?(wx.config({debug:!1,appId:t.sign.appId,timestamp:t.sign.timestamp,nonceStr:t.sign.nonceStr,signature:t.sign.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","getLocation","openLocation","scanQRCode","closeWindow"]}),wx.ready(function(){window.wxIsReady=!0,wx.onMenuShareTimeline(shareDataTL),wx.onMenuShareAppMessage(shareData),wx.onMenuShareQQ(shareData),wx.onMenuShareQZone(shareData)})):alert(t.msg)})}var l=s(3),c=(i(l),"http://letsktv.chinacloudapp.cn/"),d=document.createElement("a");d.href="./assets/img/logo.png",window.defaultShareData={title:"用夜点一键预定KTV！要派对，不排队！",desc:"广州百家KTV一键预订，想嗨就嗨，无需等待！",titleTL:"用夜点一键预定KTV！想嗨就嗨，无需等待！",link:location.href.replace(location.search,"").replace("?fromTabBar=1",""),imgUrl:d.href},window.shareData={title:defaultShareData.title,desc:defaultShareData.desc,link:defaultShareData.link,imgUrl:defaultShareData.imgUrl},window.shareDataTL={title:defaultShareData.titleTL,link:defaultShareData.link,imgUrl:defaultShareData.imgUrl},t.exports={init:n}}).call(e,s(1))},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function n(t){function e(e,i,n){return new t.Promise(function(s,o){t.http[e](i,n).then(function(t){var e=t.data;0===e.result?s(e):450===e.result?(e.list=[],e.total=0,s(e)):o(e)},function(t){o(t)})},s)}var s,i={get:function(t,s){return e("get",t,s)},post:function(t,s){return e("post",t,s)},login:function(s){return e("post","user/oauthlogin",s).then(function(e){return t.http.headers.common["X-KTV-User-Token"]=e.token,e},function(t){throw new Error(t.msg||"用户登录失败")})},getUserInfo:function(i){return i&&(0,d["default"])(t.prototype.$userdata).length>0?new t.Promise.resolve(t.prototype.$userdata,s):e("get","user/info").then(function(e){return t.prototype.$userdata=e,-1!=e.lat&&-1!=e.lng&&sessionStorage.setItem("location",(0,l["default"])({lat:e.lat,lng:e.lng})),e},function(t){return t})},updateUserInfo:function(t){return e("post","user/info",t)},sendCode:function(i){return p["default"].isMobile(i)?e("post","user/sendcode",{mobile:i}).then(function(t){alert(t.msg)},function(t){alert(t.msg||"发送失败")}):(alert("请输入手机号"),new t.Promise.reject("请输入手机号",s))},verifyCode:function(t,s){return e("post","user/phoneverify",{mobile:t,verifycode:s})}};(0,a["default"])(t,{api:{get:function(){return s=this,i}}}),(0,a["default"])(t.prototype,{$api:{get:function(){return s=this,i}}})}var o=s(63),a=i(o),r=s(10),l=i(r),c=s(8),d=i(c),u=s(3),p=i(u);t.exports=n},function(t,e,s){"use strict";function i(t,e){function s(){var e=n.splice(0,n.length);e.length>0&&t.api.post("tongji/click",{click:e}),setTimeout(s,1e4)}function i(t){var e=location.hash.substring(2).split("?")[0],s=t.pageY;o&&o.contains(t.target)&&(s=-(window.innerHeight-(t.pageY-document.body.scrollTop))),a&&a.contains(t.target)&&(s=t.pageY-document.body.scrollTop),n.push({url:e,x:t.pageX,y:s})}var n=[],o=void 0,a=void 0;t.prototype.$trackPageview=function(e){t.api.post("tongji/browse",{browse:{url:e.replace("?fromTabBar=1","")}}),"undefined"!=typeof _hmt&&_hmt.push(["_trackPageview",e])},t.prototype.$trackEvent=function(t,e,s,i){"undefined"!=typeof _hmt&&_hmt.push(["_trackEvent",t,e,s,i])},e.afterEach(function(e){t.prototype.$trackPageview(e.to.path),setTimeout(function(){o=document.getElementById("tab-bar"),a=document.querySelector(".masthead")},1e3)}),window.addEventListener("unload",s,!1),document.addEventListener("click",i,!1),setTimeout(s,1e4)}t.exports=i},function(t,e){"use strict";function s(t){t.prototype.$userdata={}}t.exports=s},function(t,e){"use strict";function s(t,e){t.prototype.$wxShare=function(t){window.shareData.title=t.title,window.shareData.desc=t.desc,window.shareDataTL.title=t.titleTL,t.imgUrl&&(window.shareData.imgUrl=window.shareDataTL.imgUrl=t.imgUrl),t.link&&(window.shareData.link=window.shareDataTL.link=t.link)},e.afterEach(function(){window.shareData.title=window.defaultShareData.title,window.shareData.desc=window.defaultShareData.desc,window.shareDataTL.title=window.defaultShareData.titleTL,window.shareData.imgUrl=window.shareDataTL.imgUrl=window.defaultShareData.imgUrl,window.shareData.link=window.shareDataTL.link=location.href.replace(location.search,"").replace("?fromTabBar=1","")})}t.exports=s},function(t,e,s){t.exports={"default":s(67),__esModule:!0}},function(t,e,s){t.exports={"default":s(68),__esModule:!0}},function(t,e,s){t.exports={"default":s(70),__esModule:!0}},,,function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var n=s(62),o=i(n),a=s(61),r=i(a);e["default"]=function(){function t(t,e){var s=[],i=!0,n=!1,o=void 0;try{for(var a,l=(0,r["default"])(t);!(i=(a=l.next()).done)&&(s.push(a.value),!e||s.length!==e);i=!0);}catch(c){n=!0,o=c}finally{try{!i&&l["return"]&&l["return"]()}finally{if(n)throw o}}return s}return function(e,s){if(Array.isArray(e))return e;if((0,o["default"])(Object(e)))return t(e,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,s){s(25),s(24),t.exports=s(92)},function(t,e,s){s(25),s(24),t.exports=s(93)},function(t,e,s){var i=s(4);t.exports=function(t){return(i.JSON&&i.JSON.stringify||JSON.stringify).apply(JSON,arguments)}},function(t,e,s){var i=s(6);t.exports=function(t,e){return i.setDescs(t,e)}},,,,function(t,e){t.exports=function(){}},function(t,e,s){var i=s(79);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},,function(t,e,s){t.exports=!s(19)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,s){var i=s(17);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,s){"use strict";var i=s(6),n=s(22),o=s(23),a={};s(13)(a,s(7)("iterator"),function(){return this}),t.exports=function(t,e,s){t.prototype=i.create(a,{next:n(1,s)}),o(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=!0},,function(t,e,s){t.exports=s(13)},function(t,e,s){var i=s(12),n="__core-js_shared__",o=i[n]||(i[n]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,s){var i=s(87),n=s(11);t.exports=function(t){return function(e,s){var o,a,r=String(n(e)),l=i(s),c=r.length;return 0>l||l>=c?t?"":void 0:(o=r.charCodeAt(l),55296>o||o>56319||l+1===c||(a=r.charCodeAt(l+1))<56320||a>57343?t?r.charAt(l):o:t?r.slice(l,l+2):(o-55296<<10)+(a-56320)+65536)}}},function(t,e){var s=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:s)(t)}},function(t,e,s){var i=s(78),n=s(11);t.exports=function(t){return i(n(t))}},,function(t,e){var s=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++s+i).toString(36))}},function(t,e,s){var i=s(16),n=s(7)("iterator"),o=s(9);t.exports=s(4).getIteratorMethod=function(t){return void 0!=t?t[n]||t["@@iterator"]||o[i(t)]:void 0}},function(t,e,s){var i=s(75),n=s(91);t.exports=s(4).getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},function(t,e,s){var i=s(16),n=s(7)("iterator"),o=s(9);t.exports=s(4).isIterable=function(t){var e=Object(t);return void 0!==e[n]||"@@iterator"in e||o.hasOwnProperty(i(e))}},function(t,e,s){"use strict";var i=s(74),n=s(81),o=s(9),a=s(88);t.exports=s(21)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,s=this._i++;return!t||s>=t.length?(this._t=void 0,n(1)):"keys"==e?n(0,s):"values"==e?n(0,t[s]):n(0,[s,t[s]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports='<div class=city-selector> <input type=text :value=province v-el:province> <input type=text placeholder=省 @click=provinceScroller.show() v-model=province onmousedown="return false" readonly=readonly> <input type=text :value=city v-el:city> <input type=text placeholder=市 @click=cityScroller.show() v-model=city onmousedown="return false" readonly=readonly> <input type=text :value=district v-el:district> <input type=text placeholder=区 @click=districtScroller.show() v-model=district onmousedown="return false" readonly=readonly> </div>'},function(t,e){t.exports="<div class=flash-message v-show=!hidden transition=fade> <div class=flash-message-dialog> <div class=icon :class=\"'icon-'+icon\"></div> <div class=content>{{{message}}}</div> <button type=button class=btn @click=hide>确定</button> </div> </div>"},function(t,e){t.exports="<ul class=list-view> <slot></slot> </ul>"},function(t,e){t.exports='<div class=loading-layer :class="{\'inline-mode\':inlineMode}"> <div class=loading-layer-content> <span class="icon icon-spinner"></span> <p class=text>正在加载…</p> </div> </div>'},function(t,e){t.exports='<div class=modal v-show=show transition=modal> <div class=modal-dialog> <span class=close @click=close><span class="icon icon-close"></span></span> <div class=modal-body> <slot></slot> </div> <div class=modal-footer v-if=showBtn> <button type=button class=btn @click="submitHandler | debounce 300" :disabled=btnDisabled>{{btnText}}</button> </div> </div> </div>'},function(t,e){t.exports="<div class=screen-message :class=\"{'inline-mode':inlineMode}\"> <div class=screen-message-dialog> <span class=icon></span> <p class=content>{{message}}</p> <small class=info v-if=info>{{info}}</small> </div> </div>"},function(t,e){t.exports='<div class=simple-slider> <figure class=slide v-if="slides.length==1" :style="slides[0].bigpicurl | backgroundImage"></figure> <ul class=slider-carousel v-if="slides.length>1" v-el:carousel> <li class=slide :style="slides[slides.length-1].bigpicurl | backgroundImage"></li> <li class=slide v-for="slide in slides" :style="slide.bigpicurl | backgroundImage"></li> <li class=slide :style="slides[0].bigpicurl | backgroundImage"></li> </ul> <nav class=slider-indicators v-if="slides.length>1"><span v-for="slide in slides" :class="{active:$index==current}" :title=$index+1></span></nav> </div>'},function(t,e){t.exports='<div class=spinbox> <div class=btn @click=adjust(-this.step)><span class="icon icon-minus"></span></div> <div><input type=number :min=min :max=max :step=step :value=value v-el:input></div> <div class=btn @click=adjust(this.step)><span class="icon icon-plus"></span></div> </div>'},function(t,e){t.exports='<nav id=tab-bar v-show=show> <a v-for="item in items" :class="\'item-\'+item.id" v-link="{path:item.link,query:{fromTabBar:1},activeClass:\'active\'}"> <span class=icon :class="\'icon-\'+item.id"></span> <span class=text>{{item.name}}</span> </a> </nav>'},function(t,e){t.exports="<router-view transition=fade transition-mode=out-in></router-view> <tab-bar></tab-bar>";
},function(t,e){t.exports='<div class=page-couponlist> <header class="masthead list-selector" v-el:masthead> <h1>我的兑酒券</h1> </header> <ul class=coupon-list> <li v-for="coupon in list" class=status-{{coupon.status}} :style="{backgroundImage:\'url(\'+(coupon.status===0?coupon.img:coupon.img_disable)+\')\'}"> <div class=content> <h3 class=name>{{coupon.name}}</h3> <p class=date>有效期<br>{{coupon.start_time | date \'yyyy/MM/dd\'}} 至 {{coupon.expire_time | date \'yyyy/MM/dd\'}}</p> <span class=status>{{COUPON_STATUS[coupon.status]}}</span> </div> </li> </ul> <loading v-show="loadingStatus==1" :inline-mode="list.length>0"></loading> <screen-message v-if="loadingStatus==-1" :inline-mode="list.length>0" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> <screen-message v-if="loadingStatus==2&&list.length==0" message=兑酒券为空></screen-message> </div>'},function(t,e){t.exports='<div class=page-events> <ul class=blurred-background> <li v-for="event in events" :class="{active:$index==current}" :style="{backgroundImage:\'url(\'+event.pic_blurred+\')\'}"></li> </ul> <div class=slider> <ul class=carousel> <li class=slide> <div class=card :style="events[events.length-1].pic | backgroundImage"></div> </li> <li class=slide v-for="event in events"> <a class=card @click=go(event.link) :style="event.pic | backgroundImage"></a> </li> <li class=slide> <div class=card :style="events[0].pic | backgroundImage"></div> </li> </ul> <nav class=pagination> <span v-for="event in events" :class="{active:$index==current}" :title=$index+1></span> </nav> </div> </div>'},function(t,e){t.exports='<div class=page-favorite> <ul class=ktv-list> <li v-for="ktv in list" :style="ktv.piclist[0].bigpicurl | backgroundImage"> <a v-link="{ name: \'detail\', params: { id: ktv.xktvid }}"> <div class=content> <h3 class=title>{{ktv.xktvname}}</h3> <span class=rating><span class=full></span><span class=stars :style="{width:ktv.rate*20+\'%\'}"></span></span> <p class=address>{{ktv.address}}</p> <span class=distance v-if="ktv | distance">{{ktv | distance}}KM</span> </div> </a> </li> </ul> <loading v-show="loadingStatus==1" :inline-mode="list.length>0"></loading> <screen-message v-if="loadingStatus==-1" :inline-mode="list.length>0" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> <screen-message v-if="loadingStatus==2&&list.length==0" message=收藏为空></screen-message> </div>'},function(t,e){t.exports='<div class=page-gift> <figure class=gift-pic v-adaptive-background=gift.product_mainpic></figure> <div class=gift-content v-if=gift.product_id> <section class=gift-info> <span class=points>{{gift.productsale_points}} 积分</span> <h2 class=name>{{gift.productsale_name}}</h2> <div class=desc>{{{gift.productsale_cont1}}}</div> </section> <section class="gift-exchange clearfix"> <span class=points>需要积分 {{gift.productsale_points}}</span> <h3 class=title>兑换数量</h3> <span class=quantity v-if=!gift.real>1</span> <spin-box v-if=gift.real :max=maxQuantity :value.sync=order.quantity></spin-box> <span class=my-points>我的当前积分 {{userPoints}}</span> </section> <button type=button class=btn-float @click=$refs.exchangeModal.open() v-if="userPoints>=gift.productsale_points">立即兑换</button> <button type=button class=btn-float disabled=disabled v-else>积分不足</button> </div> <modal id=exchange-modal class=red-placeholder :btn-disabled=isInvalidOrder :submit=submitOrder btn-text=下一步 v-ref:exchange-modal> <h4 class=gift-name>{{gift.productsale_name}}</h4> <div class=gift-quantity> <span class=points>需要积分 {{gift.productsale_points}}</span> <h3 class=title>兑换数量</h3> <spin-box v-if=gift.real :max=maxQuantity :value.sync=order.quantity></spin-box> <span class=quantity v-else>1</span> </div> <list-view class=no-arrow> <li v-if=gift.real><a @click=$els.name.focus()><span class="icon icon-user"></span><input type=text placeholder=收件人 v-model=order.name v-el:name></a></li> <li><a @click=$els.mobile.focus()><span class="icon icon-phone"></span><input type=tel placeholder=手机 v-model=order.mobile maxlength=11 v-el:mobile></a></li> <li class=item-captcha v-if=!gift.real><a><input type=number placeholder=验证码 maxlength=6 v-model=order.captcha><button type=button class="btn btn-sendcaptcha" @click=$api.sendCode(order.mobile)>发送验证码</button></a></li> <li class=item-city v-if=gift.real><a><city-selector :province.sync=order.province :city.sync=order.city :district.sync=order.district></city-selector></a></li> <li v-if=gift.real><a @click=$els.address.focus()><span class="icon icon-home"></span><input type=text placeholder=收件地址 v-model=order.address v-el:address></a></li> </list-view> </modal> <loading v-if="loadingStatus==1"></loading> <screen-message v-if="loadingStatus==-1" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> </div>'},function(t,e){t.exports='<div class=page-ktvdetail> <simple-slider class=slider :slides="ktv.piclist || []"></simple-slider> <section class=baseinfo> <span class=distance v-if="ktv | distance">{{ktv | distance}}KM</span> <h2 class=name>{{ktv.xktvname}}</h2> <span class=rating><span class=full></span><span class=stars :style="{width:ktv.rate*20+\'%\'}"></span></span> <div class=events v-if=ktv.sjq @click="showEventsLayer=true"> <table> <tbody> <tr v-if=ktv.sjq> <th><span class="stamp stamp-djq"></span></th> <td>在预定KTV的时候选择使用兑酒券，到店后，由前台收银员扫描订单中的二维码，即可确认到店并获得相应数量的啤酒。</td> </tr> </tbody> <tfoot> <tr> <td colspan=2><span class=more>更多>></span></td> </tr> </tfoot> </table> </div> <ul class=ranklist> <li><span class="icon icon-decoration"></span><span class=text>环境{{ktv.DecorationRating}}星</span></li> <li><span class="icon icon-sound"></span><span class=text>音效{{ktv.SoundRating}}星</span></li> <li><span class="icon icon-service"></span><span class=text>服务{{ktv.ServiceRating}}星</span></li> <li><span class="icon icon-food"></span><span class=text>美食{{ktv.FoodRating}}星</span></li> </ul> <p class=desc>{{ktv.description}}</p> <ul class=services v-if=ktv.devices> <li v-for="device in ktv.devices | limitBy deviceLimit"><span class=icon :class="\'icon-\'+device.toLowerCase()"></span><span class=text>{{device | deviceName}}</span></li> <li class=more v-if="ktv.devices.length>4" @click=$refs.servicesModal.open()>+{{ktv.devices.length-3}}<span class="icon icon-more"></span></li> </ul> </section> <section class=business v-if=ktv.openhours> <span class=openhours>营业时间 周一至周日 {{ktv.openhours}}</span> <span class=responsetime>平均等待时间：{{ktv.responsetime}}分钟</span> </section> <list-view class=bg v-if=ktv.xktvid> <li><a :href="\'tel:\'+ktv.telephone"><span class="icon lineicon-phone"></span>{{ktv.telephone}}</a></li> <li class=item-address><a @click=openMap><span class="icon lineicon-location"></span><span class=value>{{ktv.address}}</span></a></li> </list-view> <list-view class=bg v-if=ktv.xktvid> <li><a @click=doFavorite><span class="icon lineicon-favorite"></span>收藏</a></li> <li><a @click=$refs.feedbackModal.open()><span class="icon lineicon-feedback"></span>纠错</a></li> </list-view> <button type=button class=btn-float v-if=serviceAvailable @click=openOrderModal>立即预订</button> <a :href="\'tel:\'+ktv.telephone" class=btn-float v-else>电话预定</a> <div id=events-layer class=flash-message v-if=showEventsLayer transition=fade v-el:events-layer> <div class=flash-message-dialog> <ul> <li v-if=ktv.sjq> <h4><span class="stamp stamp-djq"></span>兑酒券使用说明</h4> <ol> <li>每次预订只能使用一张兑酒券。</li> <li>啤酒的品牌和数量以兑酒券的标识为准。</li> <li>兑酒券的使用时间以兑酒券的标识为准。</li> <li>通过完成订单所获得的兑酒券，次日可用，有效期14天。</li> <li>以任何形式取消订单，兑酒券都将会返还到用户账户，下次预订还可继续使用。</li> <li>每位用户每天可使用两张兑酒券。</li> </ol> </li> </ul> <button type=button class=btn @click="showEventsLayer=false">确定</button> </div> </div> <modal id=favorite-modal class=msg v-ref:favorite-modal> <span class="icon icon-favorite"></span> <p>{{ktv.xktvname}}</p> <p v-show=favorite>已添加至 <a>我的收藏</a></p> <p v-else>已取消收藏</p> </modal> <modal id=services-modal :show-btn=false v-if=ktv.devices v-ref:services-modal> <table> <tbody> <tr v-for="device in ktv.devices"> <td class=col-icon><span class=icon :class="\'icon-\'+device.toLowerCase()"></span></td> <td class=col-name>{{device | deviceName}}</td> </tr> </tbody> </table> </modal> <modal id=feedback-modal :btn-disabled="selectedErrors.length==0" :submit=submitFeedback btn-text=提交 v-ref:feedback-modal> <list-view> <li v-for="error in feedbackErrors"><a :class="{selected:error.selected==true}" @click="error.selected=!error.selected"><span class=icon :class="\'icon-\'+error.id"></span>{{error.msg}}</a></li> </list-view> </modal> <modal id=order-modal :btn-disabled=isInvalidOrder :submit=submitOrder v-ref:order-modal> <span class=room-total>房间总数：{{ktv.roomtotal}}</span> <div class=room-type> <span :class="{active:order.roomtype==1}" @click="order.roomtype=1">大包</span> <span :class="{active:order.roomtype==2}" @click="order.roomtype=2">中包</span> <span :class="{active:order.roomtype==3}" @click="order.roomtype=3">小包</span> </div> <list-view> <li class=item-phone><a @click=$els.phone.focus()><span class="icon icon-phone"></span>手机<input type=tel placeholder=(必填) v-model=order.phone maxlength=11 :disabled=userMobile v-el:phone></a></li> <li class=item-captcha v-if=!userMobile><a><input type=number placeholder="验证码 (必填)" maxlength=6 v-model=order.captcha><button type=button class="btn btn-sendcaptcha" @click=$api.sendCode(order.phone)>发送验证码</button></a></li> <li><a @click=this.starttimeScroller.show()><span class="icon icon-clock"></span>起始时间<input type=text placeholder=(必填) class="order-starttime penone"></a></li> <li><a @click=this.durationScroller.show()><span class="icon icon-hourglass"></span>持续时间<input type=text class=order-duration><input type=text placeholder=(必填) class=penone v-el:duration></a></li> <li><a @click=this.membersScroller.show()><span class="icon icon-people"></span>选择人数<input type=text class=order-members><input type=text placeholder=(必填) class=penone v-el:members></a></li> <li :class={penone:!couponList.length}><a @click=this.couponScroller.show()><span class="icon icon-coupon"></span>选择兑酒券<input type=text class=order-coupon><input type=text class=penone v-el:coupon></a></li> </list-view> </modal> <flash-message v-ref:flash-message></flash-message> <loading v-if="loadingStatus==1"></loading> <screen-message v-if="loadingStatus==-1" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> </div>'},function(t,e){t.exports='<div class=page-ktvlist :class="{loading:loadingStatus==1}"> <header class="masthead list-selector" v-el:masthead> <ul class=selector-triggers> <li :class="{active:activeLayer==\'area\'}" @click="activeLayer=activeLayer==\'area\'?false:\'area\'"><span class=selector-trigger><span class=text>{{filterKey.name}}</span><span class="icon icon-arrow"></span></span></li> <li :class="{active:activeLayer==\'sort\'}" @click="activeLayer=activeLayer==\'sort\'?false:\'sort\'"><span class=selector-trigger><span class=text>{{sortKey.name}}</span><span class="icon icon-arrow"></span></span></li> <li :class="{active:activeLayer==\'event\'}" @click="activeLayer=activeLayer==\'event\'?false:\'event\'"><span class=selector-trigger><span class=text>优惠筛选</span><span class="icon icon-arrow"></span></span></li> </ul> <span class=search-trigger @click=showSearchform><span class="icon icon-search"></span></span> <form class=search-form v-show="activeLayer==\'search\'" transition=searchform @submit.prevent=doSearch> <input type=search autocomplete=off placeholder=搜索… v-model=keyword v-el:search-input> <button type=submit><span class="icon icon-search"></span></button> </form> <div class="selector-droplist droplist-filter" v-show="activeLayer==\'area\'" transition=flip> <nav class=tab> <a :class="{active:filterBy==\'distance\'}" @click="filterBy=\'distance\'">附近</a> <a :class="{active:filterBy==\'area\'}" @click="filterBy=\'area\'">商区</a> </nav> <div class=filter-panels> <ul class=distance-list v-show="filterBy==\'distance\'"> <li v-for="distance in distanceList" :class="{active:filterKey==distance}" @click="filterKey=distance">{{distance.name}}</li> </ul> <ul class=area-list v-show="filterBy==\'area\'"> <li v-for="area in areaList" :class="{active:filterKey==area}" @click="filterKey=area">{{area.name}}</li> </ul> </div> </div> <div class="selector-droplist droplist-sort" v-show="activeLayer==\'sort\'" transition=flip> <ul> <li v-for="type in sortTypes" :class="{active:sortKey==type}" @click="sortKey=type">{{type.name}}</li> </ul> </div> <div class="selector-droplist droplist-event" v-show="activeLayer==\'event\'" transition=flip> <ul class=event-list> <li v-for="event in eventTypes" :class="{active:eventKey==event}" @click="eventKey=eventKey==event?null:event">{{event.name}}</li> </ul> <span class=ok @click=updateList()>确定</span> </div> </header> <a id=banner @click=handleBanner><img :src="\'./assets/img/banner.jpg\'"></a> <section class=ktv-list-container> <ul class=ktv-list> <li v-for="ktv in list | orderBy orderKey -1 | limitBy currLimit" :style="ktv.piclist[0].bigpicurl | backgroundImage" :data-weight=ktv.weight> <a v-link="{ name: \'detail\', params: { id: ktv.xktvid }}"> <span v-if=ktv.sjq class="stamp stamp-djq"></span> <div class=content> <h3 class=title>{{ktv.xktvname}}</h3> <span class=rating><span class=full></span><span class=stars :style="{width:ktv.rate*20+\'%\'}"></span></span> <p class=address>{{ktv.address}}</p> <span class=distance v-if="ktv.distance != null">{{ktv.distance}}KM</span> </div> </a> </li> </ul> <loading v-show="loadingStatus==1" :inline-mode="list.length>0"></loading> <screen-message v-if="loadingStatus==-1" :inline-mode="list.length>0" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> <screen-message v-if="loadingStatus==2&&list.length==0" message=结果为空></screen-message> </section> <div class=dimmer v-show=activeLayer @click="activeLayer=false" transition=fade></div> </div>'},function(t,e){t.exports="<div class=page-map> <header class=map-info><span class=icon></span><p class=address>{{$route.query.address}}</p></header> <div class=map-container></div> </div>"},function(t,e){t.exports='<div class=page-giftorder> <figure class=gift-pic v-adaptive-background=order.sellordergoods_mainpic></figure> <section class=giftorder-detail> <h2 class=name>{{order.sellordergoods_name}}</h2> <ul class=numbers> <li><b class=value>{{order.sellordergoods_num}}</b><small class=label>兑换数量</small></li> <li><b class=value>{{order.sellorder_pointdeduction}}</b><small class=label>消费积分</small></li> <li><b class=value>{{userPoints}}</b><small class=label>剩余积分</small></li> </ul> <list-view class=no-arrow> <li><a><span class="icon icon-clock"></span>下单时间：{{order.sellorder_datetime | date \'yyyy年MM月dd日 hh:mm\'}}</a></li> <li v-if=order.real><a><span class="icon icon-user"></span>收件人：{{order.sellorder_receiver}}</a></li> <li><a><span class="icon icon-phone"></span>手机号：{{order.sellorder_receivecell}}</a></li> <li class=item-address v-if=order.real><a><span class="icon icon-home"></span><span class=label>收件地址：</span><p>{{order.sellorder_receiveprov + order.sellorder_receivecity + order.sellorder_receivecounty + order.sellorder_receiveaddr}}</p></a></li> </list-view> <ul class=tips> <li v-if=!order.real>请注意查收夜点娱乐公众号为您发送的礼品兑换码。</li> <li>您可以在 <b>我的订单>礼品订单</b> 中查看订单最新进度。如有任何疑问，请拨打客服热线 <b>4006507351</b>。</li> </ul> </section> <button type=button class=btn-float @click=goBack>确定</button> <a class=fab v-link="{name:\'list\'}"><span>KTV预订</span></a> <loading v-if="loadingStatus==1"></loading> <screen-message v-if="loadingStatus==-1" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> </div>'},function(t,e){t.exports='<div class="order-list order-list-gift"> <ul> <li v-for="order in list | limitBy currLimit" :data-status=order.order_status v-link="{name:\'gift-order\',params:{id:order.order_no}}"> <header class=header> <span class=name>{{order.sellordergoods_name}}</span> <span class=status>{{order.order_status}}</span> </header> <div class=content> <p class="info amount">订单数量 <em>{{order.sellordergoods_num}}</em></p> <span class=info>消费积分 <em>{{order.sellorder_pointdeduction}}</em></span> <span class=ordertime>{{order.sellorder_datetime | date \'yyyy年MM月dd日 hh:mm\'}}下单</span> </div> <figure class=pic v-adaptive-background=order.sellordergoods_mainpic></figure> </li> </ul> <loading v-show="loadingStatus==1" :inline-mode="list.length>0"></loading> <screen-message v-if="loadingStatus==-1" :inline-mode="list.length>0" message="加载失败, 点击重试" @click=fetch></screen-message> <screen-message v-if="loadingStatus==2&&list.length==0" message=无订单></screen-message> </div>'},function(t,e){t.exports='<div class=page-ktvorder> <header class="masthead order-navbar"> <nav class=segmented-control> <a class=active v-link="\'/order/ktv\'">KTV订单</a> <a v-link="\'/order/gift\'">礼品订单</a> </nav> </header> <figure class=ktv-pic :style="order.ktvinfo | backgroundImage"></figure> <section class=baseinfo v-if=order.ktvinfo> <div class=action> <span class=status>{{order.order_status | statusName}}</span> <button type=button class=btn v-if=isCancelable(order.order_status) @click.stop="cancelOrder(order, $event)"><span class=text>取消订单</span><span class="icon icon-spinner"></span></button> </div> <h2 class=name>{{order.ktvinfo.xktvname}}</h2> <span class=rating><span class=full></span><span class=stars :style="{width:order.ktvinfo.rate*20+\'%\'}"></span></span> </section> <list-view class=bg v-if=order.ktvinfo> <li><a :href="\'tel:\'+order.ktvinfo.telephone"><span class="icon lineicon-phone"></span>{{order.ktvinfo.telephone}}</a></li> <li class=item-address><a @click=openMap><span class="icon lineicon-location"></span><span class=value>{{order.ktvinfo.address}}</span></a></li> </list-view> <ul class=detail> <li><span class=label>时间</span><span class=value>{{humanDate}} <span class=duration>共 <strong>{{(this.order.endtime - this.order.starttime)/60/60}}</strong> 小时</span></span></li> <li><span class=label>包房</span><span class=value>{{order.members}}人{{order.room_name}}</span></li> <li><span class=label>兑酒券</span><span class=value>{{order.coupon_info?order.coupon_info.name+((order.order_status==4||order.order_status==7||order.order_status==14)?"（已返还）":""):"无"}}</span></li> <li><span class=label>手机</span><span class=value>{{order.mobile | mobileFormat}}</span></li> </ul> <figure class=qrcode v-if="order.order_status!=1&&order.order_status!=4&&order.order_status!=7&&order.order_status!=14"> <img :src=order.qrcode /> <figcaption>请将此二维码出示给工作人员</figcaption> </figure> <flash-message v-ref:flash-message></flash-message> <loading v-if="loadingStatus==1"></loading> <screen-message v-if="loadingStatus==-1" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> </div>'},function(t,e){t.exports='<div class="order-list order-list-ktv"> <ul> <li v-for="order in list | limitBy currLimit" :data-status=order.order_status v-link="{name: \'ktv-order\', params: { id: order.order_code }}" data-v-swipe-to-delete=order> <header class=header> <span class=name>{{order.ktvinfo.xktvname}}</span> <span class=status>{{order.order_status | statusName}}</span> </header> <figure class=pic :style="order.ktvinfo.piclist[0].bigpicurl | backgroundImage"></figure> <div class=content> <time class=starttime>{{order.starttime | date \'yyyy年MM月dd日 hh:mm\'}} 开始</time> <p class=info>{{order | duration}}小时&emsp;{{order.members}}人{{order.room_name}}</p> <p class=couponinfo v-if=order.coupon_info>订单包含兑酒券一张，到店消费可免费兑换{{order.coupon_info.name}}。</p> </div> </li> </ul> <loading v-show="loadingStatus==1" :inline-mode="list.length>0"></loading> <screen-message v-if="loadingStatus==-1" :inline-mode="list.length>0" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> <screen-message v-if="loadingStatus==2&&list.length==0" message=无订单></screen-message> </div>'},function(t,e){t.exports='<div class=page-order> <header class="masthead order-navbar"> <span class=filter-trigger v-show="activeView==\'ktv\'" @click="showStatusFilter=!showStatusFilter"><span class="icon icon-setting"></span></span> <nav class=segmented-control> <a :class="{active:activeView==\'ktv\'}" v-link="\'/order/ktv\'" @click="activeView=\'ktv\'">KTV订单</a> <a :class="{active:activeView==\'gift\'}" v-link="\'/order/gift\'" @click="activeView=\'gift\'">礼品订单</a> </nav> <ul class="dropdown dropdown-ktv" transition=fade v-show="activeView==\'ktv\'&&showStatusFilter" v-el:filter-dropndown> <li @click="status=0">全部订单</li> <li @click="status=1">预约中订单</li> <li @click="status=3">已确认订单</li> <li @click="status=7">已取消订单</li> </ul> </header> <router-view></router-view> </div>'},function(t,e){t.exports='<div class=page-search> <header class=masthead v-el:masthead> <form class=search-form @submit.prevent=search> <input type=search autocomplete=off v-model=keyword> <button type=submit><span class="icon icon-search"></span></button> </form> </header> <div class=ktv-list-container> <ul class=ktv-list> <li v-for="ktv in list | limitBy currLimit" :style="ktv.piclist[0].bigpicurl | backgroundImage"> <a v-link="{ name: \'detail\', params: { id: ktv.xktvid }}"> <span v-if=ktv.sjq class="stamp stamp-djq"></span> <div class=content> <h3 class=title>{{ktv.xktvname}}</h3> <span class=rating><span class=full></span><span class=stars :style="{width:ktv.rate*20+\'%\'}"></span></span> <p class=address>{{ktv.address}}</p> <span class=distance v-if="ktv | distance">{{ktv | distance}}KM</span> </div> </a> </li> </ul> <loading v-show="loadingStatus==1" :inline-mode="list.length>0"></loading> <screen-message v-if="loadingStatus==-1" :inline-mode="list.length>0" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> <screen-message v-if="loadingStatus==2&&list.length==0" message=未找到></screen-message> </div> </div>'},function(t,e){t.exports='<div class=page-store> <header class=banner> <h1 class=title>通过积分兑换礼品</h1> <span class=points>我的积分 {{userPoints}}</span> </header> <section class=gift-list-continer> <ul class=gift-list> <li v-for="gift in list | limitBy currLimit"> <a v-link="{name:\'gift\',params:{id:gift.product_id}}"> <figure class=pic :style="{backgroundImage:\'url(\'+gift.product_mainpic+\')\'}"></figure> <div class=content> <h4 class=name>{{gift.productsale_name}}</h4> <span class=points>{{gift.productsale_points}} 积分</span> </div> </a> </li> </ul> <loading v-show="loadingStatus==1" :inline-mode="list.length>0"></loading> <screen-message v-if="loadingStatus==-1" :inline-mode="list.length>0" message="加载失败, 点击重试" @click=fetch></screen-message> <screen-message v-if="loadingStatus==2&&list.length==0" message=列表为空></screen-message> </section> </div>'},function(t,e){t.exports='<div class=page-user> <header class=user-info> <a class="btn btn-invite" @click="showInvitePoster=true">邀请好友</a> <img class=avatar :src=user.avatar_url @click=$refs.editBaseinfoModal.open()> <span class=name @click=$refs.editBaseinfoModal.open()>{{user.real_name || user.display_name}}</span> <span class=points>积分 {{user.points}}</span> </header> <list-view class=user-menu> <li><a @click=$refs.editMobileModal.open()><span class="icon icon-phone"></span>手机<span class=value>{{user.mobile}}</span></a></li> <li><a @click=$refs.editAddressModal.open()><span class="icon icon-home"></span>收件地址<span class=value>{{fullAddress}}</span></a></li> <li><a v-link="\'/order\'"><span class="icon icon-order"></span>我的订单<span class=value>KTV订单 {{user.order}}&emsp;礼品订单 {{user.giftordernum}}</span></a></li> <li><a v-link="\'/user/favorite\'"><span class="icon icon-favorite"></span>我的收藏<span class=value>{{user.collectionnum}}</span></a></li> <li><a v-link="\'/coupon\'"><span class="icon icon-coupon"></span>我的兑酒券<span class=value>未使用 {{user.couponnum}}</span></a></li> <li><a :href="\'tel:\'+hotline"><span class="icon icon-service"></span>客服热线<span class=value>{{hotline}}</span></a></li> </list-view> <modal id=edit-baseinfo-modal class=red-placeholder title=编辑用户信息 :btn-disabled=isInvalidBaseInfoForm :submit=updateBaseInfo v-ref:edit-baseinfo-modal> <list-view class=no-arrow> <li><a @click=$els.name.focus()><span class="icon icon-user"></span><input type=text placeholder=姓名 v-model=editBaseInfo.name maxlength=30 v-el:name></a></li> <li><a> <input type=radio id=male value=1 v-model=editBaseInfo.gender> <label for=male>男</label> <input type=radio id=female value=2 v-model=editBaseInfo.gender> <label for=female>女</label> </a></li> </list-view> </modal> <modal id=edit-mobile-modal class=red-placeholder title=编辑手机号 :btn-disabled=isInvalidMobileForm :submit=updateMobile v-ref:edit-mobile-modal> <list-view class=no-arrow> <li class=item-phone><a @click=$els.phone.focus()><span class="icon icon-phone"></span><input type=tel placeholder=手机 v-model=editMobile.mobile maxlength=11 v-el:phone></a></li> <li class=item-captcha><a><input type=number placeholder=验证码 maxlength=6 v-model=editMobile.captcha><button type=button class="btn btn-sendcaptcha" @click=$api.sendCode(editMobile.mobile)>发送验证码</button></a></li> </list-view> </modal> <modal id=edit-address-modal class=red-placeholder title=编辑收件地址 :btn-disabled=isInvalidAddressForm :submit=updateAddress v-ref:edit-address-modal> <list-view class=no-arrow> <li><a @click=$els.sname.focus()><span class="icon icon-user"></span><input type=text placeholder=收件人 maxlength=30 v-model=editAddress.name v-el:sname></a></li> <li class=item-phone><a @click=$els.stel.focus()><span class="icon icon-phone"></span><input type=tel placeholder=手机 v-model=editAddress.tel maxlength=11 v-el:stel></a></li> <li class=item-city><a><city-selector :province.sync=editAddress.prov :city.sync=editAddress.city :district.sync=editAddress.county></city-selector></a></li> <li><a @click=$els.saddress.focus()><span class="icon icon-home"></span><input type=text placeholder=收件地址 v-model=editAddress.address v-el:saddress></a></li> </list-view> </modal> <div class=invite-poster v-show=showInvitePoster transition=fade @click="showInvitePoster=false"></div> <loading v-if="loadingStatus==1"></loading> <screen-message v-if="loadingStatus==-1" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> </div>'},function(t,e,s){var i,n;s(96),i=s(30),n=s(121),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(97),i=s(31),n=s(122),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(98),n=s(123),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(99),i=s(32),n=s(124),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(100),i=s(33),n=s(125),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(101),i=s(34),n=s(126),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(102),i=s(35),n=s(127),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(103),i=s(36),n=s(128),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(104),i=s(37),n=s(129),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(105),i=s(38),n=s(130),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(106),i=s(39),n=s(131),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(107),i=s(40),n=s(132),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(108),i=s(41),n=s(133),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(109),i=s(42),n=s(134),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(110),i=s(43),n=s(135),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(111),i=s(44),n=s(136),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(112),i=s(45),n=s(137),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(113),i=s(46),n=s(138),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(114),i=s(47),n=s(139),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(115),i=s(48),n=s(140),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(116),i=s(49),n=s(141),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(117),i=s(50),n=s(142),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(118),i=s(51),n=s(143),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(119),i=s(52),n=s(144),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},function(t,e,s){var i,n;s(120),i=s(53),n=s(145),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},,,,,,,,,,,,,,,,,,,,,,function(t,e,s){function i(t){return s(n(t))}function n(t){return o[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var o={"./city-selector.vue":146,"./flash-message.vue":147,"./list-view.vue":148,"./loading.vue":149,"./modal.vue":150,"./screen-message.vue":151,"./simple-slider.vue":152,"./spin-box.vue":153,"./tab-bar.vue":154};i.keys=function(){return Object.keys(o)},i.resolve=n,t.exports=i,i.id=192}]);