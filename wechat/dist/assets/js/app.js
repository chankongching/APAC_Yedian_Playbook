webpackJsonp([1],[function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function a(t){d["default"].api.oAuthLogin({type:"wechat",openid:t.openid,display_name:t.display_name,avatar_url:t.avatar_url}).then(function(){return d["default"].Promise.all([d["default"].api.get("app/baseinfo").then(function(t){return C["default"].baseinfo=t.baseinfo}),d["default"].api.getUserInfo()])}).then(function(){var t=location.hash;/micromessenger/i.test(navigator.userAgent)&&(history.replaceState(null,null,"#!/wechat"),history.pushState(null,null,t)),t&&"#!/ktv"!=t&&t.indexOf("#!/ktv?")==-1&&(history.replaceState(null,null,"#!/ktv"),history.pushState(null,null,t)),O.start(B,"app")})["catch"](function(t){return alert(t.msg||t.message||"加载失败")})}var n=s(6),o=i(n),r=s(4),l=i(r),c=s(23),d=i(c),u=s(41),p=i(u),f=s(40),h=i(f),v=s(73),m=i(v),g=s(76),y=i(g),k=s(75),b=i(k),x=s(77),w=i(x),_=s(74),M=i(_),S=s(70),T=i(S),L=s(69),$=i(L),D=s(72),P=i(D),I=s(9),C=i(I);d["default"].use(p["default"]),d["default"].use(h["default"]),d["default"].use(m["default"]),d["default"].use(y["default"]),d["default"].use(M["default"]),d["default"].http.options.root="http://wechat.fusionmaster.net",d["default"].http.headers.common["X-KTV-Application-Name"]="eec607d1f47c18c9160634fd0954da1a",d["default"].http.headers.common["X-KTV-Vendor-Name"]="1d55af1659424cf94d869e2580a11bf8",d["default"].http.headers.common["X-KTV-Application-Platform"]="1";var B=d["default"].extend(s(179)),K=s(196);K.keys().forEach(function(t){d["default"].component(t.match(/\.\/(.*?)\.vue/)[1],d["default"].extend(K(t)))}),(0,l["default"])(T["default"]).forEach(function(t){d["default"].filter(t,T["default"][t])}),(0,l["default"])($["default"]).forEach(function(t){d["default"].directive(t,$["default"][t])});var O=new p["default"]({hashbang:!0});O.map({"/ktv":{name:"list",title:"夜点娱乐",component:s(186)},"/ktv/:id":{name:"detail",hideBar:!0,component:s(185)},"/ktv/:id/map":{name:"map",hideBar:!0,component:s(187)},"/book":{name:"book",title:"包房预订",hideBar:!0,component:s(180)},"/search":{name:"search",hideBar:!0,component:s(193)},"/order":{name:"order",title:"我的订单",component:s(192),subRoutes:{"/ktv":{component:s(191)},"/gift":{component:s(189)}}},"/order/ktv/:id":{name:"ktv-order",title:"我的订单",hideBar:!0,component:s(190)},"/order/gift/:id":{name:"gift-order",title:"兑换成功",hideBar:!0,component:s(188)},"/store":{name:"store",title:"礼品兑换",component:s(194)},"/store/:id":{name:"gift",title:"礼品兑换",hideBar:!0,component:s(184)},"/user":{name:"user",title:"个人中心",component:s(195)},"/user/favorite":{name:"favorite",title:"我的收藏",component:s(183)},"/coupon":{name:"coupons",title:"我的兑酒券",component:s(181)},"/events":{name:"events",title:"夜点精彩",component:s(182)},"/wechat":{component:{}}}),O.redirect({"/order":"/order/ktv","*":"/ktv"}),O.beforeEach(function(t){"/wechat"===t.to.path?t.from.path&&window.isWXReady?wx.closeWindow():t.abort():t.next()}),O.afterEach(function(t){t.to.title&&(document.title=t.to.title)}),d["default"].use(b["default"],O),d["default"].use(w["default"],O),P["default"].authenticate(a,function(t){return alert(t.msg||(0,o["default"])(t))})},,function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function a(t){return t*(Math.PI/180)}var n=s(16),o=i(n),r=s(6),l=i(r),c=s(25),d=i(c),u=e;u.getLocation=function(){var t=0,e=sessionStorage.getItem("location"),s=e?JSON.parse(e):null;return function(e,i,a){function n(t,i){console.info(t,i),s=t,sessionStorage.setItem("location",(0,l["default"])(t)),e&&e(t),a&&a(t)}function o(e){e&&(t++,console.info(e)),i&&i(e),a&&a()}return e===!0?s:void(s?n(s,"cache"):t>1?o():window.isWXReady?window.wx.getLocation({type:"gcj02",success:function(t){n({lat:t.latitude,lng:t.longitude},"wxApi")},fail:o,cancel:o}):"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(t){n({lat:t.coords.latitude,lng:t.coords.longitude},"geolocation")},o,{enableHighAccuracy:!0,timeout:5e3,maximumAge:6e4}):o())}}(),u.getDistance=function(t,e,s,i){var n=6371;if(!s){var o=u.getLocation(!0);o&&(s=o.lat,i=o.lng)}if(!s)return null;var r=a(s-t),l=a(i-e),c=Math.sin(r/2)*Math.sin(r/2)+Math.cos(a(t))*Math.cos(a(s))*Math.sin(l/2)*Math.sin(l/2),d=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),p=n*d;return p.toFixed(1)},u.calcWeight=function(t,e){"smart"==e&&(e="distance");var s=0,i="distance"==(e||"distance"),a=1e3*t.distance;s+=a<=500?5:a<=1e3?4:a<=2e3?3:a<=3e3?2:1,s*=i?1e3:100,s+=t[i?"rate":e]*(i?100:1e3);var n=t.xktvname.charAt(0),o=n.charCodeAt(0)<=122;return s+=(25-((o?n:d["default"].getFirstLetter(n)).charCodeAt(0)-96))*(o?2:1)},u.getImageColor=function(){var t,e=document.createElement("canvas"),s=e.getContext("2d"),i={};return e.width=e.height=1,function(e,a){var n=e.src||e;if(i[n])return a(i[n],n);var o=new Image;o.onload=function(){s.drawImage(o,0,0),t=s.getImageData(0,0,1,1).data,i[n]=t,a(t,n)},o.onerror=function(){a()},o.crossOrigin="Anonymous",o.src=n}}(),u.throttle=function(t,e,s){var i,a,n,o=null,r=0;s||(s={});var l=function(){r=s.leading===!1?0:Date.now(),o=null,n=t.apply(i,a),o||(i=a=null)};return function(){var c=Date.now();r||s.leading!==!1||(r=c);var d=e-(c-r);return i=this,a=arguments,d<=0||d>e?(o&&(clearTimeout(o),o=null),r=c,n=t.apply(i,a),o||(i=a=null)):o||s.trailing===!1||(o=setTimeout(l,d)),n}},u.debounce=function(t,e,s){var i,a,n,o,r,l=function c(){var l=Date.now()-o;l<e&&l>=0?i=setTimeout(c,e-l):(i=null,s||(r=t.apply(n,a),i||(n=a=null)))};return function(){n=this,a=arguments,o=Date.now();var c=s&&!i;return i||(i=setTimeout(l,e)),c&&(r=t.apply(n,a),n=a=null),r}},u.isMobile=function(t){return/^1\d{10}$/.test(t)},u.isCaptcha=function(t){return t.length>=4},u.encodeBackgroundImageUrl=function(t){return t.replace(" ","%20").replace("(","\\(").replace(")","\\)")},u.getURLParameter=function(t){var e=new RegExp("[?&]"+t+"=([^&]*)").exec(location.search);return e?decodeURIComponent(e[1]):null},u.parseDate=function(t,e){if(e instanceof Date){var s={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in s)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?s[i]:("00"+s[i]).substr((""+s[i]).length)));return t}},u.diffTime=function(t,e,s){var i=t.split(":").map(function(t){return parseInt(t)}),a=(0,o["default"])(i,2),n=a[0],r=a[1],l=e.split(":").map(function(t){return parseInt(t)}),c=(0,o["default"])(l,2),d=c[0],u=c[1],p=new Date(2e3,0,1,n,r),f=new Date(2e3,0,1,d,u);return!s&&f<p&&f.setDate(f.getDate()+1),(f-p)/36e5},u.isBeforeTime=function(t,e){return parseInt(t.replace(":",""))<parseInt(e.replace(":",""))},u.minTime=function(t,e){return u.isBeforeTime(t,e)?t:e},u.maxTime=function(t,e){return u.isBeforeTime(t,e)?e:t},u.isBetweenTime=function(t,e,s,i){return!(!i||e!=t&&s!=t)||(u.isBeforeTime(e,s)?u.isBeforeTime(e,t)&&u.isBeforeTime(t,s):!(u.isBeforeTime(s,t)&&u.isBeforeTime(t,e)))},u.adjustTime=function(t,e,s){var i=new Date,a=t.split(":").map(function(t){return parseInt(t)}),n=(0,o["default"])(a,2),r=n[0],l=n[1];return e=e||0,s=s||0,i.setHours(r,l),i.setTime(i.getTime()+36e5*e+6e4*s),u.parseDate("hh:mm",i)},u.padZero=function(t){return t<10?"0"+t:t},u.loadCSS=function(t,e){function s(){for(var t=0;t<i.length;t++)if(i[t].href===a.href)return e&&e(),a.media="all",!1;setTimeout(s,10)}var i=document.styleSheets,a=document.createElement("link");return a.rel="stylesheet",a.href=t,a.media="only x",document.head.appendChild(a),setTimeout(s,10),a},u.loadJS=function(t,e){var s=document.createElement("script");return s.src=t,s.async=!0,e&&(s.onload=e),document.head.appendChild(s),s}},,,function(t,e,s){var i=s(35)("wks"),a=s(37),n=s(8).Symbol,o="function"==typeof n,r=t.exports=function(t){return i[t]||(i[t]=o&&n[t]||(o?n:a)("Symbol."+t))};r.store=i},function(t,e,s){t.exports={"default":s(85),__esModule:!0}},,,function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};e["default"]=i},,function(t,e){t.exports={}},,,,,function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var a=s(79),n=i(a),o=s(78),r=i(o);e["default"]=function(){function t(t,e){var s=[],i=!0,a=!1,n=void 0;try{for(var o,l=(0,r["default"])(t);!(i=(o=l.next()).done)&&(s.push(o.value),!e||s.length!==e);i=!0);}catch(c){a=!0,n=c}finally{try{!i&&l["return"]&&l["return"]()}finally{if(a)throw n}}return s}return function(e,s){if(Array.isArray(e))return e;if((0,n["default"])(Object(e)))return t(e,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},,,,,,,,,,function(t,e,s){var i=s(27),a=s(5)("toStringTag"),n="Arguments"==i(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(s){}};t.exports=function(t){var e,s,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(s=o(e=Object(t),a))?s:n?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},,,,function(t,e,s){"use strict";var i=s(98),a=s(13),n=s(103),o=s(10),r=s(14),l=s(11),c=s(96),d=s(34),u=s(100),p=s(5)("iterator"),f=!([].keys&&"next"in[].keys()),h="@@iterator",v="keys",m="values",g=function(){return this};t.exports=function(t,e,s,y,k,b,x){c(s,e,y);var w,_,M,S=function(t){if(!f&&t in D)return D[t];switch(t){case v:return function(){return new s(this,t)};case m:return function(){return new s(this,t)}}return function(){return new s(this,t)}},T=e+" Iterator",L=k==m,$=!1,D=t.prototype,P=D[p]||D[h]||k&&D[k],I=P||S(k),C=k?L?S("entries"):I:void 0,B="Array"==e?D.entries||P:P;if(B&&(M=u(B.call(new t)),M!==Object.prototype&&(d(M,T,!0),i||r(M,p)||o(M,p,g))),L&&P&&P.name!==m&&($=!0,I=function(){return P.call(this)}),i&&!x||!f&&!$&&D[p]||o(D,p,I),l[e]=I,l[T]=g,k)if(w={values:L?I:S(m),keys:b?I:S(v),entries:C},x)for(_ in w)_ in D||n(D,_,w[_]);else a(a.P+a.F*(f||$),e,w);return w}},function(t,e,s){var i=s(15),a=s(12),n=s(32);t.exports=s(7)?Object.defineProperties:function(t,e){a(t);for(var s,o=n(e),r=o.length,l=0;r>l;)i.f(t,s=o[l++],e[s]);return t}},,,function(t,e,s){var i=s(15).f,a=s(14),n=s(5)("toStringTag");t.exports=function(t,e,s){t&&!a(t=s?t:t.prototype,n)&&i(t,n,{configurable:!0,value:e})}},,,,function(t,e,s){"use strict";var i=s(104)(!0);s(30)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,s=this._i;return s>=e.length?{value:void 0,done:!0}:(t=i(e,s),this._i+=t.length,{value:t,done:!1})})},function(t,e,s){s(111);for(var i=s(8),a=s(10),n=s(11),o=s(5)("toStringTag"),r=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],l=0;l<5;l++){var c=r[l],d=i[c],u=d&&d.prototype;u&&!u[o]&&a(u,o,c),n[c]=n.Array}},,,,function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(24),n=i(a);e["default"]={props:{province:{type:String,twoWay:!0},city:{type:String,twoWay:!0},district:{type:String,twoWay:!0}},ready:function(){this.provinceScroller=t(this.$els.province).mobiscroll().select({data:this.convertToData(n["default"].getProvinceList()),showInput:!1,onSelect:this.setProvince}).mobiscroll("getInst"),this.cityScroller=t(this.$els.city).mobiscroll().select({showInput:!1,onSelect:this.setCity}).mobiscroll("getInst"),this.districtScroller=t(this.$els.district).mobiscroll().select({showInput:!1,onSelect:this.setDistrict}).mobiscroll("getInst"),this.province&&this.setProvince(this.province,!1),this.city&&this.setCity(this.city,!1),this.district&&this.setDistrict(this.district,!1)},methods:{convertToData:function(t){return t.map(function(t){return{text:t,value:t}})},setProvince:function(t,e){return!(!this.cityScroller||!this.districtScroller)&&(this.province=t,this.cityScroller.option("data",this.convertToData(n["default"].getCityList(t))),this.districtScroller.option("data",[]),void(e&&(this.city=this.district="")))},setCity:function(t,e){return!(!this.districtScroller||!this.districtScroller)&&(this.city=t,this.districtScroller.option("data",this.convertToData(n["default"].getDistrictList(this.province,t))),void(e?this.district="":this.districtScroller.setVal(t,!0)))},setDistrict:function(t,e){return!!this.districtScroller&&(this.district=t,void(e||this.districtScroller.setVal(t,!0)))}},watch:{province:function(t,e){e||this.setProvince(t,!1)},city:function(t,e){e||this.setCity(t,!1)},district:function(t,e){e||this.setDistrict(t,!1)}}}}).call(e,s(1))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{hidden:{type:Boolean,"default":!0},icon:{type:String,"default":"success"},message:{type:String,"default":""},btnText:{type:String,"default":"确定"},callback:Function},methods:{show:function(t,e,s){this.icon=t,this.message=e,this.callback=s,this.hidden=!1},hide:function(){this.hidden=!this.callback||this.callback()!==!1}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{inlineMode:{type:Boolean,"default":!1}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{show:{type:Boolean,"default":!1,twoWay:!0},closeable:{type:Boolean,"default":!0},showBtn:{type:Boolean,"default":!0},btnText:{type:String,"default":"确定"},btnDisabled:{type:Boolean,"default":!1},submit:Function,title:String,docTitle:String},data:function(){return{origDocTitle:document.title}},ready:function(){this.$el.querySelector(".modal-body").style.maxHeight=window.innerHeight-160+"px"},beforeDestroy:function(){document.body.classList.remove("no-scroll")},methods:{open:function(t){this.show=!0,t&&this.$nextTick(function(){this.$el.querySelector(t).scrollIntoView()})},close:function(){this.show=!1},submitHandler:function(){this.submit?this.submit():this.show=!1},setLoading:function(t){t?(this._btnText=this.btnText,this.btnText="正在提交",this.btnDisabled=!0):(this.btnText=this._btnText,this.btnDisabled=!1)}},watch:{show:function(t){this.docTitle&&(document.title=t?this.docTitle:this.origDocTitle),document.body.classList.toggle("no-scroll",t)}}}},function(t,e,s){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{max:{type:Number,"default":5},value:{type:Number,"default":0,twoWay:!0},disabled:{type:Boolean,"default":!1},size:{type:[String,Number],"default":19},color:{type:String,"default":"#fff"},once:{type:Boolean,"default":!1}},methods:{handleTouchStart:function(e){if(this.disabled)return!1;var s=t(e.target).closest(".star").data("stars");this.value!=s&&(this.$dispatch("change",s),this.once&&(this.disabled=!0)),this.value=s},handleTouchMove:function(e){if(this.disabled)return!1;var s=e.changedTouches[0],i=document.elementFromPoint(s.clientX,s.clientY),a=t(i).closest(".star");if(a.length){var n=a.data("stars");this.value!=n&&(this.$dispatch("change",n),this.once&&(this.disabled=!0)),this.value=n}}}}}).call(e,s(1))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{inlineMode:{type:Boolean,"default":!1},message:{type:String,"default":""},info:{type:String,"default":""}}}},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(2),n=i(a);e["default"]={props:{slides:{type:Array,"default":[]},current:{type:Number,"default":0},auto:{type:Boolean,"default":!1},delay:{type:Number,"default":7e3},click:{type:Function,"default":function(){}}},ready:function(){this.startX=0,this.startY=0,this.distance=0,this.isMoving=!1,this.initialized=!1,this.init()},beforeDestroy:function(){t(window).off(".ss"),this.slides.length>1&&(t(this.$el).off(".ss"),this.auto&&clearInterval(this.timer))},methods:{init:function(){this.initialized?this.resize():this.slides.length>1&&(this.bindEvents(),this.resize(),this.auto&&(this.timer=setInterval(this.next,this.delay)),this.initialized=!0)},bindEvents:function(){var e=this,s=t(this.$el);s.on("touchstart.ss",function(t){if(e.isMoving)return!1;e.auto&&clearInterval(e.timer);var i=t.originalEvent.touches[0];e.startX=i.pageX,e.startY=i.pageY,s.off(".temp").one("touchmove.ss",function(t){i=t.originalEvent.changedTouches[0],Math.abs(e.startX-i.pageX)>Math.abs(e.startY-i.pageY)&&(t.preventDefault(),e.isMoving=!0,e.oldX=-e.width*e.current,e.startTime=Date.now(),e.startX=i.pageX,e.startY=i.pageY,s.on("touchmove.ss.temp",e.touchmoveHandler).one("touchend.ss.temp touchcancel.ss.temp",e.touchendHandler))})}).on("webkitTransitionEnd transitionend",function(t){var s=e.$els.carousel;t.originalEvent.target==s&&(s.classList.remove("transition"),e.current==-1?(e.current=e.slides.length-1,e.translateX(-e.width*e.current)):e.current==e.slides.length&&(e.current=0,e.translateX(-e.width*e.current)),e.isMoving=!1)}),t(window).on("resize.ss",n["default"].throttle(function(){e.resize()}))},translateX:function(t){this.$els.carousel.style.WebkitTransform=this.$els.carousel.style.transform="translate3d("+t+"px,0,0)"},touchmoveHandler:function(t){var e=t.originalEvent.changedTouches[0];this.distance=e.pageX-this.startX,this.translateX(this.oldX+this.distance)},touchendHandler:function(e){var s=this.distance/this.width,i=this.distance/(Date.now()-this.startTime),a=this.current;s<-.2||i<-.5?a++:(s>.2||i>.5)&&a--,this.$els.carousel.classList.add("transition"),this.translateX(-this.width*a),this.current=a,t(this.$el).off(".temp"),this.slides.length>1&&this.auto&&(this.timer=setInterval(this.next,this.delay))},resize:function(){var t=window.innerWidth,e=this.$els.carousel;this.width=t,e&&(e.style.left=-t+"px",e.style.width=(this.slides.length+2)*t+"px",this.translateX(-this.width*this.current),Array.prototype.forEach.call(e.children,function(e){e.style.width=t+"px"}))},next:function(){this.current=(this.current+1)%this.slides.length,this.$els.carousel.classList.add("transition"),this.translateX(-this.width*this.current),this.current=this.current}},watch:{slides:"init"}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{value:{type:Number,"default":1,twoWay:!0},min:{type:Number,"default":1},max:{type:Number,"default":9999},step:{type:Number,"default":1}},ready:function(){for(var e=this,s=[],i=this.min,a=this.max;i<=a;i+=this.step)s.push({text:i,value:i});this.scroller=t(this.$els.input).mobiscroll().select({data:s,onSelect:function(t){e.value=t}}).mobiscroll("getInst")},methods:{adjust:function(t){var e=this.value+t;this.min<=e&&e<=this.max&&(this.value=e,this.scroller.setVal(e,!0))}},watch:{value:function(t){this.scroller.setVal(t,!0)}}}}).call(e,s(1))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={data:function(){return{show:!0,items:[{id:"news",name:"夜点精彩",link:"#!/events"},{id:"store",name:"礼品兑换",link:"#!/store"},{id:"ktv",name:"KTV预订",link:"#!/ktv"},{id:"user",name:"个人中心",link:"#!/user"},{id:"contact",name:"联系我们",link:"tel:4006507351"}]}},ready:function(){var t=this,e=document.body;this.$router.afterEach(function(s){var i=s.to;t.show=!i.hideBar,e.classList[t.show?"add":"remove"]("show-tabbar")})}}},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(6),n=i(a),o=s(42);i(o);e["default"]={ready:function(){var e=this;t.mobiscroll.setDefaults({theme:"ios",lang:"zh",display:"bottom",height:42,mode:"scroller"}),window.onerror=function(t,s,i,a,o){if("Script error."!=t){var r={ua:navigator.userAgent,url:location.href,msg:t,file:s,line:i,col:a};o&&o.stack&&(r.msg=o.stack.toString()),"letsktv.chinacloudapp.cn"==location.host?e.$api.post("tongji/errorreport",{content:(0,n["default"])(r)}):console.info(r)}}}}}).call(e,s(1))},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(16),n=i(a),o=s(6),r=(i(o),s(2)),l=i(r),c=s(9),d=i(c);e["default"]={data:function(){return{ktv:{},now:null,lastorder:null,terms:[],termsForOnlinePay:[],arrivalTimeList:[],arrivalTimeListLimit:8,startTime:null,endTime:null,day:null,roomtype:null,course:null,pkg:null,coupon:null,onlinePay:!1,couponList:[],couponText:"",couponNone:{id:0,name:"不使用任何兑酒券"},userMobile:"",editMobile:{mobile:"",captcha:""},loadingStatus:1,errorMsg:""}},route:{canActivate:function(){return!!d["default"].bookdata},data:function(){var t=d["default"].bookdata;if(delete d["default"].bookdata,t.course.yesterday&&t.course.crossday){var e=new Date(t.day.date);e.setDate(e.getDate()+1),t.day.date=e.toISOString()}this.ktv=t.ktv,this.day=t.day,this.course=t.course,this.roomtype=t.roomtype,this.pkg=t["package"],this.lastorder=t.lastorder,this.terms=t.terms,this.termsForOnlinePay=t.termsForOnlinePay,this.onlinePay=this.pkg&&!this.pkg.huanchang&&this.ktv.online_pay;var s=[],i=[],a=t.starttime,o=void 0;t.lastorder?(o=this.getEarlierTime(t.lastorder,t.course.starttime,t.course.endtime),o==t.course.endtime?o=l["default"].adjustTime(t.course.endtime,-1):o==t.lastorder&&l["default"].diffTime(o,t.course.endtime)<=.5&&(o=l["default"].adjustTime(o,0,-30))):o=l["default"].adjustTime(t.course.endtime,-1);var r=o;this.pkg.duration&&(r=l["default"].adjustTime(o,-this.pkg.duration+1)),!l["default"].isBetweenTime(r,a,o)&&r!=o||r==a?s.push(a):(o=r,l["default"].isBeforeTime(a,o)?i.push({start:a,end:o}):i.push({start:a,end:"24:00"},{start:"00:00",end:o}),i.forEach(function(t){for(var e=[],i=t.start.split(":").map(function(t){return parseInt(t)}),a=(0,n["default"])(i,2),o=a[0],r=a[1],c=t.end.split(":").map(function(t){return parseInt(t)}),d=(0,n["default"])(c,2),u=d[0],p=d[1],f=o;f<=u;f++){var h=l["default"].padZero(f);e.push(h+":00",h+":30")}30==r&&e.shift(),24==u?(e.pop(),e.pop()):p<30&&e.pop(),s=s.concat(e)})),this.arrivalTimeList=s,this.startTime=s[0],this.coupon=this.couponNone,this.$api.getUserInfo(!0).then(function(t){return this.userMobile=t.mobile,!this.ktv.sjq||this.fetchCouponList()}).then(function(){this.loadingStatus=2})}},ready:function(){window.scrollTo(0,0)},methods:{fetchCouponList:function(){return this.$api.get("coupon/availablelist").then(function(t){if(t.total){var e=t.list;e.sort(function(t,e){return t.count==e.count?t.expire_time-e.expire_time:e.count-t.count}),this.couponText="已选择："+e[0].name,this.couponList=e,this.coupon=e[0]}else this.couponText=t.wrong_msg||"无"},function(){this.couponText="获取失败"})},updateMobile:function(){this.$api.verifyCode(this.editMobile.mobile,this.editMobile.captcha).then(function(){return this.$api.updateUserInfo({mobile:this.editMobile.mobile})}).then(function(t){alert("手机号绑定成功！"),this.userMobile=t.mobile,this.$refs.editMobileModal.close()})["catch"](function(t){alert(t.msg||"绑定失败")})},updateCoupon:function(){this.couponText=0==this.coupon.id?this.coupon.name:"已选择："+this.coupon.name,this.$refs.couponModal.close()},submitOrder:function(t){var e=t?this.$els.payBtn:this.$els.submitBtn,s=new Date(this.day.date),i=this.startTime.split(":").map(function(t){return parseInt(t)}),a=(0,n["default"])(i,2),o=a[0],r=a[1],c=this.endTime.split(":").map(function(t){return parseInt(t)}),d=(0,n["default"])(c,2),u=d[0],p=d[1];s.setHours(o,r),(2==this.course.crossday||l["default"].isBeforeTime(this.startTime,this.course.starttime))&&s.setDate(s.getDate()+1);var f=new Date(this.day.date);f.setHours(u,p),f<s&&f.setDate(f.getDate()+1);var h={ktvid:this.ktv.xktvid,roomtype:this.roomtype.id,starttime:l["default"].parseDate("yyyy-MM-dd hh:mm:ss",s),endtime:l["default"].parseDate("yyyy-MM-dd hh:mm:ss",f),couponid:this.coupon.id,taocantype:this.pkg.huanchang?1:0,taocanid:this.pkg.huanchang?"":this.pkg.id,onlinepay:t?1:0};e.disabled=!0,this.$api.post("booking/submitorder_new",h).then(function(e){var s=e.order_code;if(t)this.$api.wechatPay(s).then(function(t){alert("预订成功"),this.$router.replace({name:"ktv-order",params:{id:s}})},function(t){alert(t.msg||"支付失败"),this.$router.replace({name:"ktv-order",params:{id:s}})});else{var i="<p>您的订单已提交成功<br>我们会尽早为您安排合适的时间<br>请留意夜点娱乐公众号为您发送的订单信息</p>";i+="<h4>预订说明</h4><p>通过夜点预订KTV，只需要在夜点提交订单，到达KTV现场支付，即可享受夜点最强黄金档的价格优惠。</p>",this.$refs.flashMessage.show("success",i,function(){this.$router.replace({name:"ktv-order",params:{id:s}})})}},function(t){alert(t.msg||"预订失败"),e.disabled=!1})},isTomorrow:function(t,e,s){return l["default"].isBeforeTime(e,s)&&l["default"].isBeforeTime(t,e)},getEarlierTime:function(t,e,s){return this.isTomorrow(t,e,s)?l["default"].maxTime(s,t):l["default"].isBeforeTime(e,t)&&l["default"].isBeforeTime(s,t)?l["default"].maxTime(s,t):l["default"].minTime(s,t)}},computed:{isInvalidMobileForm:function(){return!(l["default"].isMobile(this.editMobile.mobile)&&l["default"].isCaptcha(this.editMobile.captcha))},isInvalidOrder:function(){return!this.startTime||!this.pkg||!this.userMobile},endTime:function(){return this.pkg.huanchang?0===this.pkg.duration?this.course.endtime:l["default"].adjustTime(this.startTime,this.pkg.duration):0===this.pkg.type?this.course.endtime:l["default"].minTime(l["default"].adjustTime(this.startTime,this.pkg.longtime),this.course.endtime)},orderMeta:function(){if(!this.pkg)return"";var t=new Date(this.day.date),e=l["default"].diffTime(this.startTime,this.endTime);return(2==this.course.crossday||l["default"].isBeforeTime(this.startTime,this.course.starttime))&&t.setDate(t.getDate()+1),this.pkg.huanchang&&e>this.pkg.duration&&this.pkg.duration>0&&(e=this.pkg.duration),l["default"].parseDate("yyyy年MM月dd日",t)+" "+this.startTime+"-"+this.endTime+" 欢唱"+e+"小时 "+this.roomtype.name+"（"+this.roomtype.desc+"）"},onlinePayActive:function(){return this.pkg&&!this.pkg.huanchang&&this.ktv.online_pay&&this.onlinePay}},filters:{morrow:function(t,e){return(l["default"].isBeforeTime(t,e)?"次日":"")+t}}}},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(2),n=i(a);e["default"]={data:function(){return{list:[],COUPON_STATUS:{0:"未使用",1:"已使用",2:"已过期",3:"初始状态",4:"已失效",5:"使用中"},offset:0,limit:27,page:0,perPage:9,loadingStatus:1,errorMsg:""}},route:{data:function(){this.fetch()}},ready:function(){var e=this,s=t(window),i=t(document),a=s.height();s.on("scroll",n["default"].throttle(function(){return 1!=e.loadingStatus&&void(i.height()-a-s.scrollTop()<400&&e.fetch())},100)),window.scrollTo(0,0)},beforeDestroy:function(){t(window).off("scroll")},methods:{fetch:function(){return this.offset>this.currLimit?(this.page++,!1):2!=this.loadingStatus&&(this.loadingStatus=1,void this.$api.get("Coupon/list",{offset:this.offset,limit:this.limit}).then(function(t){return 0==t.total?(this.loadingStatus=2,!1):(this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,void(t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0))},function(t){this.errorMsg=t.msg,this.loadingStatus=-1}))}}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(71),n=i(a),o=s(9),r=i(o);e["default"]={data:function(){return{events:r["default"].baseinfo.poster.lists||[],current:0,currentBg:0}},ready:function(){window.scrollTo(0,0),this.init()},beforeDestroy:function(){t(this.$el).find(".card").off(".ss"),t(document).off(".ss")},methods:{init:function(){var e=window.innerWidth,s=window.innerHeight-54;this.carousel=t(".carousel").get(0),this.width=e,this.startX=0,this.startY=0,this.distance=0,this.isMoving=!1,t(".page-events").css({height:s}),t(this.carousel).css({width:e*(this.events.length+2),height:s-110,left:-e}).find(".slide").css({width:e}).find(".card").css({width:560*(s-170)/770,height:s-110}),this.bindEvents(),this.blurBackground()},bindEvents:function(){var e=this,s=t(document);t(this.$el).find(".card").on("touchstart.ss",function(t){if(e.isMoving)return!1;var i=t.originalEvent.touches[0];e.startX=i.pageX,e.startY=i.pageY,s.off(".temp").one("touchmove.ss",function(t){i=t.originalEvent.changedTouches[0],Math.abs(e.startX-i.pageX)>Math.abs(e.startY-i.pageY)&&(t.preventDefault(),e.isMoving=!0,e.oldX=-e.width*e.current,e.startTime=Date.now(),e.startX=i.pageX,e.startY=i.pageY,s.on("touchmove.ss.temp",e.touchmoveHandler).one("touchend.ss.temp touchcancel.ss.temp",e.touchendHandler))})}),t(this.carousel).on("webkitTransitionEnd transitionend",function(t){t.originalEvent.target==e.carousel&&(e.carousel.classList.remove("transition"),e.index==-1?e.translateX(-e.width*e.current):e.index==e.events.length&&e.translateX(-e.width*e.current),e.currentBg=e.current,e.isMoving=!1)})},translateX:function(t){this.carousel.style.WebkitTransform=this.carousel.style.transform="translate3d("+t+"px,0,0)"},touchmoveHandler:function(t){var e=t.originalEvent.changedTouches[0];this.distance=e.pageX-this.startX,this.translateX(this.oldX+this.distance)},touchendHandler:function(){var e=this.distance/this.width,s=this.distance/(Date.now()-this.startTime),i=this.current;e<-.2||s<-.5?i++:(e>.2||s>.5)&&i--,this.carousel.classList.add("transition"),this.translateX(-this.width*i),this.current=i==-1?this.events.length-1:i%this.events.length,this.index=i,t(document).off(".temp")},blurBackground:function(){var t=this,e=this.$els.background.children,s=(this.events.length,0),i=140,a=220;!function o(){var r=new Image;r.onload=r.onerror=function(l){if("load"==l.type){var c=document.createElement("canvas"),d=c.getContext("2d");c.id="blurred-background-"+s,c.width=i,c.height=a,e[s].appendChild(c),d.drawImage(r,0,0,i,a),n["default"].stackBlurCanvasRGB(c.id,0,0,i,a,10),e[s].classList.add("loaded")}++s<=t.events.length-1&&o()},r.src=t.events[s].pic}()}}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(2),n=i(a);e["default"]={data:function(){return{list:[],offset:0,limit:27,page:0,perPage:9,loadingStatus:1,errorMsg:""}},route:{data:function(){n["default"].getLocation(null,null,this.fetch)}},ready:function(){var e=this,s=t(window),i=t(document),a=s.height();s.on("scroll",n["default"].throttle(function(){return 1!=e.loadingStatus&&void(i.height()-a-s.scrollTop()<400&&e.fetch())},100))},beforeDestroy:function(){t(window).off("scroll")},methods:{fetch:function(){return this.offset>this.currLimit?(this.page++,!1):2!=this.loadingStatus&&(this.loadingStatus=1,void this.$api.get("user/collectionlist",{offset:this.offset,limit:this.limit}).then(function(t){return 0==t.total?(this.loadingStatus=2,!1):(this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,void(t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0))},function(t){this.errorMsg=t.msg,this.loadingStatus=-1}))}}}}).call(e,s(1))},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(2),n=i(a);e["default"]={data:function(){return{gift:{},order:{quantity:1,captcha:"",name:"",mobile:"",province:"",city:"",district:"",address:""},userPoints:0,loadingStatus:1,errorMsg:""}},route:{data:function(){this.$api.getUserInfo(!0).then(function(t){this.userPoints=t.points,this.order.name=t.sname,this.order.mobile=t.stel,this.order.province=t.prov,this.order.city=t.city,this.order.district=t.county,this.order.address=t.address,this.fetch()})}},ready:function(){window.scrollTo(0,0)},methods:{fetch:function(){this.loadingStatus=1,this.$api.get("gift/giftdetail",{giftid:this.$route.params.id}).then(function(t){t.data.real="实物"==t.data.productsale_cata3,this.gift=t.data,this.loadingStatus=2,this.$wxShare({title:"用积分就可以兑换［"+this.gift.productsale_name+"］",desc:"我在夜点的积分商城里面看的这个不错哦…",titleTL:"我在夜点的积分商城里面看到［"+this.gift.productsale_name+"］不错哦…",imgUrl:this.gift.product_mainpic})},function(t){this.errorMsg=t.msg,this.loadingStatus=-1})},submitOrder:function(){this.$refs.exchangeModal.setLoading(!0),this.gift.real?this.$api.post("gift/orderreal",{giftid:this.gift.product_id,giftcount:this.order.quantity,sname:this.order.name,stel:this.order.mobile,prov:this.order.province,city:this.order.city,county:this.order.district,
address:this.order.address}).then(function(t){this.$router.go({name:"gift-order",params:{id:t.order_result}})},function(t){alert(t.msg||"提交失败")}):this.$api.verifyCode(this.order.mobile,this.order.captcha).then(function(){return this.$api.post("gift/ordervirtual",{giftid:this.gift.product_id,giftcount:1,mobile:this.order.mobile})}).then(function(t){this.$router.go({name:"gift-order",params:{id:t.order_result}})})["catch"](function(t){this.$refs.exchangeModal.setLoading(!1),alert(t.msg||"提交失败")})}},computed:{maxQuantity:function(){return Math.max(1,Math.floor(this.userPoints/this.gift.productsale_points))},isInvalidOrder:function(){return this.gift.real?!(this.order.quantity>0&&n["default"].isMobile(this.order.mobile)&&""!=this.order.name&&""!=this.order.province&&""!=this.order.city&&""!=this.order.district&&""!=this.order.address):!(n["default"].isMobile(this.order.mobile)&&n["default"].isCaptcha(this.order.captcha))}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(6),n=i(a),o=s(2),r=i(o),l=s(9),c=i(l);e["default"]={data:function(){return{ktv:{},now:null,favorite:!1,tcInfo:null,bookDay:null,bookCourse:null,bookRoomType:null,bookPkg:null,loadingPackages:!1,packages:[],packagesLimit:3,hcPackages:[],hcPackagesLimit:3,duration:0,deviceLimit:4,deviceNames:{bathroom:"独立卫生间",yedianpad:"夜点PAD",wirelessmicrophones:"无线麦克风",themerooms:"主题包房",parking:"停车场",xktv:"XKTV触摸桌",wifi:"免费WiFi",tm:"弹幕",zxgy:"观影",sjdg:"手机点歌",zqss:"足球赛事"},feedbackErrors:[{id:1,msg:"地址位置错误",selected:!1},{id:2,msg:"商户联系电话错误",selected:!1},{id:3,msg:"房型有误",selected:!1},{id:4,msg:"价格有误",selected:!1},{id:5,msg:"服务信息有误",selected:!1},{id:6,msg:"KTV已关闭",selected:!1}],showEventsLayer:!1,loadingStatus:1,errorMsg:""}},route:{data:function(){r["default"].getLocation(null,null,this.fetch)}},ready:function(){window.scrollTo(0,0)},methods:{fetch:function(){this.loadingStatus=1,this.$api.get("booking/xktv",{xktvid:this.$route.params.id}).then(function(t){this.time=1e3*t.now,this.now=new Date(this.time);var e=this.now.toDateString(),s=new Date(this.time-864e5).toDateString(),i="日一二三四五六".split(""),a=(this.now.getHours(),this.taocaninfo=t.data.taocaninfo);delete t.data.taocaninfo,this.ktv=t.data,a.roomtype.forEach(function(t){return t.weight=parseInt(t.desc)}),this.tcInfo={days:a.days.map(function(t,a){var n=new Date(t),o=n.toDateString();return{line1:e==o?"今天":s==o?"昨天":"周"+i[n.getDay()],line2:t.substring(5),date:n,id:a,today:e==o,yesterday:s==o}}),courses:a.course.map(function(t){return t.line2="",t.expired=!1,t.weight=parseInt(t.starttime.time)+(t.starttime.ciri?24:0),t.crossday=t.starttime.ciri+t.endtime.ciri,t.starttime=t.starttime.time,t.endtime=t.endtime.time,t.tableWeight=t.weight<0?t.weight-24:24-t.weight,t.is_hjd&&(t.tableWeight+=1e3),t.show&&(t.tableWeight+=100),t}).sort(function(t,e){return e.tableWeight-t.tableWeight}),roomtypes:a.roomtype.sort(function(t,e){return e.show==t.show?parseInt(t.desc)-parseInt(e.desc):e.show-t.show})},this.bookDay=this.tcInfo.days[0],this.filteredCourses.filter(function(t){return!t.expired}).length||(this.tcInfo.days.shift(),this.bookDay=this.tcInfo.days[0]),this.bookRoomType=this.tcInfo.roomtypes.filter(function(t){return t.show})[0],this.updatePackages(),this.ktv.devices.length>4&&(this.deviceLimit=3),this.loadingStatus=2,this.$wxShare({title:this.ktv.xktvname,desc:"我在夜点看到这个KTV不错哦，大家都来看看吧！",titleTL:"我在夜点看到［"+this.ktv.xktvname+"］不错哦，大家都来看看吧！",imgUrl:this.ktv.piclist[0].smallpicurl})},function(t){this.errorMsg=t.msg,this.loadingStatus=-1})},openMap:function(){window.isWXReady?wx.openLocation({latitude:this.ktv.lat,longitude:this.ktv.lng,name:this.ktv.xktvname,address:this.ktv.address,scale:14}):this.$router.go({name:"map",query:{lat:this.ktv.lat,lng:this.ktv.lng,name:this.ktv.xktvname,address:this.ktv.address}})},doFavorite:function(){var t=this.ktv.xktvid,e=this.$user.collectionids.indexOf(t)==-1;this.$api.post("user/"+(e?"addcollection":"delcollection"),{xktvid:t}).then(function(s){e?this.$user.collectionids+=","+t:this.$user.collectionids=this.$user.collectionids.replace(t,""),this.favorite=e,this.$refs.favoriteModal.open()},function(t){alert(t.msg||"提交失败")})},submitFeedback:function(){var t=this.selectedErrors.map(function(t){return t.id});this.$api.post("feedback/feedback",{ktvid:this.ktv.xktvid,openid:this.$user.openid,errortype:t.join(",")}).then(function(t){this.$refs.feedbackModal.close(),this.$refs.flashMessage.show("smile","<p>感谢您的反馈<br>我们会对您提出的问题尽快做出调整<br>再次谢谢您对夜点娱乐的支持！</p>"),this.feedbackErrors.forEach(function(t){t.selected=!1})},function(t){alert(t.msg||"提交失败")})},updatePackages:r["default"].debounce(function(){if(this.loadingPackages||!this.bookCourse||!this.bookRoomType)return!1;this.bookPkg=null;var t=[],e=void 0;e=this.bookDay.yesterday?this.nowTime:this.bookDay.today?2==this.bookCourse.crossday?r["default"].minTime(this.nowTime,this.bookCourse.starttime):r["default"].maxTime(this.nowTime,this.bookCourse.starttime):this.bookCourse.starttime;var s=parseInt(e.split(":")[1]);s>30?s=30:s<30&&(s=0),this.startTime=e.split(":")[0]+":"+r["default"].padZero(s);for(var i=r["default"].diffTime(this.startTime,this.bookCourse.endtime),a=1;a<=i;a++)t.push({name:"欢唱"+a+"小时",duration:a,huanchang:!0});t.push({name:"欢唱至该场次结束",duration:0,huanchang:!0}),this.hcPackages=t,this.bookCourse.is_hjd?(this.loadingPackages=!0,this.$api.get("booking/gettaocanlist",{days:this.bookDay.id,course:this.bookCourse?this.bookCourse.id:-1,roomtype:this.bookRoomType.id,ktvid:this.ktv.xktvid}).then(function(t){var e=t.data;this.packages=e.list.sort(function(t,e){return e.show-t.show}),this.bookPkg=e.total?this.packages[0]:this.hcPackages[0],this.loadingPackages=!1},function(t){alert(t.msg||"获取套餐信息失败"),this.loadingPackages=!1})):(this.packages=[],this.bookPkg=this.hcPackages[0])},200),goBook:function(t){t&&!t.type&&(this.bookPkg=t),c["default"].bookdata=JSON.parse((0,n["default"])({now:this.now,ktv:this.ktv,day:this.bookDay,course:this.bookCourse,roomtype:this.bookRoomType,"package":this.bookPkg,lastorder:this.ktv.lastofjiedan?this.ktv.lastofjiedan.time:null,terms:this.taocaninfo.tiaokuan.map(function(t){return t.name}),termsForOnlinePay:this.taocaninfo.tiaokuan_online.map(function(t){return t.name}),starttime:this.startTime})),this.$router.go({name:"book"})}},computed:{nowTime:function(){return r["default"].padZero(this.now.getHours())+":"+r["default"].padZero(this.now.getMinutes())},filteredCourses:function(){return this.bookDay.today?this.tcInfo.courses.filter(function(t){return t.is_hjd||!t.expired}):this.tcInfo.courses},selectedErrors:function(){return this.feedbackErrors.filter(function(t){return t.selected})}},filters:{deviceName:function(t){return this.deviceNames[t.toLowerCase()]},formatSlides:function(t){return t?t.map(function(t){return{pic:t.bigpicurl}}):[]}},watch:{showEventsLayer:function(t){t&&this.$els.eventsLayer&&this.$els.eventsLayer.classList.toggle("scroll",this.$els.eventsLayer.querySelector(".flash-message-dialog").scrollHeight>window.innerHeight-100-30),document.body.classList.toggle("no-scroll",t)},bookDay:function(t){var e=this,s=t.today,i=t.yesterday;this.tcInfo.courses=this.tcInfo.courses.map(function(t){return 2==t.crossday?t.line2="次日"+t.starttime+"-"+t.endtime:1==t.crossday?t.line2=t.starttime+"-次日"+t.endtime:t.line2=t.starttime+"-"+t.endtime,i?t.expired=!t.crossday:s?t.crossday?t.expired=!1:t.expired=!r["default"].isBeforeTime(e.nowTime,r["default"].adjustTime(t.endtime,-1)):t.expired=!1,t}),this.bookCourse=this.filteredCourses.filter(function(t){return!t.expired})[0],this.updatePackages()},bookCourse:"updatePackages",bookRoomType:"updatePackages"}}},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(4),n=i(a),o=s(2),r=i(o),l=s(9),c=i(l),d=s(23),u=i(d);e["default"]={data:function(){var t=[{distance:500,name:"离我500M"},{distance:1e3,name:"离我1KM"},{distance:2e3,name:"离我2KM"},{distance:3e3,name:"离我3KM"}],e={code:0,name:"全部商区"},s=[{code:"distance",name:"离我最近"},{code:"smart",name:"智能排序"},{code:"DecorationRating",name:"环境最佳"},{code:"SoundRating",name:"音效最好"},{code:"ServiceRating",name:"服务最好"},{code:"FoodRating",name:"美食最佳"},{code:"responsetime",name:"订单处理最快"}],i=[{code:"sjq",name:"兑酒券",selected:!1},{code:"hjd",name:"黄金档",selected:!1}];return{banners:c["default"].baseinfo.banner.lists||[],stickKtv:null,activeLayer:!1,activePanel:"area",keyword:"",cityList:[],gpsCity:{name:"正在定位…"},activeCity:null,distanceList:t,areaList:[],allAreas:e,filterKey:e,sortTypes:s,sortKey:s[1],eventTypes:i,eventKey:null,list:[],type:this.$route.query.type||"",offset:0,limit:27,page:0,perPage:9,loadingStatus:1,errorMsg:""}},route:{data:function(){var t=this,e=this.$route.query;"jq"==e.event&&(this.eventTypes[0].selected=!0),"goldpkg"==e.event&&(this.eventTypes[1].selected=!0),r["default"].getLocation(null,null,function(s){t.getCityList().then(function(){var t=this;return c["default"].city?(this.activeCity=this.cityList.filter(function(t){return t.code==c["default"].city})[0],void(this.gpsCity.name=c["default"].gpsCity)):this.reverseGeocodeLocation(s).then(function(t){if(!this.isCityAvailable(t))throw c["default"].gpsCity=this.gpsCity.name=t.name,new Error("检测到您当前城市没有可预订的KTV，是否手动切换城市？");t.code=this.cityList.filter(function(e){return e.name==t.name})[0].code,this.activeCity=this.gpsCity=t},function(e){throw c["default"].gpsCity=t.gpsCity.name="定位失败",new Error("系统检测不到当前位置信息，是否需要手动切换城市？")})["catch"](function(e){t.activeCity=t.cityList[0],t.cityList.length>1&&confirm(e.message)&&(t.activePanel="city",t.activeLayer="area")})}).then(function(){this.getDistrictList().then(function(){var t=e.district||c["default"].district;if(t){for(var s=!1,i=void 0,a=0,n=this.areaList.length;a<n;a++)if(i=this.areaList[a],i.code==t){this.filterKey=i,s=!0;break}if(s)return}this.fetch()}),this.$watch("activeCity",function(t){this.fetchCoords().then(function(){this.filterKey.distance||this.filterKey.code===this.allAreas.code?(c["default"].city=this.activeCity.code,c["default"].district=this.filterKey.code,this.updateList()):this.filterKey=this.allAreas}),this.getDistrictList()})})})}},ready:function(){var e=this;this.$route.query.fromTabBar&&window.scrollTo(0,0);var s=this.$els.masthead,i=t(window),a=t(document),n=i.height();a.on("touchstart.page",function(t){var e=i.scrollTop();i.one("scroll",function(t){var a=i.scrollTop(),n=a-e;a>44&&n>0?s.classList.add("hide"):s.classList.remove("hide")})}),i.on("scroll",r["default"].throttle(function(){var t=i.scrollTop();return 1!=e.loadingStatus&&(a.height()-n-t<400&&e.fetch(),void(t<44&&s.classList.remove("hide")))},100)),t(".filter-panels").css("max-height",n-152)},beforeDestroy:function(){t(document).off(".page"),t(window).off("scroll")},methods:{buildQuery:function(t){var e={city:this.activeCity.code,code:this.filterKey.code,best:"smart"==this.sortKey.code?"distance":this.sortKey.code,type:this.type,sjq:this.eventTypes[0].selected?1:0,taocan:this.eventTypes[1].selected?1:0};return t&&(0,n["default"])(t).forEach(function(s){e[s]=t[s]}),e},fetch:function(){("distance"==this.sortKey.code||"smart"==this.sortKey.code)&&0===this.filterKey.code||this.filterKey.distance?this.coords?this.fetchByDistance():this.fetchCoords().then(function(){this.fetchByDistance()}):this.fetchList()},fetchList:function(){return this.offset>this.currLimit?(this.page++,!1):2!=this.loadingStatus&&(this.loadingStatus=1,void this.$api.get("booking/Xktvlist",this.buildQuery({offset:this.offset,limit:this.limit}),!0).then(function(t){var e=this;if(0==t.total)return this.loadingStatus=2,!1;t.event&&!this.stickKtv&&(t.event.distance=r["default"].getDistance(t.event.lat,t.event.lng),this.stickKtv=t.event);var s="smart"==this.sortKey.code;t.list.forEach(function(t){t.distance=r["default"].getDistance(t.lat,t.lng),s?t.weight=r["default"].calcWeight(t,e.sortKey.code):t.weight=1e4-t.distance}),s&&r["default"].getLocation(!0)&&0==this.page&&(t.list[0].weight=9e3),this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0},function(t){this.errorMsg=t.msg,this.loadingStatus=-1}))},fetchByDistance:function(){var t=this;if(this.offset>this.currLimit)return this.page++,!1;if(2==this.loadingStatus)return!1;this.loadingStatus=1;var e=this.coords||[];this.eventTypes[0].selected&&(e=e.filter(function(t){return t.sjq})),this.eventTypes[1].selected&&(e=e.filter(function(t){return t.taocan})),this.filterKey.distance&&!function(){var s=t.filterKey.distance/1e3;e=e.filter(function(t){return t.distance<s})}(),e=e.slice(this.offset,this.offset+this.limit),this.$api.post("booking/Xktvlist",this.buildQuery({list:e.map(function(t){return t.xktvid})}),!0).then(function(t){if(0==t.total)return this.loadingStatus=2,!1;t.event&&!this.stickKtv&&(t.event.distance=r["default"].getDistance(t.event.lat,t.event.lng),this.stickKtv=t.event);var e="smart"==this.sortKey.code;t.list.forEach(function(t){t.distance=r["default"].getDistance(t.lat,t.lng),e?t.weight=r["default"].calcWeight(t):t.weight=1e4-t.distance}),e&&r["default"].getLocation(!0)&&0==this.page&&(t.list[0].weight=9e3),this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0},function(t){this.errorMsg=t.msg,this.loadingStatus=-1})},fetchCoords:function(){return this.loadingStatus=1,this.$api.get("booking/xktvcoords",{city:this.activeCity.code},!0).then(function(t){t.list.forEach(function(t){t.distance=r["default"].getDistance(t.lat,t.lng)}),t.list.sort(function(t,e){return t.distance-e.distance}),this.coords=t.list,this.loadingStatus=0},function(t){this.errorMsg=t.message,this.loadingStatus=-1})},getCityList:function(){return this.$api.get("booking/CityList",{},!0).then(function(t){var e=t.lists.map(function(t){return{name:t.name,code:t.area_id}});this.cityList=e})},getDistrictList:function(){return this.$api.get("booking/Xktvdistrict",{parent:this.activeCity.code},!0).then(function(t){this.areaList=t.list})},updateList:function(){this.loadingStatus=0,this.list=[],this.page=this.offset=0,this.fetch()},showSearchform:function(){this.activeLayer="search",this.$nextTick(function(){this.$els.searchInput.focus()})},doSearch:function(){document.body.classList.remove("no-scroll"),this.$router.go({name:"search",query:{q:this.keyword,city:this.activeCity.code}})},handleBanner:function(t){this.$handleLink(t,"banner")},reverseGeocodeLocation:function(t){return t?this.$http.jsonp("http://apis.map.qq.com/ws/geocoder/v1/",{params:{key:"4QMBZ-YW5AR-AAZWF-WXXP2-QWJ3V-3DFGN",location:t.lat+","+t.lng,get_poi:0,output:"jsonp"}}).then(function(t){var e=t.data;if(0===e.status&&e.result.ad_info.adcode)return{name:e.result.ad_info.city,code:e.result.ad_info.adcode};throw new Error(e.message)}):u["default"].Promise.reject(new Error("missing parameter"))},isCityAvailable:function(t){return this.cityList.some(function(e){return t.name==e.name})}},computed:{areaText:function(){return this.filterKey.distance?this.filterKey.name:this.activeCity?this.filterKey.code?this.filterKey.name:this.activeCity.name:"城市-商区"},currLimit:function(){return this.page*this.perPage},orderKey:function(){return"distance"==this.sortKey.code||"smart"==this.sortKey.code?"weight":null}},watch:{filterKey:function(t){t.code&&"distance"==this.sortKey.code&&(this.sortKey=this.sortTypes[0]),t.code&&(c["default"].city=this.activeCity.code,c["default"].district=t.code),this.updateList()},sortKey:function(){this.activeLayer=!1,this.updateList()},activeLayer:function(t){document.body.classList.toggle("no-scroll",t)}}}}).call(e,s(1))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={data:function(){var t=this.$route.query;return{mapUrl:"http://apis.map.qq.com/tools/poimarker?type=0&marker=coord:"+t.lat+","+t.lng+";title:"+t.name+";addr:"+t.address+"&streetview=0&key=4QMBZ-YW5AR-AAZWF-WXXP2-QWJ3V-3DFGN&referer=letsktv"}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(2);i(a);e["default"]={data:function(){return{order:{},userPoints:0,loadingStatus:1,errorMsg:""}},route:{data:function(){this.$api.getUserInfo(!0).then(function(t){this.userPoints=t.points,this.fetch()})}},ready:function(){window.scrollTo(0,0)},methods:{fetch:function(){this.loadingStatus=1,this.$api.get("gift/orderdetail",{orderid:this.$route.params.id}).then(function(t){t.data.real=""!=t.data.sellorder_receiver,this.order=t.data,this.loadingStatus=2},function(t){this.errorMsg=t.msg,this.loadingStatus=-1})},goBack:function(){window.history.back()}}}},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(2),n=i(a);e["default"]={data:function(){return{list:[],offset:0,limit:27,page:0,perPage:9,loadingStatus:1,errorMsg:""}},route:{data:function(){this.fetch()}},ready:function(){var e=this,s=t(window),i=t(document),a=s.height();s.on("scroll",n["default"].throttle(function(){return 1!=e.loadingStatus&&void(i.height()-a-s.scrollTop()<400&&e.fetch())},100))},beforeDestroy:function(){t(window).off("scroll")},methods:{fetch:function(){return this.offset>this.currLimit?(this.page++,!1):2!=this.loadingStatus&&(this.loadingStatus=1,void this.$api.get("gift/giftorderlistnew",{type:1,offset:this.offset,limit:this.limit}).then(function(t){return 0==t.total?(this.loadingStatus=2,!1):(this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,void(t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0))},function(t){this.errorMsg=t.msg,this.loadingStatus=-1}))}},computed:{currLimit:function(){return this.page*this.perPage}}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(4),n=i(a),o=s(2),r=i(o);e["default"]={data:function(){return{ORDER_STATUS:{1:"预约中…",14:"已过期",17:"等待支付",18:"已支付",19:"已支付",20:"已支付",21:"退款中",22:"退款完成",3:"已确认",7:"已取消",5:"已完成",4:"已满房",8:"已删除"},order:{},timeRemaining:-1,ratings:{decoration:0,sound:0,service:0,consumer:0,food:0,app:0},loadingStatus:1,errorMsg:""}},route:{data:function(){this.fetch()}},ready:function(){window.scrollTo(0,0),this.$route.query.share&&this.showShareLayer(this.$route.query.share)},beforeDestroy:function(){clearInterval(this.timer)},methods:{fetch:function(){this.loadingStatus=1,this.$api.get("booking/Orderdetail",{ordercode:this.$route.params.id}).then(function(t){this.order=t,this.loadingStatus=2,t.is_pingjia.status&&(this.ratings.app=t.is_pingjia.appRating),3==t.order_status&&(this.timer=setInterval(this.checkStatus.bind(this),5e3)),t.is_pay_online&&17==t.order_status&&this.payCountdown(t.payendtime-t.now)},function(t){this.errorMsg=t.msg,this.loadingStatus=-1})},cancelOrder:function(){var t=this.order;if(!confirm("确定要取消"+t.ktvinfo.xktvname+" "+r["default"].parseDate("yyyy年MM月dd日 hh:mm",new Date(1e3*t.starttime))+" "+t.room_name+"的订单吗？"))return!1;var e=void 0;this.$els.cancelBtn.classList.add("loading"),e=t.is_pay_online?this.$api.get("booking/cancelpayorder",{ordercode:t.order_code}):this.$api.post("booking/cancelorder",{ordercode:t.order_code,ktvid:t.ktvinfo.xktvid}),e.then(function(e){this.order.order_status=t.is_pay_online?21:7,this.$els.cancelBtn.classList.remove("loading")},function(t){alert(t.msg||"取消订单失败")})},openMap:function(){window.isWXReady?wx.openLocation({latitude:this.order.ktvinfo.lat,longitude:this.order.ktvinfo.lng,name:this.order.ktvinfo.xktvname,address:this.order.ktvinfo.address,scale:14}):this.$router.go({name:"map",query:{lat:this.order.ktvinfo.lat,lng:this.order.ktvinfo.lng,name:this.order.ktvinfo.xktvname,address:this.order.ktvinfo.address}})},checkStatus:function(){this.$api.get("booking/checkstatus",{order_code:this.order.order_code}).then(function(t){5==t.status&&(this.order.order_status=t.status,clearInterval(this.timer),this.showShareLayer(t.ShareCoupon.code))})},showShareLayer:function(t){this.$els.orderRedpacket.style.display="block",this.$wxShare({title:"夜点送你广州KTV兑酒券！",desc:"好友K歌局，有酒才痛快！夜点免费兑酒券，等你来抢！",link:"http://letsktv.chinacloudapp.cn/dist/redpacket/?coupon="+t,imgUrl:"http://letsktv.chinacloudapp.cn/dist/redpacket/img/weixin_share_pic.jpg"})},postReview:function(){this.$api.post("feedback/comment",{ktvid:this.order.ktvinfo.xktvid,openid:this.$user.openid,DecorationRating:this.ratings.decoration,SoundRating:this.ratings.sound,ServiceRating:this.ratings.service,FoodRating:this.ratings.food,ConsumerRating:this.ratings.consumer,appRating:this.ratings.app}).then(function(t){this.order.rating.status=1,this.$refs.ratingModal.close(),this.$refs.flashMessage.show("smile","<p>评价成功</p>")},function(t){alert(t.msg||"提交失败")})},payCountdown:function(t){var e=this;this.timeRemaining=t,this.timeRemainingLast=Date.now(),this.timer=setInterval(function(){if(e.timeRemaining>0){var t=Date.now();e.timeRemaining-=Math.round((t-e.timeRemainingLast)/1e3),e.timeRemainingLast=t}else e.timeRemaining=-1,clearInterval(e.timer)},1e3)},payOrder:function(){this.$api.wechatPay(this.order.order_code).then(function(t){alert("支付成功"),clearInterval(this.timer),this.timeRemaining=-1,this.order.order_status=18},function(t){alert(t.msg||"支付失败")})},redpacketRating:function(e){this.$api.post("feedback/commentapp",{ktvid:this.order.ktvinfo.xktvid,orderid:this.order.order_code,appRating:e}),t(this.$els.orderRedpacket).find(".thanks").show()}},filters:{statusName:function(t){return this.ORDER_STATUS[t]},backgroundImage:function(t){return t?{backgroundImage:"url("+r["default"].encodeBackgroundImageUrl(t.piclist[0].bigpicurl)+")"}:null},mobileFormat:function(t){return t&&t.replace(/(\d{3})(\d{4})(\d{4})/,"$1 $2 $3")},humanTime:function(t){return r["default"].padZero(Math.floor(t/60))+":"+r["default"].padZero(t%60)}},computed:{orderDate:function(){if(this.order.starttime&&this.order.endtime){var t=new Date(1e3*this.order.starttime),e=t.getHours();return"周"+"日一二三四五六".split("")[t.getDay()]+r["default"].parseDate("（M月d日）",t)+(e<5?"凌晨":e<12?"上午":e<14?"中午":e<18?"下午":"晚上")+r["default"].parseDate("hh:mm",t)+"-"+r["default"].parseDate("hh:mm",new Date(1e3*this.order.endtime))}return""},isRatingComplete:function(){var t=this;return(0,n["default"])(this.ratings).every(function(e){return t.ratings[e]})},isOrderCancelable:function(){return 1==this.order.order_status||3==this.order.order_status||18==this.order.order_status},canDisplayQrcode:function(){return!(1==this.order.order_status||4==this.order.order_status||7==this.order.order_status||14==this.order.order_status||17==this.order.order_status)}}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(4),n=i(a),o=s(2),r=i(o);e["default"]={data:function(){return{ORDER_STATUS:{1:"预约中…",14:"已过期",17:"等待支付",18:"已支付",19:"已支付",20:"已支付",3:"已确认",7:"已取消",5:"已完成",4:"已满房",8:"已删除"},status:0,list:[],ratings:{decoration:0,sound:0,service:0,consumer:0,food:0,app:0},ratingOrder:null,offset:0,limit:27,page:0,perPage:9,loadingStatus:1,errorMsg:""}},route:{data:function(){this.fetch()}},ready:function(){var e=this,s=t(window),i=t(document),a=s.height();s.on("scroll",r["default"].throttle(function(){return 1!=e.loadingStatus&&void(i.height()-a-s.scrollTop()<400&&e.fetch())},100))},beforeDestroy:function(){t(window).off("scroll")},methods:{fetch:function(){return this.offset>this.currLimit?(this.page++,!1):2!=this.loadingStatus&&(this.loadingStatus=1,void this.$api.get("booking/orderlist",{offset:this.offset,limit:this.limit,status:this.status}).then(function(t){return 0==t.total?(this.loadingStatus=2,!1):(this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,void(t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0))},function(t){this.errorMsg=t.msg,this.loadingStatus=-1}))},deleteOrder:function(t,e){this.$api.post("booking/deleteorder",{ordercode:t.order_code,ktvid:t.ktvinfo.xktvid}).then(function(s){var i=this;e.one("transitionend",function(){i.list.$remove(t)}).css("height",e.height()),setTimeout(function(){e.addClass("deleted")},10)},function(t){alert(t.msg||"删除订单失败")})},showRatingModal:function(t){this.ratingOrder=t,this.$nextTick(function(){this.$refs.ratingModal.open()})},postReview:function(){this.$api.post("feedback/comment",{ktvid:this.ratingOrder.ktvinfo.xktvid,openid:this.$user.openid,DecorationRating:this.ratings.decoration,SoundRating:this.ratings.sound,ServiceRating:this.ratings.service,FoodRating:this.ratings.food,ConsumerRating:this.ratings.consumer,appRating:this.ratings.app}).then(function(t){var e=this;this.ratingOrder.rating.status=1,this.$refs.ratingModal.close(),this.$refs.flashMessage.show("smile","<p>评价成功</p>"),(0,n["default"])(this.ratings).forEach(function(t){return e.ratings[t]=0})},function(t){alert(t.msg||"提交失败")})}},computed:{currLimit:function(){return this.page*this.perPage},isRatingComplete:function(){var t=this;return(0,n["default"])(this.ratings).every(function(e){return t.ratings[e]})}},watch:{"$parent.status":function(t){this.status=t,this.loadingStatus=0,this.page=this.offset=0,this.list=[],this.fetch()}},directives:{swipeToDelete:{bind:function(){function e(t){var e=t.originalEvent.changedTouches[0];l=n-e.pageX}function s(t){var e=i.order;l/a.width()>.3&&7==e.order_status&&confirm("确定要删除"+e.ktvinfo.xktvname+" "+r["default"].parseDate("yyyy年MM月dd日 hh:mm",new Date(1e3*e.starttime))+" "+e.members+"人"+e.room_name+"的订单吗？")&&i.vm.deleteOrder(e,a),a.off(".temp")}var i=this,a=t(this.el),n=0,o=0,l=0;a.on("touchstart.s2d",function(t){var i=t.originalEvent.touches[0];n=i.pageX,o=i.pageY,a.off(".temp").one("touchmove.s2d.temp",function(t){var i=t.originalEvent.changedTouches[0];n-i.pageX>Math.abs(o-i.pageY)&&(t.preventDefault(),a.on("touchmove.s2d.temp",e).one("touchend.s2d.temp touchcancel.s2d.temp",s))})})},update:function(t){this.order=t},unbind:function(){t(this.el).off(".s2d")}}},filters:{humanDate:function(t){var e=new Date(1e3*t.starttime),s=e.getHours();return"周"+"日一二三四五六".split("")[e.getDay()]+r["default"].parseDate("（M月d日）",e)+(s<5?"凌晨":s<12?"上午":s<14?"中午":s<18?"下午":"晚上")+r["default"].parseDate("hh:mm",e)+"-"+r["default"].parseDate("hh:mm",new Date(1e3*this.order.endtime))},duration:function(t){return(t.endtime-t.starttime)/60/60},statusName:function(t){return this.ORDER_STATUS[t]},backgroundImage:function(t){return{backgroundImage:"url("+r["default"].encodeBackgroundImageUrl(t)+")"}}}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={data:function(t){return{activeView:this.$route.path.indexOf("gift")==-1?"ktv":"gift",status:0,showStatusFilter:!1}},ready:function(){this.$route.query.fromTabBar&&window.scrollTo(0,0)},watch:{showStatusFilter:function(e){var s=this;e&&setTimeout(function(){t(document).one("click",function(){s.showStatusFilter=!1})},10)}}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(2),n=i(a);e["default"]={data:function(){return{keyword:this.$route.query.q,city:this.$route.query.city,list:[],offset:0,limit:27,page:0,perPage:9,loadingStatus:1,errorMsg:""}},route:{data:function(){n["default"].getLocation(null,null,this.fetch)}},ready:function(){var e=this,s=this.$els.masthead,i=t(window),a=t(document),o=i.height();a.on("touchstart.page",function(t){var e=i.scrollTop();i.one("scroll",function(t){var a=i.scrollTop(),n=a-e;a>44&&n>0?s.classList.add("hide"):s.classList.remove("hide")})}),i.on("scroll",n["default"].throttle(function(){var t=i.scrollTop();return 1!=e.loadingStatus&&(a.height()-o-t<400&&e.fetch(),void(t<44&&s.classList.remove("hide")))},100))},beforeDestroy:function(){t(document).off(".page"),t(window).off("scroll")},methods:{fetch:function(){return this.offset>this.currLimit?(this.page++,!1):2!=this.loadingStatus&&(this.loadingStatus=1,void this.$api.get("booking/xktvsearchlist",{offset:this.offset,limit:this.limit,name:this.keyword,city:this.city},!0).then(function(t){return 0==t.total?(this.loadingStatus=2,!1):(this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,void(t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0))},function(t){this.errorMsg=t.msg,this.loadingStatus=-1}))},search:function(){this.loadingStatus=0,this.list=[],this.page=this.offset=0,this.fetch()}},computed:{currLimit:function(){return this.page*this.perPage}}}}).call(e,s(1))},function(t,e,s){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(2),n=i(a);e["default"]={data:function(){return{list:[],userPoints:0,offset:0,limit:27,page:0,perPage:9,loadingStatus:1,errorMsg:""}},route:{data:function(){this.$api.getUserInfo(!0).then(function(t){this.userPoints=t.points,this.fetch()})}},ready:function(){var e=this;this.$route.query.fromTabBar&&window.scrollTo(0,0);var s=t(window),i=t(document),a=s.height();s.on("scroll",n["default"].throttle(function(){return 1!=e.loadingStatus&&void(i.height()-a-s.scrollTop()<400&&e.fetch())},100)),this.$wxShare({title:"预订KTV欢唱，还可兑换各种好礼，别说我没告诉你哦！",desc:"想要唱歌不排队还能免费兑换惊喜好礼？来夜点一键预订KTV吧！",titleTL:"用夜点预订KTV欢唱，还可兑换各种好礼，别说我没告诉你哦！"})},beforeDestroy:function(){t(window).off("scroll")},methods:{fetch:function(){return this.offset>this.currLimit?(this.page++,!1):2!=this.loadingStatus&&(this.loadingStatus=1,void this.$api.get("gift/Giftlist",{type:1,offset:this.offset,limit:this.limit}).then(function(t){return 0==t.total?(this.loadingStatus=2,!1):(this.list=this.list.concat(t.list),this.offset+=t.total,this.page++,void(t.total<this.limit?this.loadingStatus=2:this.loadingStatus=0))},function(t){this.errorMsg=t.msg,this.loadingStatus=-1}))}},computed:{currLimit:function(){return this.page*this.perPage}}}}).call(e,s(1))},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(2),n=i(a);e["default"]={data:function(){return{showInvitePoster:!1,user:{},hotline:"4006507351",editBaseInfo:{name:"",gender:0},editMobile:{mobile:"",captcha:""},editAddress:{name:"",prov:"",city:"",county:"",address:""},loadingStatus:1,errorMsg:""}},route:{data:function(){this.fetch()}},ready:function(){this.$route.query.fromTabBar&&window.scrollTo(0,0)},methods:{fetch:function(){this.loadingStatus=1,this.$api.getUserInfo().then(function(t){this.user=t,this.editBaseInfo={name:t.real_name,gender:t.gender},this.editAddress={name:t.sname,tel:t.stel,prov:t.prov,city:t.city,county:t.county,address:t.address},this.loadingStatus=2,this.$wxShare({title:"用夜点，要派对，不排队！想嗨就嗨，无需等待！",desc:"无需下载APP，关注微信公众账号，即可HIGH遍广州KTV！(北京、上海陆续开放中…)",titleTL:"用夜点一键预订KTV！想嗨就嗨，无需等待！",link:location.origin+location.pathname+"/share.html?openid="+t.openid})},function(t){this.errorMsg=t.msg||"加载失败",this.loadingStatus=-1})},updateBaseInfo:function(){this.$api.updateUserInfo({real_name:this.editBaseInfo.name,gender:this.editBaseInfo.gender}).then(function(t){alert("用户信息更新成功！"),this.user=t,this.$refs.editBaseinfoModal.close()},function(t){alert(t.msg||"更新失败")})},updateMobile:function(){this.$api.verifyCode(this.editMobile.mobile,this.editMobile.captcha).then(function(){return this.$api.updateUserInfo({mobile:this.editMobile.mobile})}).then(function(t){alert("手机号更新成功！"),this.mobile=t.mobile,this.$refs.editMobileModal.close()})["catch"](function(t){alert(t.msg||"更新失败")})},updateAddress:function(){this.$api.updateUserInfo({sname:this.editAddress.name,stel:this.editAddress.tel,prov:this.editAddress.prov,city:this.editAddress.city,county:this.editAddress.county,address:this.editAddress.address}).then(function(t){alert("收件地址更新成功！"),this.user=t,this.$refs.editAddressModal.close()},function(t){alert(t.msg||"更新失败")})},scanQRCode:function(){wx.scanQRCode({needResult:0,scanType:["qrCode","barCode"],success:function(t){
t.resultStr},fail:function(t){alert(t.errMsg)}})}},computed:{fullAddress:function(){return this.user.prov?this.user.prov+" "+this.user.city+" "+this.user.county+" "+this.user.address:""},isInvalidBaseInfoForm:function(){return!(this.editBaseInfo.name.length>0&&0!=this.editBaseInfo.gender)},isInvalidMobileForm:function(){return!(n["default"].isMobile(this.editMobile.mobile)&&n["default"].isCaptcha(this.editMobile.captcha))},isInvalidAddressForm:function(){return!(""!=this.editAddress.name&&n["default"].isMobile(this.editAddress.tel)&&""!=this.editAddress.prov&&""!=this.editAddress.city&&""!=this.editAddress.county&&""!=this.editAddress.address)}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var a=s(2),n=i(a);e["adaptive-background"]={update:function(t){if(!t)return!1;var e=this.el.style;n["default"].getImageColor(t,function(s){s&&(e.backgroundColor="rgb("+s[0]+","+s[1]+","+s[2]+")"),e.backgroundImage="url("+t+")"})}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var a=s(2),n=i(a);e.date=function(t,e){return t?n["default"].parseDate(e,new Date(1e3*t)):""},e.distance=function(t){return t.distance||(t.lat?n["default"].getDistance(t.lat,t.lng):"")},e.backgroundImage=function(t){return t?{backgroundImage:"url("+n["default"].encodeBackgroundImageUrl(t)+")"}:null}},function(t,e){"use strict";function s(t,e,s,n){var o=document.getElementById(t),r=o.naturalWidth,l=o.naturalHeight,c=document.getElementById(e);c.style.width=r+"px",c.style.height=l+"px",c.width=r,c.height=l;var d=c.getContext("2d");d.clearRect(0,0,r,l),d.drawImage(o,0,0),isNaN(s)||s<1||(n?i(e,0,0,r,l,s):a(e,0,0,r,l,s))}function i(t,e,s,i,a,l){if(!(isNaN(l)||l<1)){l|=0;var c,d=document.getElementById(t),u=d.getContext("2d");try{try{c=u.getImageData(e,s,i,a)}catch(p){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),c=u.getImageData(e,s,i,a)}catch(p){throw alert("Cannot access local image"),new Error("unable to access local image data: "+p)}}}catch(p){throw alert("Cannot access image"),new Error("unable to access image data: "+p)}var f,h,v,m,g,y,k,b,x,w,_,M,S,T,L,$,D,P,I,C,B,K,O,R,E=c.data,j=l+l+1,A=i-1,q=a-1,X=l+1,V=X*(X+1)/2,U=new n,F=U;for(v=1;v<j;v++)if(F=F.next=new n,v==X)var N=F;F.next=U;var W=null,H=null;k=y=0;var z=o[l],Y=r[l];for(h=0;h<a;h++){for($=D=P=I=b=x=w=_=0,M=X*(C=E[y]),S=X*(B=E[y+1]),T=X*(K=E[y+2]),L=X*(O=E[y+3]),b+=V*C,x+=V*B,w+=V*K,_+=V*O,F=U,v=0;v<X;v++)F.r=C,F.g=B,F.b=K,F.a=O,F=F.next;for(v=1;v<X;v++)m=y+((A<v?A:v)<<2),b+=(F.r=C=E[m])*(R=X-v),x+=(F.g=B=E[m+1])*R,w+=(F.b=K=E[m+2])*R,_+=(F.a=O=E[m+3])*R,$+=C,D+=B,P+=K,I+=O,F=F.next;for(W=U,H=N,f=0;f<i;f++)E[y+3]=O=_*z>>Y,0!=O?(O=255/O,E[y]=(b*z>>Y)*O,E[y+1]=(x*z>>Y)*O,E[y+2]=(w*z>>Y)*O):E[y]=E[y+1]=E[y+2]=0,b-=M,x-=S,w-=T,_-=L,M-=W.r,S-=W.g,T-=W.b,L-=W.a,m=k+((m=f+l+1)<A?m:A)<<2,$+=W.r=E[m],D+=W.g=E[m+1],P+=W.b=E[m+2],I+=W.a=E[m+3],b+=$,x+=D,w+=P,_+=I,W=W.next,M+=C=H.r,S+=B=H.g,T+=K=H.b,L+=O=H.a,$-=C,D-=B,P-=K,I-=O,H=H.next,y+=4;k+=i}for(f=0;f<i;f++){for(D=P=I=$=x=w=_=b=0,y=f<<2,M=X*(C=E[y]),S=X*(B=E[y+1]),T=X*(K=E[y+2]),L=X*(O=E[y+3]),b+=V*C,x+=V*B,w+=V*K,_+=V*O,F=U,v=0;v<X;v++)F.r=C,F.g=B,F.b=K,F.a=O,F=F.next;for(g=i,v=1;v<=l;v++)y=g+f<<2,b+=(F.r=C=E[y])*(R=X-v),x+=(F.g=B=E[y+1])*R,w+=(F.b=K=E[y+2])*R,_+=(F.a=O=E[y+3])*R,$+=C,D+=B,P+=K,I+=O,F=F.next,v<q&&(g+=i);for(y=f,W=U,H=N,h=0;h<a;h++)m=y<<2,E[m+3]=O=_*z>>Y,O>0?(O=255/O,E[m]=(b*z>>Y)*O,E[m+1]=(x*z>>Y)*O,E[m+2]=(w*z>>Y)*O):E[m]=E[m+1]=E[m+2]=0,b-=M,x-=S,w-=T,_-=L,M-=W.r,S-=W.g,T-=W.b,L-=W.a,m=f+((m=h+X)<q?m:q)*i<<2,b+=$+=W.r=E[m],x+=D+=W.g=E[m+1],w+=P+=W.b=E[m+2],_+=I+=W.a=E[m+3],W=W.next,M+=C=H.r,S+=B=H.g,T+=K=H.b,L+=O=H.a,$-=C,D-=B,P-=K,I-=O,H=H.next,y+=i}u.putImageData(c,e,s)}}function a(t,e,s,i,a,l){if(!(isNaN(l)||l<1)){l|=0;var c,d=document.getElementById(t),u=d.getContext("2d");try{try{c=u.getImageData(e,s,i,a)}catch(p){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),c=u.getImageData(e,s,i,a)}catch(p){throw alert("Cannot access local image"),new Error("unable to access local image data: "+p)}}}catch(p){throw alert("Cannot access image"),new Error("unable to access image data: "+p)}var f,h,v,m,g,y,k,b,x,w,_,M,S,T,L,$,D,P,I,C,B=c.data,K=l+l+1,O=i-1,R=a-1,E=l+1,j=E*(E+1)/2,A=new n,q=A;for(v=1;v<K;v++)if(q=q.next=new n,v==E)var X=q;q.next=A;var V=null,U=null;k=y=0;var F=o[l],N=r[l];for(h=0;h<a;h++){for(T=L=$=b=x=w=0,_=E*(D=B[y]),M=E*(P=B[y+1]),S=E*(I=B[y+2]),b+=j*D,x+=j*P,w+=j*I,q=A,v=0;v<E;v++)q.r=D,q.g=P,q.b=I,q=q.next;for(v=1;v<E;v++)m=y+((O<v?O:v)<<2),b+=(q.r=D=B[m])*(C=E-v),x+=(q.g=P=B[m+1])*C,w+=(q.b=I=B[m+2])*C,T+=D,L+=P,$+=I,q=q.next;for(V=A,U=X,f=0;f<i;f++)B[y]=b*F>>N,B[y+1]=x*F>>N,B[y+2]=w*F>>N,b-=_,x-=M,w-=S,_-=V.r,M-=V.g,S-=V.b,m=k+((m=f+l+1)<O?m:O)<<2,T+=V.r=B[m],L+=V.g=B[m+1],$+=V.b=B[m+2],b+=T,x+=L,w+=$,V=V.next,_+=D=U.r,M+=P=U.g,S+=I=U.b,T-=D,L-=P,$-=I,U=U.next,y+=4;k+=i}for(f=0;f<i;f++){for(L=$=T=x=w=b=0,y=f<<2,_=E*(D=B[y]),M=E*(P=B[y+1]),S=E*(I=B[y+2]),b+=j*D,x+=j*P,w+=j*I,q=A,v=0;v<E;v++)q.r=D,q.g=P,q.b=I,q=q.next;for(g=i,v=1;v<=l;v++)y=g+f<<2,b+=(q.r=D=B[y])*(C=E-v),x+=(q.g=P=B[y+1])*C,w+=(q.b=I=B[y+2])*C,T+=D,L+=P,$+=I,q=q.next,v<R&&(g+=i);for(y=f,V=A,U=X,h=0;h<a;h++)m=y<<2,B[m]=b*F>>N,B[m+1]=x*F>>N,B[m+2]=w*F>>N,b-=_,x-=M,w-=S,_-=V.r,M-=V.g,S-=V.b,m=f+((m=h+E)<R?m:R)*i<<2,b+=T+=V.r=B[m],x+=L+=V.g=B[m+1],w+=$+=V.b=B[m+2],V=V.next,_+=D=U.r,M+=P=U.g,S+=I=U.b,T-=D,L-=P,$-=I,U=U.next,y+=i}u.putImageData(c,e,s)}}function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];t.exports={stackBlurImage:s,stackBlurCanvasRGBA:i,stackBlurCanvasRGB:a}},function(t,e,s){(function(e){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function a(t){var e=new RegExp("[?&]"+t+"=([^&]*)").exec(location.search);return e?decodeURIComponent(e[1]):null}function n(t){var e=location.search.substring(1);if(!e)return"";var s=["code","state","from","isappinstalled"],i={},a=void 0;return t&&(s=s.concat(t)),e.split("&").forEach(function(t){var e=t.split("="),s=(0,f["default"])(e,2),a=s[0],n=s[1];i[a]=n}),s.forEach(function(t){delete i[t]}),a=(0,u["default"])(i).map(function(t){return t+"="+i[t]}),a.length?"?"+a.join("&"):""}function o(t,e){var s=a("code"),i=sessionStorage.getItem("wx_code");if(i)l(i,t,e);else if(s){sessionStorage.setItem("wx_code",s);var o=a("target_url");location.replace(location.origin+location.pathname+(n("target_url")||"?")+(o?"#!"+o:""))}else r()}function r(){var t=n(),e=location.origin+location.pathname+t+location.hash.replace("#!",(t?"&":"?")+"target_url=");location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx668efc6f66f4f21f&redirect_uri="+e+"&response_type=code&scope=snsapi_userinfo&state=state#wechat_redirect")}function l(t,s,i){e.getJSON(h+"wechat_ktv/Home/WeChat/getopenid?code="+t,function(t){0===t.result?(s(t),c(),trak.init(v),trak.options.openId=t.openid):(sessionStorage.removeItem("wx_code"),r())})}function c(){e.getJSON(h+"wechat_ktv/Home/WeChat/getsign?url="+encodeURIComponent(location.href.split("#")[0]),function(t){1===t.status?(wx.config({debug:!1,appId:t.sign.appId,timestamp:t.sign.timestamp,nonceStr:t.sign.nonceStr,signature:t.sign.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","getLocation","openLocation","scanQRCode","closeWindow","chooseWXPay"]}),wx.ready(function(){window.isWXReady=!0,wx.onMenuShareTimeline(shareDataTL),wx.onMenuShareAppMessage(shareData),wx.onMenuShareQQ(shareData),wx.onMenuShareQZone(shareData)}),wx.error(function(t){window.isWXReady=!1,window.wxErrorMsg=t.errMsg})):alert(t.msg)})}var d=s(4),u=i(d),p=s(16),f=i(p),h="http://wechat.fusionmaster.net/",v="wx668efc6f66f4f21f",m=document.createElement("a");m.href="./assets/img/logo.png",window.defaultShareData={title:"用夜点一键预订KTV！要派对，不排队！",desc:"广州百家KTV一键预订，想嗨就嗨，无需等待！",titleTL:"用夜点一键预订KTV！想嗨就嗨，无需等待！",link:location.href.replace("?fromTabBar=1",""),imgUrl:m.href},window.shareData={title:defaultShareData.title,desc:defaultShareData.desc,link:defaultShareData.link,imgUrl:defaultShareData.imgUrl},window.shareDataTL={title:defaultShareData.titleTL,link:defaultShareData.link,imgUrl:defaultShareData.imgUrl},t.exports={authenticate:o}}).call(e,s(1))},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function a(t){function e(t,e,s){return t+":"+e+(s?(0,d["default"])(s).reduce(function(t,e){return t+e+"="+s[e]+"&"},"?"):"")}function s(t,s,i,a){var n=e(t,s,i);return r[n]=a}function i(t,s,i){var a=e(t,s,i);return!!r.hasOwnProperty(a)&&r[a]}function a(e,i,a,n){return new t.Promise(function(o,r){t.http[e](i,"get"===e?{params:a}:a).then(function(t){var l=t.data;if("string"==typeof l)try{l=JSON.parse(t.data)}catch(c){return r({msg:"response data is not valid JSON"}),!1}0===l.result?(n&&s(e,i,a,l),o(l)):450===l.result?(l.list=[],l.total=0,n&&s(e,i,a,l),o(l)):r(l)},function(t){r(t)})},c)}var n={get:function(e,s,n){if(n){var o=i("get",e,s);if(o)return new t.Promise.resolve(o,c)}return a("get",e,s,n)},post:function(e,s,n){if(n){var o=i("post",e,s);if(o)return new t.Promise.resolve(o,c)}return a("post",e,s,n)},oAuthLogin:function(e){return a("post","user/oauthlogin",e).then(function(e){return t.http.headers.common["X-KTV-User-Token"]=e.token,e},function(t){throw new Error(t.msg||"登录失败")})},getUserInfo:function(e){return e&&(0,d["default"])(t.prototype.$user).length>0?new t.Promise.resolve(t.prototype.$user,c):a("get","user/info").then(function(e){return t.prototype.$user=e,e.lat!=-1&&e.lng!=-1&&sessionStorage.setItem("location",(0,l["default"])({lat:e.lat,lng:e.lng})),e})},updateUserInfo:function(t){return a("post","user/info",t)},sendCode:function(e){return p["default"].isMobile(e)?a("post","user/sendcode",{mobile:e}).then(function(t){alert(t.msg)},function(t){alert(t.msg||"发送失败")}):(alert("请输入手机号"),new t.Promise.reject("请输入手机号",c))},verifyCode:function(t,e){return a("post","user/phoneverify",{mobile:t,verifycode:e})},wechatPay:function(e){return new t.Promise(function(t,s){window.isWXReady?a("post","wechat_ktv/Pay/Index/payapi",{openid:this.$user.openid,trade_no:e}).then(function(e){var i=e.signinfo.jsApiParameters;wx.chooseWXPay({appId:i.appId,timestamp:i.timeStamp,nonceStr:i.nonceStr,"package":i["package"],signType:i.signType,paySign:i.paySign,success:t,fail:function(t){return s({msg:"支付失败"})},cancel:function(t){return s({msg:"支付取消"})}})},s):s({msg:"支付失败：未加载微信 JSSDK"})},c)}},r={},c=void 0;(0,o["default"])(t,{api:{get:function(){return c=this,n}}}),(0,o["default"])(t.prototype,{$api:{get:function(){return c=this,n}}})}var n=s(80),o=i(n),r=s(6),l=i(r),c=s(4),d=i(c),u=s(2),p=i(u);t.exports=a},function(t,e){"use strict";function s(t){t.prototype.$handleLink=function(t,e){this.$trackEvent(e,"click",t),0===t.indexOf("#!")?this.$router.go(t):setTimeout(function(){location.href=t},300)}}t.exports=s},function(t,e,s){(function(e){"use strict";function s(t,s){function i(){var e=n.splice(0,n.length);e.length>0&&t.api.post("tongji/click",{click:e}),setTimeout(i,1e4)}function a(t){var e=location.hash.substring(2).split("?")[0],s=t.pageY;o&&o.contains(t.target)&&(s=-(window.innerHeight-(t.pageY-document.body.scrollTop))),r&&r.contains(t.target)&&(s=t.pageY-document.body.scrollTop),n.push({url:e,x:t.pageX,y:s})}var n=[],o=void 0,r=void 0;t.prototype.$trackPageview=function(e){t.api.post("tongji/browse",{browse:{url:e.replace("?fromTabBar=1","")}}),"undefined"!=typeof _hmt&&_hmt.push(["_trackPageview",e]),"undefined"!=typeof trak&&trak.event({category:"_trackPageview",action:"PageView",data:{url:e}})},t.prototype.$trackEvent=function(t,e,s,i){if("undefined"!=typeof _hmt&&_hmt.push(["_trackEvent",t,e,s,i]),"undefined"!=typeof trak){var a={category:t,action:e,data:{}};s&&(a.data.label=s),i&&(a.data.value=i),trak.event(a)}console.info("trackEvent",t,e,s,i)},t.directive("track-link",{bind:function(){var t=this,s=this.expression.split(",");e(this.el).on("click.track",function(){return t.vm.$trackEvent.apply(t.vm,s),setTimeout(function(){location.href=t.el.href},300),!1})},unbind:function(){e(this.el).off("click.track")}}),s.afterEach(function(e){t.prototype.$trackPageview(e.to.path),setTimeout(function(){o=document.getElementById("tab-bar"),r=document.querySelector(".masthead")},1e3)}),window.addEventListener("unload",i,!1),document.addEventListener("click",a,!1),setTimeout(i,1e4)}t.exports=s}).call(e,s(1))},function(t,e){"use strict";function s(t){t.prototype.$user={}}t.exports=s},function(t,e){"use strict";function s(t,e){t.prototype.$wxShare=function(t){window.shareData.title=t.title,window.shareData.desc=t.desc,window.shareDataTL.title=t.titleTL||t.title,t.imgUrl&&(window.shareData.imgUrl=window.shareDataTL.imgUrl=t.imgUrl),t.link&&(window.shareData.link=window.shareDataTL.link=t.link)},e.afterEach(function(){window.shareData.title=window.defaultShareData.title,window.shareData.desc=window.defaultShareData.desc,window.shareDataTL.title=window.defaultShareData.titleTL,window.shareData.imgUrl=window.shareDataTL.imgUrl=window.defaultShareData.imgUrl,window.shareData.link=window.shareDataTL.link=location.href.replace("?fromTabBar=1","")})}t.exports=s},function(t,e,s){t.exports={"default":s(83),__esModule:!0}},function(t,e,s){t.exports={"default":s(84),__esModule:!0}},function(t,e,s){t.exports={"default":s(86),__esModule:!0}},,,function(t,e,s){s(39),s(38),t.exports=s(109)},function(t,e,s){s(39),s(38),t.exports=s(110)},function(t,e,s){var i=s(3),a=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return a.stringify.apply(a,arguments)}},function(t,e,s){s(112);var i=s(3).Object;t.exports=function(t,e){return i.defineProperties(t,e)}},,,,function(t,e){t.exports=function(){}},,,function(t,e,s){t.exports=s(8).document&&document.documentElement},,,function(t,e,s){"use strict";var i=s(99),a=s(33),n=s(34),o={};s(10)(o,s(5)("iterator"),function(){return this}),t.exports=function(t,e,s){t.prototype=i(o,{next:a(1,s)}),n(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=!0},function(t,e,s){var i=s(12),a=s(31),n=s(29),o=s(20)("IE_PROTO"),r=function(){},l="prototype",c=function(){var t,e=s(28)("iframe"),i=n.length,a=">";for(e.style.display="none",s(93).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object</script"+a),t.close(),c=t.F;i--;)delete c[l][n[i]];return c()};t.exports=Object.create||function(t,e){var s;return null!==t?(r[l]=i(t),s=new r,r[l]=null,s[o]=t):s=c(),void 0===e?s:a(s,e)}},function(t,e,s){var i=s(14),a=s(36),n=s(20)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),i(t,n)?t[n]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},,,function(t,e,s){t.exports=s(10)},function(t,e,s){var i=s(21),a=s(17);t.exports=function(t){return function(e,s){var n,o,r=String(a(e)),l=i(s),c=r.length;return l<0||l>=c?t?"":void 0:(n=r.charCodeAt(l),n<55296||n>56319||l+1===c||(o=r.charCodeAt(l+1))<56320||o>57343?t?r.charAt(l):n:t?r.slice(l,l+2):(n-55296<<10)+(o-56320)+65536)}}},,,,function(t,e,s){var i=s(26),a=s(5)("iterator"),n=s(11);t.exports=s(3).getIteratorMethod=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||n[i(t)]}},function(t,e,s){var i=s(12),a=s(108);t.exports=s(3).getIterator=function(t){var e=a(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},function(t,e,s){var i=s(26),a=s(5)("iterator"),n=s(11);t.exports=s(3).isIterable=function(t){var e=Object(t);return void 0!==e[a]||"@@iterator"in e||n.hasOwnProperty(i(e))}},function(t,e,s){"use strict";var i=s(90),a=s(97),n=s(11),o=s(22);t.exports=s(30)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,s=this._i++;return!t||s>=t.length?(this._t=void 0,a(1)):"keys"==e?a(0,s):"values"==e?a(0,t[s]):a(0,[s,t[s]])},"values"),n.Arguments=n.Array,i("keys"),i("values"),i("entries")},function(t,e,s){var i=s(13);i(i.S+i.F*!s(7),"Object",{defineProperties:s(31)})},,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports=' <div class=city-selector> <input type=text :value=province v-el:province> <input type=text placeholder=省 @click=provinceScroller.show() v-model=province onmousedown="return false" readonly=readonly> <input type=text :value=city v-el:city> <input type=text placeholder=市 @click=cityScroller.show() v-model=city onmousedown="return false" readonly=readonly> <input type=text :value=district v-el:district> <input type=text placeholder=区 @click=districtScroller.show() v-model=district onmousedown="return false" readonly=readonly> </div> '},function(t,e){t.exports=" <div class=flash-message v-show=!hidden transition=fade> <div class=flash-message-dialog> <div class=icon v-if=icon :class=\"'icon-'+icon\"></div> <div class=content>{{{message}}}<slot></slot></div> <button type=button class=btn @click=hide>{{btnText}}</button> </div> </div> "},function(t,e){t.exports=" <ul class=list-view> <slot></slot> </ul> "},function(t,e){t.exports=' <div class=loading-layer :class="{\'inline-mode\':inlineMode}"> <div class=loading-layer-content> <span class="icon icon-spinner"></span> <p class=text>正在加载…</p> </div> </div> '},function(t,e){t.exports=' <div class=modal :class="{\'has-title\':title}" v-show=show transition=modal> <div class=modal-dialog> <span class=close @click=close v-if=closeable><span class="icon icon-close"></span></span> <div class=modal-body> <h4 class=modal-title v-if=title>{{title}}</h4> <slot></slot> </div> <div class=modal-footer v-if=showBtn> <button type=button class=btn @click="submitHandler | debounce 300" :disabled=btnDisabled>{{btnText}}</button> </div> </div> </div> '},function(t,e){t.exports=' <div class=c-rating> <span class=star :class="{active:i<value}" v-for="i in max" :style="{fontSize:size+\'px\', color:color}" :data-stars=i+1 @touchstart=handleTouchStart($event) @touchmove.prevent=handleTouchMove($event)> <svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 16"><path d="M8 12.4l-4.39 2.29.87-4.84L1 6.43l4.79-.71L8 1.31l2.18 4.4 4.82.71-3.48 3.42.87 4.85z"/></svg> </span> </div> '},function(t,e){t.exports=" <div class=screen-message :class=\"{'inline-mode':inlineMode}\"> <div class=screen-message-dialog> <span class=icon></span> <p class=content>{{message}}</p> <small class=info v-if=info>{{info}}</small> </div> </div> "},function(t,e){t.exports=' <div class=simple-slider> <figure class=slide v-if="slides.length==1" :style="slides[0].pic | backgroundImage" @click=click(slides[0].link)></figure> <ul class=slider-carousel v-if="slides.length>1" v-el:carousel> <li class=slide :style="slides[slides.length-1].pic | backgroundImage" @click=click(slides[slides.length-1].link)></li> <li class=slide v-for="slide in slides" :style="slide.pic | backgroundImage" @click=click(slide.link)></li> <li class=slide :style="slides[0].pic | backgroundImage" @click=click(slides[0].link)></li> </ul> <nav class=slider-indicators v-if="slides.length>1"><span v-for="slide in slides" :class="{active:$index==current}" :title=$index+1></span></nav> </div> '},function(t,e){t.exports=' <div class=spinbox> <div class=btn @click=adjust(-this.step)><span class="icon icon-minus"></span></div> <div><input type=number :min=min :max=max :step=step :value=value v-el:input></div> <div class=btn @click=adjust(this.step)><span class="icon icon-plus"></span></div> </div> '},function(t,e){t.exports=' <nav id=tab-bar v-show=show> <span v-for="item in items" :class="\'item-\'+item.id"> <a v-if="item.link.indexOf(\'#!\')===0" v-link="{path:item.link.substring(2),query:{fromTabBar:1},activeClass:\'active\'}"> <span class=icon :class="\'icon-\'+item.id"></span> <span class=text>{{item.name}}</span> </a> <a v-else :href=item.link> <span class=icon :class="\'icon-\'+item.id"></span> <span class=text>{{item.name}}</span> </a> </span> </nav> '},function(t,e){t.exports=" <router-view transition=fade transition-mode=out-in></router-view> <tab-bar></tab-bar> "},function(t,e){t.exports=' <div class=page-book> <section class=section-times> <h2 class=section-title><span class="icon icon-clock"></span>选择到店时间</h2> <div class=section-bd> <ul> <li v-for="time in arrivalTimeList | limitBy arrivalTimeListLimit" :class="{active:time==startTime}" @click="startTime=time"><span>{{time | morrow arrivalTimeList[0]}}</span></li> </ul> <div class=more @click="arrivalTimeListLimit=99" v-if="arrivalTimeList.length>8 && arrivalTimeListLimit==8">更多进场时间</div> <div class=less @click="arrivalTimeListLimit=8" v-if="arrivalTimeListLimit==99">收起</div> </div> </section> <section class=section-baseinfo> <div class=section-bd> <h3 class=name>{{ktv.xktvname}}</h3> <p class=meta>{{orderMeta}}</p> </div> </section> <section class=section-package v-if=pkg> <h2 class=section-title><span class="icon icon-beer"></span>已选酒水套餐</h2> <div class="section-bd active" :class={huanchang:pkg.huanchang}> <span class=check></span> <h5 class=name>{{pkg.pre_txt}}{{pkg.name}}</h5> <div class=secrow v-if=!pkg.huanchang&&!ktv.online_pay> <span class=orig-price>原价{{pkg.price}}</span> <span class=yd-price>夜点价¥{{pkg.price_yd}}</span> </div> </div> </section> <section class=section-payment v-if=pkg&&!pkg.huanchang&&ktv.online_pay> <div class=section-bd> <ul> <li :class={active:onlinePay} @click="onlinePay=true"> <span class=check></span> <strong class=method>在线付</strong> <span class=price>¥{{pkg.price_yd_online}}</span> </li> <li :class={active:!onlinePay} @click="onlinePay=false"> <span class=check></span> <strong class=method>到店付</strong> <span class=price>¥{{pkg.price_yd}}</span> </li> </ul> </div> </section> <section class=section-coupon v-if=ktv.sjq> <h2 class=section-title><span class="icon icon-djq"></span>选择兑酒券</h2> <div class=section-bd :class={empty:!couponList.length} @click=$refs.couponModal.open()> <span>{{couponText}}</span> </div> </section> <section class=section-rules v-if=terms> <h2 class=section-title><span class="icon icon-tips"></span>小提示</h2> <div class=section-bd> <ol v-if=onlinePayActive> <li v-for="term in termsForOnlinePay">{{term}}</li> </ol> <ol v-else> <li v-for="term in terms">{{term}}</li> </ol> </div> </section> <section class=section-mobile> <div class=section-bd @click=$refs.editMobileModal.open()> <span class="icon icon-mobile"></span> <span class=label>手机</span> <span class=value><input type=text class=penone placeholder=请先绑定您的手机号码 v-model=userMobile></span> </div> </section> <p class=remark>预订说明: 通过夜点预订KTV，只需要在夜点提交订单，达到KTV现场支付，即可享受夜点最强黄金档的价格优惠。</p> <button type=button class="btn-float btn-pay" :disabled=isInvalidOrder @click=submitOrder(true) v-el:pay-btn v-if=onlinePayActive><span></span></button> <button type=button class="btn-float btn-order" :disabled=isInvalidOrder @click=submitOrder(false) v-el:submit-btn v-else><span></span></button> <flash-message v-ref:flash-message></flash-message> <loading v-if="loadingStatus==1"></loading> <screen-message v-if="loadingStatus==-1" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> <modal id=coupon-modal title=选择兑酒券 :closeable=false :submit=updateCoupon v-ref:coupon-modal> <ul class=coupon-list> <li v-for="cp in couponList" :class="{active:coupon==cp}" @click="coupon=cp" :style="{backgroundImage:\'url(\'+(cp.status===0?cp.img:cp.img_disable)+\')\'}"> <span class=check></span> <div class=content> <h3 class=name>{{cp.name}}</h3> <p class=date>有效期<br>{{cp.start_time | date \'yyyy/MM/dd\'}} 至 {{cp.expire_time | date \'yyyy/MM/dd\'}}</p> </div> </li> <li class=none :class="{active:coupon==couponNone}" @click="coupon=couponNone"><span class=check></span> 不使用任何兑酒券</li> </ul> <h4 class=rule-title>兑酒券使用说明</h4> <ol class=rule-content> <li>每次预订只能使用一张兑酒券。</li> <li>啤酒的品牌和数量以兑酒券的标识为准。</li> <li>兑酒券的使用时间以兑酒券的标识为准。</li> <li>通过完成订单所获得的兑酒券，次日可用，有效期14天。</li> <li>以任何形式取消订单，兑酒券都将会返还到用户账户，下次预订还可继续使用。</li> <li>每位用户每天可使用两张兑酒券。</li> </ol> </modal> <modal id=edit-mobile-modal title=绑定手机号码 :btn-disabled=isInvalidMobileForm :submit=updateMobile v-ref:edit-mobile-modal> <list-view class=no-arrow> <li class=item-phone><a @click=$els.phone.focus()><span class="icon icon-phone"></span><input type=tel placeholder=手机 v-model=editMobile.mobile maxlength=11 v-el:phone></a></li> <li class=item-captcha><a><input type=number placeholder=验证码 maxlength=6 v-model=editMobile.captcha><button type=button class="btn btn-sendcaptcha" @click=$api.sendCode(editMobile.mobile)>发送验证码</button></a></li> </list-view> </modal> </div> '},function(t,e){t.exports=' <div class=page-couponlist> <header class=masthead v-el:masthead> <h1>我的兑酒券</h1> </header> <ul id=coupon-list> <li v-for="coupon in list" class=status-{{coupon.status}} :style="{backgroundImage:\'url(\'+(coupon.status===0?coupon.img:coupon.img_disable)+\')\'}"> <div class=content> <h3 class=name>{{coupon.name}}</h3> <p class=date>有效期<br>{{coupon.start_time | date \'yyyy/MM/dd\'}} 至 {{coupon.expire_time | date \'yyyy/MM/dd\'}}</p> <span class=status>{{COUPON_STATUS[coupon.status]}}</span> </div> </li> </ul> <loading v-show="loadingStatus==1" :inline-mode="list.length>0"></loading> <screen-message v-if="loadingStatus==-1" :inline-mode="list.length>0" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> <screen-message v-if="loadingStatus==2&&list.length==0" message=兑酒券为空></screen-message> </div> '},function(t,e){t.exports=' <div class=page-events> <ul class=blurred-background v-el:background> <li v-for="event in events" :class="{active:$index==currentBg}"></li> </ul> <div class=slider> <ul class=carousel> <li class=slide> <div class=card :style="events[events.length-1].pic | backgroundImage"></div> </li> <li class=slide v-for="event in events"> <a class=card @click="$handleLink(event.link, \'events\')" :style="event.pic | backgroundImage"></a> </li> <li class=slide> <div class=card :style="events[0].pic | backgroundImage"></div> </li> </ul> <nav class=pagination> <span v-for="event in events" :class="{active:$index==current}" :title=$index+1></span> </nav> </div> </div> '},function(t,e){t.exports=' <div class=page-favorite> <ul class=ktv-list> <li v-for="ktv in list" :style="ktv.piclist[0].bigpicurl | backgroundImage"> <a v-link="{ name: \'detail\', params: { id: ktv.xktvid }}"> <span v-if=ktv.taocan class="stamp stamp-goldpkg"></span> <div class=content> <div class=marks> <span v-if=ktv.sjq class="mark mark-djq"></span> <span v-if=ktv.online_pay class="mark mark-zxf"></span> </div> <h3 class=title>{{ktv.xktvname}}</h3> <span class=rating><span class=full></span><span class=stars :style="{width:ktv.rate*20+\'%\'}"></span></span> <p class=address>{{ktv.address}}</p> <span class=distance v-if="ktv | distance">{{ktv | distance}}KM</span> </div> </a> </li> </ul> <loading v-show="loadingStatus==1" :inline-mode="list.length>0"></loading> <screen-message v-if="loadingStatus==-1" :inline-mode="list.length>0" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> <screen-message v-if="loadingStatus==2&&list.length==0" message=收藏为空></screen-message> </div> '},function(t,e){t.exports=' <div class=page-gift> <figure class=gift-pic v-adaptive-background=gift.product_mainpic></figure> <div class=gift-content v-if=gift.product_id> <section class=gift-info> <span class=points>{{gift.productsale_points}} 积分</span> <h2 class=name>{{gift.productsale_name}}</h2> <div class=desc>{{{gift.productsale_cont1}}}</div> </section> <section class="gift-exchange clearfix"> <span class=points>需要积分 {{gift.productsale_points}}</span> <h3 class=title>兑换数量</h3> <span class=quantity v-if=!gift.real>1</span> <spin-box v-if=gift.real :max=maxQuantity :value.sync=order.quantity></spin-box> <span class=my-points>我的当前积分 {{userPoints}}</span> </section> <button type=button class=btn-float @click=$refs.exchangeModal.open() v-if="userPoints>=gift.productsale_points">立即兑换</button> <button type=button class=btn-float disabled=disabled v-else>积分不足</button> </div> <modal id=exchange-modal class=red-placeholder :btn-disabled=isInvalidOrder :submit=submitOrder btn-text=下一步 v-ref:exchange-modal> <h4 class=gift-name>{{gift.productsale_name}}</h4> <div class=gift-quantity> <span class=points>需要积分 {{gift.productsale_points}}</span> <h3 class=title>兑换数量</h3> <spin-box v-if=gift.real :max=maxQuantity :value.sync=order.quantity></spin-box> <span class=quantity v-else>1</span> </div> <list-view class=no-arrow> <li v-if=gift.real><a @click=$els.name.focus()><span class="icon icon-user"></span><input type=text placeholder=收件人 v-model=order.name v-el:name></a></li> <li><a @click=$els.mobile.focus()><span class="icon icon-phone"></span><input type=tel placeholder=手机 v-model=order.mobile maxlength=11 v-el:mobile></a></li> <li class=item-captcha v-if=!gift.real><a><input type=number placeholder=验证码 maxlength=6 v-model=order.captcha><button type=button class="btn btn-sendcaptcha" @click=$api.sendCode(order.mobile)>发送验证码</button></a></li> <li class=item-city v-if=gift.real><a><city-selector :province.sync=order.province :city.sync=order.city :district.sync=order.district></city-selector></a></li> <li v-if=gift.real><a @click=$els.address.focus()><span class="icon icon-home"></span><input type=text placeholder=收件地址 v-model=order.address v-el:address></a></li> </list-view> </modal> <loading v-if="loadingStatus==1"></loading> <screen-message v-if="loadingStatus==-1" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> </div> '},function(t,e){t.exports=' <div class=page-ktvdetail> <simple-slider class=slider :slides="ktv.piclist | formatSlides"></simple-slider> <section class=baseinfo> <span class=distance v-if="ktv | distance">{{ktv | distance}}KM</span> <h2 class=name>{{ktv.xktvname}}</h2> <span class=rating><span class=full></span><span class=stars :style="{width:ktv.rate*20+\'%\'}"></span></span> <div class=events @click="showEventsLayer=true" v-if="ktv.taocan || ktv.sjq"> <table> <tbody> <tr v-if=ktv.taocan> <th><span class="icon icon-goldpkg"></span></th> <td>夜点承诺始终提供价格最优的KTV黄金档套餐。通过夜点预订KTV，即可享受全城重点KTV的会员价优惠。<span class=more>更多>></span></td> </tr> <tr v-if=ktv.sjq> <th><span class="icon icon-djq"></span></th> <td>只要通过夜点预订KTV即可获得一张含6罐百威啤酒的二次兑酒券。下次预订KTV的时候即可使用。<span class=more>更多>></span></td> </tr> <tr v-if=ktv.online_pay> <th><span class="icon icon-zxf"></span></th> <td>无<span class=more>更多>></span></td> </tr> </tbody> </table> </div> <ul class=ranklist> <li><span class="icon icon-decoration"></span><span class=text>环境{{ktv.DecorationRating}}星</span></li> <li><span class="icon icon-sound"></span><span class=text>音效{{ktv.SoundRating}}星</span></li> <li><span class="icon icon-service"></span><span class=text>服务{{ktv.ServiceRating}}星</span></li> <li><span class="icon icon-food"></span><span class=text>美食{{ktv.FoodRating}}星</span></li> </ul> <p class=desc>{{ktv.description}}</p> <ul class=services v-if=ktv.devices> <li v-for="device in ktv.devices | limitBy deviceLimit"><span class=icon :class="\'icon-\'+device.toLowerCase()"></span><span class=text>{{device | deviceName}}</span></li> <li class=more v-if="ktv.devices.length>4" @click=$refs.servicesModal.open()>+{{ktv.devices.length-3}}<span class="icon icon-more"></span></li> </ul> </section> <list-view class=bg v-if=ktv.xktvid> <li><a :href="\'tel:\'+ktv.telephone"><span class="icon lineicon-phone"></span>{{ktv.telephone}}</a></li> <li class=item-address><a @click=openMap><span class="icon lineicon-location"></span><span class=value>{{ktv.address}}</span></a></li> </list-view> <section class=business v-if=ktv.openhours> <span class=openhours>营业时间 周一至周日 {{ktv.openhours}}</span> <span class=responsetime>平均等待时间：{{ktv.responsetime}}分钟</span> </section> <div v-if="tcInfo && tcInfo.courses.length && tcInfo.roomtypes.length"> <h4 class=booking-title>KTV预订</h4> <div class=booking-table> <div class=booking-table-inner> <div class=days> <ul> <li v-for="day in tcInfo.days" :class="{active:bookDay==day}" @click="bookDay=day">{{day.line1}}<em>{{day.line2}}</em></li> </ul> </div> <ul class=courses> <li v-for="course in filteredCourses | limitBy 3" :class="{active:bookCourse==course,disabled:course.expired}" @click="bookCourse=course">{{course.name}}<em>{{course.line2}}</em></li> <li class=more @click=$refs.coursesModal.open()></li> </ul> <ul class=rooms> <li v-for="room in tcInfo.roomtypes | limitBy 3" :class="{active:bookRoomType==room}" @click="bookRoomType=room">{{room.name}}<em>（{{room.desc}}）</em></li> <li class=more @click=$refs.roomtypesModal.open()></li> </ul> </div> </div> <div class=booking-packages :class={loading:loadingPackages}> <div class=goldpkg v-if="ktv.taocan && packages.length"> <h4 class=packages-title><span></span></h4> <ul> <li v-for="pkg in packages | limitBy packagesLimit" :class="{active:bookPkg==pkg}" @click="bookPkg=pkg"> <span class=check></span> <h5 class=name>{{pkg.pre_txt}}{{pkg.name}}</h5> <div class=secrow> <span v-if=ktv.online_pay> <span class="price price-dd">到店价¥{{pkg.price_yd}}</span> <span class="price price-online">在线价¥{{pkg.price_yd_online}}</span> </span> <span v-else> <span class="price price-orig">原价{{pkg.price}}</span> <span class="price price-yd">夜点价¥{{pkg.price_yd}}</span> </span> <button type=button class="btn btn-booking" @click=goBook(pkg)>预订</button> </div> </li> </ul> <div class=more @click="packagesLimit=99" v-if="packages.length>3 && packagesLimit==3">更多</div> <div class=less @click="packagesLimit=3" v-if="packagesLimit==99">收起</div> </div> <div class=haunchangpkg v-if=hcPackages.length> <h4 class="packages-title huanchang"><span></span></h4> <ul> <li v-for="pkg in hcPackages | limitBy hcPackagesLimit" :class="{active:bookPkg==pkg}" @click="bookPkg=pkg"> <span class=check></span> <h5 class=name>{{pkg.name}}</h5> <button type=button class="btn btn-booking" @click=goBook(pkg)>预订</button> </li> </ul> <div class=more @click="hcPackagesLimit=99" v-if="hcPackages.length>3 && hcPackagesLimit==3">更多</div> <div class=less @click="hcPackagesLimit=3" v-if="hcPackagesLimit==99">收起</div> </div> </div> <button type=button class="btn-float btn-book" :disabled=!bookPkg @click=goBook><span></span></button> <modal id=courses-modal title=选择时间段 :closeable=false v-ref:courses-modal> <list-view> <li v-for="course in tcInfo.courses | orderBy \'weight\'" :class="{active:bookCourse==course,disabled:course.expired}" @click="bookCourse=course">{{course.name}} {{course.line2}}</li> </list-view> </modal> <modal id=roomtypes-modal title=选择房间类型 :closeable=false v-ref:roomtypes-modal> <list-view> <li v-for="room in tcInfo.roomtypes | orderBy \'weight\'" :class="{active:bookRoomType==room}" @click="bookRoomType=room">{{room.name}} {{room.desc}}</li> </list-view> </modal> </div> <list-view class=bg v-if=ktv.xktvid> <li><a @click=doFavorite><span class="icon lineicon-favorite"></span>收藏</a></li> <li><a @click=$refs.feedbackModal.open()><span class="icon lineicon-feedback"></span>纠错</a></li> </list-view> <div id=events-layer class=flash-message v-if=showEventsLayer transition=fade v-el:events-layer> <div class=flash-message-dialog> <ul> <li class=section v-if=ktv.taocan> <span class="icon icon-goldpkg"></span> <h4>最强黄金档说明</h4> <ul> <li>夜点承诺始终提供价格最优的KTV黄金档套餐。通过夜点预订KTV，即可享受全城重点KTV的会员价优惠。</li> </ul> </li> <li class=section v-if=ktv.sjq> <span class="icon icon-djq"></span> <h4>兑酒券使用说明</h4> <ol> <li>在预订KTV的时候选择使用兑酒券，到店后，由前台收银员扫描订单中的二维码，即可确认到店并获得相应数量的啤酒。</li> <li>每次预订只能使用一张兑酒券。</li> <li>啤酒的品牌和数量以兑酒券的标识为准。</li> <li>兑酒券的使用时间以兑酒券的标识为准。</li> <li>通过完成订单所获得的兑酒券，次日可用，有效期14天。</li> <li>以任何形式取消订单，兑酒券都将会返还到用户账户，下次预订还可继续使用。</li> <li>每位用户每天可使用两张兑酒券。</li> </ol> </li> <li class=section v-if=ktv.online_pay> <span class="icon icon-zxf"></span> <h4>在线付说明</h4> <ol> <li>无</li> </ol> </li> <li class=section v-if=ktv.taocan> <h4>预订说明</h4> <ul> <li>通过夜点预订KTV，只需要在夜点提交订单，到达KTV现场支付，即可享受夜点最强黄金档的价格优惠。</li> </ul> </li> </ul> <button type=button class=btn @click="showEventsLayer=false">确定</button> </div> </div> <a href=http://letsktv.chinacloudapp.cn/wechat_ktv/home/event/enter class=feb v-track-link.literal=FEB,Click,兑酒券疯抢中></a> <modal id=favorite-modal class=msg v-ref:favorite-modal> <span class="icon icon-favorite"></span> <p>{{ktv.xktvname}}</p> <p v-show=favorite>已添加至 <a>我的收藏</a></p> <p v-else>已取消收藏</p> </modal> <modal id=services-modal :show-btn=false v-if=ktv.devices v-ref:services-modal> <table> <tbody> <tr v-for="device in ktv.devices"> <td class=col-icon><span class=icon :class="\'icon-\'+device.toLowerCase()"></span></td> <td class=col-name>{{device | deviceName}}</td> </tr> </tbody> </table> </modal> <modal id=feedback-modal :btn-disabled="selectedErrors.length==0" :submit=submitFeedback btn-text=提交 v-ref:feedback-modal> <list-view> <li v-for="error in feedbackErrors"><a :class="{selected:error.selected==true}" @click="error.selected=!error.selected"><span class=icon :class="\'icon-\'+error.id"></span>{{error.msg}}</a></li> </list-view> </modal> <flash-message v-ref:flash-message></flash-message> <loading v-if="loadingStatus==1"></loading> <screen-message v-if="loadingStatus==-1" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> </div> ';
},function(t,e){t.exports=' <div class=page-ktvlist :class="{loading:loadingStatus==1}"> <header class="masthead list-selector" v-el:masthead> <ul class=selector-triggers> <li :class="{active:activeLayer==\'area\'}" @click="activeLayer=activeLayer==\'area\'?false:\'area\'"><span class=selector-trigger><span class=text>{{areaText}}</span><span class="icon icon-arrow"></span></span></li> <li :class="{active:activeLayer==\'sort\'}" @click="activeLayer=activeLayer==\'sort\'?false:\'sort\'"><span class=selector-trigger><span class=text>{{sortKey.name}}</span><span class="icon icon-arrow"></span></span></li> <li :class="{active:activeLayer==\'event\'}" @click="activeLayer=activeLayer==\'event\'?false:\'event\'"><span class=selector-trigger><span class=text>优惠筛选</span><span class="icon icon-arrow"></span></span></li> </ul> <span class=search-trigger @click=showSearchform><span class="icon icon-search"></span></span> <form class=search-form v-show="activeLayer==\'search\'" transition=searchform @submit.prevent=doSearch> <input type=search autocomplete=off placeholder=搜索… v-model=keyword v-el:search-input> <button type=submit><span class="icon icon-search"></span></button> </form> <div class="selector-droplist droplist-filter" v-show="activeLayer==\'area\'" transition=flip> <nav class=tab> <a :class="{active:activePanel==\'city\'}" @click="activePanel=\'city\'">城市</a> <a :class="{active:activePanel==\'area\'}" @click="activePanel=\'area\'">商区</a> <a :class="{active:activePanel==\'distance\'}" @click="activePanel=\'distance\'">附近</a> </nav> <div class=filter-panels> <ul class=city-list v-show="activePanel==\'city\'"> <li class=gps :class="{na:!gpsCity.code,active:activeCity==gpsCity}" @click="activeCity=gpsCity,activePanel=\'area\'">GPS定位：{{gpsCity.name}}</li> <li v-for="city in cityList" :class="{active:activeCity==city}" @click="activeCity=city,activePanel=\'area\'">{{city.name}}</li> </ul> <ul class=area-list v-show="activePanel==\'area\'"> <li class=all :class="{active:filterKey==allAreas}" @click="filterKey=allAreas,activeLayer=false">{{allAreas.name}}</li> <li v-for="area in areaList" :class="{active:filterKey==area}" @click="filterKey=area,activeLayer=false">{{area.name}}</li> </ul> <ul class=distance-list v-show="activePanel==\'distance\'"> <li v-for="distance in distanceList" :class="{active:filterKey==distance}" @click="filterKey=distance,activeLayer=false">{{distance.name}}</li> </ul> </div> </div> <div class="selector-droplist droplist-sort" v-show="activeLayer==\'sort\'" transition=flip> <ul> <li v-for="type in sortTypes" :class="{active:sortKey==type}" @click="sortKey=type">{{type.name}}</li> </ul> </div> <div class="selector-droplist droplist-event" v-show="activeLayer==\'event\'" transition=flip> <ul class=event-list> <li v-for="event in eventTypes" :class={active:event.selected} @click="event.selected=!event.selected">{{event.name}}</li> </ul> <span class=ok @click="activeLayer=false,updateList()">确定</span> </div> </header> <div id=banner> <div class=banner-inner> <simple-slider id=banner-slider :slides=banners :click=handleBanner :auto=true></simple-slider> </div> </div> <section class=ktv-list-container> <ul class=ktv-list> <li v-if=stickKtv :style="stickKtv.pic | backgroundImage"> <a @click="$handleLink(stickKtv.link, \'stick\')"> <div class=content> <h3 class=title>{{stickKtv.event_name}}</h3> <span class=rating><span class=full></span><span class=stars :style="{width:stickKtv.rating*20+\'%\'}"></span></span> <p class=address>{{stickKtv.address}}</p> <span class=distance v-if="stickKtv.distance != null">{{stickKtv.distance}}KM</span> </div> </a> </li> <li v-for="ktv in list | orderBy orderKey -1 | limitBy currLimit" track-by=xktvid :style="ktv.piclist[0].bigpicurl | backgroundImage"> <a v-link="{ name: \'detail\', params: { id: ktv.xktvid }}"> <span v-if=ktv.taocan class="stamp stamp-goldpkg"></span> <div class=content> <div class=marks> <span v-if=ktv.sjq class="mark mark-djq"></span> <span v-if=ktv.online_pay class="mark mark-zxf"></span> </div> <h3 class=title>{{ktv.xktvname}}</h3> <span class=rating><span class=full></span><span class=stars :style="{width:ktv.rate*20+\'%\'}"></span></span> <p class=address>{{ktv.address}}</p> <span class=distance v-if="ktv.distance != null">{{ktv.distance}}KM</span> </div> </a> </li> </ul> <loading v-show="loadingStatus==1" :inline-mode="list.length>0"></loading> <screen-message v-if="loadingStatus==-1" :inline-mode="list.length>0" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> <screen-message v-if="loadingStatus==2&&list.length==0" message=结果为空></screen-message> </section> <div class=dimmer v-show=activeLayer @click="activeLayer=false" transition=fade></div> </div> '},function(t,e){t.exports=" <div class=page-map> <header class=map-info><span class=icon></span><p class=address>{{$route.query.address}}</p></header> <div class=map-container><iframe :src=mapUrl></iframe></div> </div> "},function(t,e){t.exports=' <div class=page-giftorder> <figure class=gift-pic v-adaptive-background=order.sellordergoods_mainpic></figure> <section class=giftorder-detail> <h2 class=name>{{order.sellordergoods_name}}</h2> <ul class=numbers> <li><b class=value>{{order.sellordergoods_num}}</b><small class=label>兑换数量</small></li> <li><b class=value>{{order.sellorder_pointdeduction}}</b><small class=label>消费积分</small></li> <li><b class=value>{{userPoints}}</b><small class=label>剩余积分</small></li> </ul> <list-view class=no-arrow> <li><a><span class="icon icon-clock"></span>下单时间：{{order.sellorder_datetime | date \'yyyy年MM月dd日 hh:mm\'}}</a></li> <li v-if=order.real><a><span class="icon icon-user"></span>收件人：{{order.sellorder_receiver}}</a></li> <li><a><span class="icon icon-phone"></span>手机号：{{order.sellorder_receivecell}}</a></li> <li class=item-address v-if=order.real><a><span class="icon icon-home"></span><span class=label>收件地址：</span><p>{{order.sellorder_receiveprov + order.sellorder_receivecity + order.sellorder_receivecounty + order.sellorder_receiveaddr}}</p></a></li> </list-view> <ul class=tips> <li v-if=!order.real>请注意查收夜点娱乐公众号为您发送的礼品兑换码。</li> <li>您可以在 <b>我的订单>礼品订单</b> 中查看订单最新进度。如有任何疑问，请拨打客服热线 <b>4006507351</b>。</li> </ul> </section> <button type=button class=btn-float @click=goBack>确定</button> <a class=fab v-link="{name:\'list\'}"><span>KTV预订</span></a> <loading v-if="loadingStatus==1"></loading> <screen-message v-if="loadingStatus==-1" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> </div> '},function(t,e){t.exports=' <div class="order-list order-list-gift"> <ul> <li v-for="order in list | limitBy currLimit" :data-status=order.order_status v-link="{name:\'gift-order\',params:{id:order.order_no}}"> <header class=header> <span class=name>{{order.sellordergoods_name}}</span> <span class=status>{{order.order_status}}</span> </header> <div class=content> <p class="info amount">订单数量 <em>{{order.sellordergoods_num}}</em></p> <span class=info>消费积分 <em>{{order.sellorder_pointdeduction}}</em></span> <span class=ordertime>{{order.sellorder_datetime | date \'yyyy年MM月dd日 hh:mm\'}}下单</span> </div> <figure class=pic v-adaptive-background=order.sellordergoods_mainpic></figure> </li> </ul> <loading v-show="loadingStatus==1" :inline-mode="list.length>0"></loading> <screen-message v-if="loadingStatus==-1" :inline-mode="list.length>0" message="加载失败, 点击重试" @click=fetch></screen-message> <screen-message v-if="loadingStatus==2&&list.length==0" message=无订单></screen-message> </div> '},function(t,e){t.exports=' <div class=page-ktvorder> <figure class=ktv-pic :style="order.ktvinfo | backgroundImage"></figure> <div v-if=order.ktvinfo> <section class=pay-countdown v-if="timeRemaining > -1"> <h4>支付剩余时间</h4><time>{{timeRemaining | humanTime}}</time> </section> <section class=baseinfo> <div class=action> <span class=status>{{order.order_status | statusName}}</span> <button type=button class=btn v-if=isOrderCancelable @click.stop=cancelOrder v-el:cancel-btn><span class=text>取消订单</span><span class="icon icon-spinner"></span></button> </div> <h2 class=name v-link="{ name: \'detail\', params: { id: order.ktvinfo.xktvid }}">{{order.ktvinfo.xktvname}}</h2> <span class=rating><span class=full></span><span class=stars :style="{width:order.ktvinfo.rate*20+\'%\'}"></span></span> <p class=refund-tip v-if="order.order_status==21">您的款项将于3-5 个工作日返还您的账户</p> </section> <list-view class=bg> <li><a :href="\'tel:\'+order.ktvinfo.telephone"><span class="icon lineicon-phone"></span>{{order.ktvinfo.telephone}}</a></li> <li class=item-address><a @click=openMap><span class="icon lineicon-location"></span><span class=value>{{order.ktvinfo.address}}</span></a></li> </list-view> <ul class=detail> <li><span class=label>时间</span><span class=value>{{orderDate}} <span class=duration>共 <strong>{{(this.order.endtime - this.order.starttime)/60/60}}</strong> 小时</span></span></li> <li><span class=label>包房</span><span class=value>{{order.room_name}}</span></li> <li><span class=label>套餐</span><span class=value>{{order.taocan_info?order.taocan_info.name:"无"}}</span></li> <li><span class=label>兑酒券</span><span class=value>{{order.coupon_info.count?order.coupon_info.name+((order.order_status==4||order.order_status==7||order.order_status==14)?"（已返还）":""):"无"}}</span></li> </ul> <ul class=detail> <li v-if="order.taocantype==0"><span class=label>价格</span><span class=value>¥ {{order.price}}</span></li> <li><span class=label>手机</span><span class=value>{{order.mobile | mobileFormat}}</span></li> </ul> </div> <figure class=qrcode v-if=canDisplayQrcode> <img :src=order.qrcode /> <figcaption>请将此二维码出示给工作人员</figcaption> </figure> <modal v-if=order.ktvinfo id=rating-modal :title="\'为 \' + order.ktvinfo.xktvname + \' 评分\'" btn-text=提交 :btn-disabled=!isRatingComplete :submit=postReview v-ref:rating-modal> <table class=rating-list> <tr><th><span class="icon icon-decoration"></span>装修</th><td><rating :value.sync=ratings.decoration></rating></td></tr> <tr><th><span class="icon icon-sound"></span>音响</th><td><rating :value.sync=ratings.sound></rating></td></tr> <tr><th><span class="icon icon-service"></span>服务</th><td><rating :value.sync=ratings.service></rating></td></tr> <tr><th><span class="icon icon-consumer"></span>消费</th><td><rating :value.sync=ratings.consumer></rating></td></tr> <tr><th><span class="icon icon-food"></span>食物</th><td><rating :value.sync=ratings.food></rating></td></tr> </table> <div class=app-rating> <h4>为 夜点娱乐 评分</h4> <rating :value.sync=ratings.app :size=22></rating> </div> </modal> <button type=button class="btn-float btn-comment" v-if="order.order_status==5&&!order.rating.status" @click=$refs.ratingModal.open()><span></span></button> <button type=button class="btn-float btn-pay" @click=payOrder v-if="timeRemaining > -1" v-el:pay-btn><span></span></button> <flash-message id=order-success-message btn-text=分享给好友 v-ref:order-success-message> <div class=screen1> <div class="icon icon-smile"></div> <p class=message>您预订的KTV已经兑换成功，感谢您对夜点的支持，夜点赠送您一张新的兑酒券，将于5分钟之内发放到您的账户，次日可用。<br/>祝您欢唱愉快！</p> <hr/><h4>夜点，预订你的KTV派对</h4> <p class=text>分享给你的好友们，领取免费兑酒券…</p> <span class=arrow></span> </div> <div class=share-tip></div> </flash-message> <div id=order-redpacket v-el:order-redpacket> <span class=arrow></span> <div class=body> <div class=redpacket></div> <p class=rate_title v-if=!order.is_pingjia.status>为这次预订打个分吧</p> <p> <rating :value.sync=ratings.app size=28 color=#FDE04A :once=true :disabled=!!order.is_pingjia.status @change=redpacketRating></rating> </p> <p class=thanks>感谢您的参与！</p> <span class=close @click="$els.orderRedpacket.style.display=\'none\'"></span> </div> </div> <flash-message v-ref:flash-message></flash-message> <loading v-if="loadingStatus==1"></loading> <screen-message v-if="loadingStatus==-1" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> </div> '},function(t,e){t.exports=' <div class="order-list order-list-ktv"> <ul> <li v-for="order in list | limitBy currLimit" :data-status=order.order_status v-link="{name: \'ktv-order\', params: { id: order.order_code }}" data-v-swipe-to-delete=order> <header class=header> <span class=name>{{order.ktvinfo.xktvname}}</span> <span class=status>{{order.order_status | statusName}}</span> </header> <figure class=pic :style="order.ktvinfo.piclist[0].bigpicurl | backgroundImage"></figure> <div class=content> <button type=button class=btn v-if="order.order_status==5&&!order.rating.status" @click.stop=showRatingModal(order)>待评价</button> <time class=ordertime>{{order | humanDate}}</time> <p class=info>共 {{order | duration}} 小时&emsp;{{order.room_name}}</p> <p class=couponinfo v-if=order.coupon_info.count>订单包含兑酒券一张，到店消费可免费兑换{{order.coupon_info.name}}。</p> </div> </li> </ul> <modal v-if=ratingOrder id=rating-modal :title="\'为 \' + ratingOrder.ktvinfo.xktvname + \' 评分\'" btn-text=提交 :btn-disabled=!isRatingComplete :submit=postReview v-ref:rating-modal> <table class=rating-list> <tr><th><span class="icon icon-decoration"></span>装修</th><td><rating :value.sync=ratings.decoration></rating></td></tr> <tr><th><span class="icon icon-sound"></span>音响</th><td><rating :value.sync=ratings.sound></rating></td></tr> <tr><th><span class="icon icon-service"></span>服务</th><td><rating :value.sync=ratings.service></rating></td></tr> <tr><th><span class="icon icon-consumer"></span>消费</th><td><rating :value.sync=ratings.consumer></rating></td></tr> <tr><th><span class="icon icon-food"></span>食物</th><td><rating :value.sync=ratings.food></rating></td></tr> </table> <div class=app-rating> <h4>为 夜点娱乐 评分</h4> <rating :value.sync=ratings.app :size=22></rating> </div> </modal> <flash-message v-ref:flash-message></flash-message> <loading v-show="loadingStatus==1" :inline-mode="list.length>0"></loading> <screen-message v-if="loadingStatus==-1" :inline-mode="list.length>0" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> <screen-message v-if="loadingStatus==2&&list.length==0" message=无订单></screen-message> </div> '},function(t,e){t.exports=' <div class=page-order> <header class="masthead order-navbar"> <span class=filter-trigger v-show="activeView==\'ktv\'" @click="showStatusFilter=!showStatusFilter"><span class="icon icon-setting"></span></span> <nav class=segmented-control> <a :class="{active:activeView==\'ktv\'}" v-link="\'/order/ktv\'" @click="activeView=\'ktv\'">KTV订单</a> <a :class="{active:activeView==\'gift\'}" v-link="\'/order/gift\'" @click="activeView=\'gift\'">礼品订单</a> </nav> <ul class="dropdown dropdown-ktv" transition=fade v-show="activeView==\'ktv\'&&showStatusFilter" v-el:filter-dropndown> <li @click="status=0">全部订单</li> <li @click="status=1">预约中订单</li> <li @click="status=3">已确认订单</li> <li @click="status=7">已取消订单</li> </ul> </header> <router-view></router-view> </div> '},function(t,e){t.exports=' <div class=page-search> <header class=masthead v-el:masthead> <form class=search-form @submit.prevent=search> <input type=search autocomplete=off v-model=keyword> <button type=submit><span class="icon icon-search"></span></button> </form> </header> <div class=ktv-list-container> <ul class=ktv-list> <li v-for="ktv in list | limitBy currLimit" :style="ktv.piclist[0].bigpicurl | backgroundImage"> <a v-link="{ name: \'detail\', params: { id: ktv.xktvid }}"> <span v-if=ktv.taocan class="stamp stamp-goldpkg"></span> <div class=content> <div class=marks> <span v-if=ktv.sjq class="mark mark-djq"></span> <span v-if=ktv.online_pay class="mark mark-zxf"></span> </div> <h3 class=title>{{ktv.xktvname}}</h3> <span class=rating><span class=full></span><span class=stars :style="{width:ktv.rate*20+\'%\'}"></span></span> <p class=address>{{ktv.address}}</p> <span class=distance v-if="ktv | distance">{{ktv | distance}}KM</span> </div> </a> </li> </ul> <loading v-show="loadingStatus==1" :inline-mode="list.length>0"></loading> <screen-message v-if="loadingStatus==-1" :inline-mode="list.length>0" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> <screen-message v-if="loadingStatus==2&&list.length==0" message=未找到></screen-message> </div> </div> '},function(t,e){t.exports=' <div class=page-store> <header class=banner> <h1 class=title>通过积分兑换礼品</h1> <span class=points>我的积分 {{userPoints}}</span> </header> <section class=gift-list-continer> <ul class=gift-list> <li v-for="gift in list | limitBy currLimit"> <a v-link="{name:\'gift\',params:{id:gift.product_id}}"> <figure class=pic :style="{backgroundImage:\'url(\'+gift.product_mainpic+\')\'}"></figure> <div class=content> <h4 class=name>{{gift.productsale_name}}</h4> <span class=points>{{gift.productsale_points}} 积分</span> </div> </a> </li> </ul> <loading v-show="loadingStatus==1" :inline-mode="list.length>0"></loading> <screen-message v-if="loadingStatus==-1" :inline-mode="list.length>0" message="加载失败, 点击重试" @click=fetch></screen-message> <screen-message v-if="loadingStatus==2&&list.length==0" message=列表为空></screen-message> </section> </div> '},function(t,e){t.exports=' <div class=page-user> <header class=user-info> <a class="btn btn-invite" @click="showInvitePoster=true">邀请好友</a> <img class=avatar :src=user.avatar_url @click=$refs.editBaseinfoModal.open()> <span class=name @click=$refs.editBaseinfoModal.open()>{{user.real_name || user.display_name}}</span> <span class=points>积分 {{user.points}}</span> </header> <list-view class=user-menu> <li><a @click=$refs.editMobileModal.open()><span class="icon icon-phone"></span>手机<span class=value>{{user.mobile}}</span></a></li> <li><a @click=$refs.editAddressModal.open()><span class="icon icon-home"></span>收件地址<span class=value>{{fullAddress}}</span></a></li> <li><a v-link="\'/order\'"><span class="icon icon-order"></span>我的订单<span class=value>KTV订单 {{user.order}}&emsp;礼品订单 {{user.giftordernum}}</span></a></li> <li><a v-link="\'/user/favorite\'"><span class="icon icon-favorite"></span>我的收藏<span class=value>{{user.collectionnum}}</span></a></li> <li><a v-link="\'/coupon\'"><span class="icon icon-coupon"></span>我的兑酒券<span class=value>未使用 {{user.couponnum}}</span></a></li> <li><a :href="\'tel:\'+hotline"><span class="icon icon-service"></span>客服热线<span class=value>{{hotline}}</span></a></li> </list-view> <modal id=edit-baseinfo-modal class=red-placeholder doc-title=编辑用户信息 :btn-disabled=isInvalidBaseInfoForm :submit=updateBaseInfo v-ref:edit-baseinfo-modal> <list-view class=no-arrow> <li><a @click=$els.name.focus()><span class="icon icon-user"></span><input type=text placeholder=姓名 v-model=editBaseInfo.name maxlength=30 v-el:name></a></li> <li><a> <input type=radio id=male value=1 v-model=editBaseInfo.gender> <label for=male>男</label> <input type=radio id=female value=2 v-model=editBaseInfo.gender> <label for=female>女</label> </a></li> </list-view> </modal> <modal id=edit-mobile-modal class=red-placeholder doc-title=编辑手机号 :btn-disabled=isInvalidMobileForm :submit=updateMobile v-ref:edit-mobile-modal> <list-view class=no-arrow> <li class=item-phone><a @click=$els.phone.focus()><span class="icon icon-phone"></span><input type=tel placeholder=手机 v-model=editMobile.mobile maxlength=11 v-el:phone></a></li> <li class=item-captcha><a><input type=number placeholder=验证码 maxlength=6 v-model=editMobile.captcha><button type=button class="btn btn-sendcaptcha" @click=$api.sendCode(editMobile.mobile)>发送验证码</button></a></li> </list-view> </modal> <modal id=edit-address-modal class=red-placeholder doc-title=编辑收件地址 :btn-disabled=isInvalidAddressForm :submit=updateAddress v-ref:edit-address-modal> <list-view class=no-arrow> <li><a @click=$els.sname.focus()><span class="icon icon-user"></span><input type=text placeholder=收件人 maxlength=30 v-model=editAddress.name v-el:sname></a></li> <li class=item-phone><a @click=$els.stel.focus()><span class="icon icon-phone"></span><input type=tel placeholder=手机 v-model=editAddress.tel maxlength=11 v-el:stel></a></li> <li class=item-city><a><city-selector :province.sync=editAddress.prov :city.sync=editAddress.city :district.sync=editAddress.county></city-selector></a></li> <li><a @click=$els.saddress.focus()><span class="icon icon-home"></span><input type=text placeholder=收件地址 v-model=editAddress.address v-el:saddress></a></li> </list-view> </modal> <div class=invite-poster v-show=showInvitePoster transition=fade @click="showInvitePoster=false"></div> <loading v-if="loadingStatus==1"></loading> <screen-message v-if="loadingStatus==-1" message="加载失败, 点击重试" :info=errorMsg @click=fetch></screen-message> </div> '},function(t,e,s){var i,a;s(115),i=s(43),a=s(142),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(116),i=s(44),a=s(143),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(117),a=s(144),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(118),i=s(45),a=s(145),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(119),i=s(46),a=s(146),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(120),i=s(47),a=s(147),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(121),i=s(48),a=s(148),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(122),i=s(49),a=s(149),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(123),i=s(50),a=s(150),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(124),i=s(51),a=s(151),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(125),i=s(52),a=s(152),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(126),i=s(53),a=s(153),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(127),i=s(54),a=s(154),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(128),i=s(55),a=s(155),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(129),i=s(56),a=s(156),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(130),i=s(57),a=s(157),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(131),i=s(58),a=s(158),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(132),i=s(59),a=s(159),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(133),i=s(60),a=s(160),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(134),i=s(61),a=s(161),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(135),i=s(62),a=s(162),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(136),i=s(63),a=s(163),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(137),i=s(64),a=s(164),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(138),i=s(65),a=s(165),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(139),i=s(66),a=s(166),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(140),i=s(67),a=s(167),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;s(141),i=s(68),a=s(168),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){function i(t){return s(a(t))}function a(t){return n[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var n={"./city-selector.vue":169,"./flash-message.vue":170,"./list-view.vue":171,"./loading.vue":172,"./modal.vue":173,"./rating.vue":174,"./screen-message.vue":175,"./simple-slider.vue":176,"./spin-box.vue":177,"./tab-bar.vue":178};i.keys=function(){return Object.keys(n)},i.resolve=a,t.exports=i,i.id=196}]);